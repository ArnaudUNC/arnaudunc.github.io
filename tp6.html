<!DOCTYPE html>
<html lang="fr">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>âœï¸ TP 6 - Prog. objets niv.4 âœ”ï¸ | Algo et prog 2 en Python</title>
	<link href="prism.css" rel="stylesheet"/>
	<link href="style.css" rel="stylesheet"/>
	<link rel="icon" href="img/favicon.svg">
</head>
<body>
<div id="conteneur">
	<div id="side_nav_bar">
		<svg xmlns="http://www.w3.org/2000/svg" width="200" height="200" viewBox="0 0 100 100" style="display:block; margin:auto; padding: 0 0 1em 0;">
	<style>
		text {
			text-align: center;
			fill: white;
			text-anchor: middle;
			font-size: 11pt;
		}
	</style>
	<rect fill="hsl(200,50%, 50%)" x="0" y="0" width="100" height="100"></rect>
	<text x="50" y="45" style="font-size: 30pt;">
		ğŸ

	</text>
	<text x="50" y="75">
		Algo et prog 2
	</text>
	<text x="50" y="90">
		en Python
	</text>
</svg>

	
			<div class="h h1">
				<!--span class="ballot_box">â˜’</span-->
				<a href="index.html#Introduction">
					Introduction
				</a>
			</div>
	

	
			<div class="h h1">
				<!--span class="ballot_box">â˜’</span-->
				<a href="groupes.html#Groupes de TD / TP">
					Groupes de TD / TP
				</a>
			</div>
	

	
			<div class="h h1">
				<!--span class="ballot_box">â˜’</span-->
				<a href="cm1.html#ğŸ“– Cours 1: rappels">
					ğŸ“– Cours 1: rappels
				</a>
			</div>
	

	
			<div class="h h1">
				<!--span class="ballot_box">â˜’</span-->
				<a href="td1.html#âœï¸ TD 1 - Calculatrice niv.1 âœ”ï¸">
					âœï¸ TD 1 - Calculatrice niv.1 âœ”ï¸
				</a>
			</div>
	

	
			<div class="h h1">
				<!--span class="ballot_box">â˜’</span-->
				<a href="tp1.html#âœï¸ TP 1 - Calculatrice niv.2 âœ”ï¸">
					âœï¸ TP 1 - Calculatrice niv.2 âœ”ï¸
				</a>
			</div>
	

	
			<div class="h h1">
				<!--span class="ballot_box">â˜’</span-->
				<a href="tp2.html#âœï¸ TP 2 - Calculatrice niv.3 âœ”ï¸">
					âœï¸ TP 2 - Calculatrice niv.3 âœ”ï¸
				</a>
			</div>
	

	
			<div class="h h1">
				<!--span class="ballot_box">â˜’</span-->
				<a href="tp3.html#âœï¸ TP 3 - Calculatrice niv.4 âœ”ï¸">
					âœï¸ TP 3 - Calculatrice niv.4 âœ”ï¸
				</a>
			</div>
	

	
			<div class="h h1">
				<!--span class="ballot_box">â˜’</span-->
				<a href="cm2.html#ğŸ“– Cours 2: Programmation orientÃ©e objets">
					ğŸ“– Cours 2: Programmation orientÃ©e objets
				</a>
			</div>
	

	
			<div class="h h1">
				<!--span class="ballot_box">â˜’</span-->
				<a href="td2.html#âœï¸ TD 2 - Prog. objets niv.1 âœ”ï¸">
					âœï¸ TD 2 - Prog. objets niv.1 âœ”ï¸
				</a>
			</div>
	

	
			<div class="h h1">
				<!--span class="ballot_box">â˜’</span-->
				<a href="tp4.html#âœï¸ TP 4 - Prog. objets niv.2 âœ”ï¸">
					âœï¸ TP 4 - Prog. objets niv.2 âœ”ï¸
				</a>
			</div>
	

	
			<div class="h h1">
				<!--span class="ballot_box">â˜’</span-->
				<a href="tp5.html#âœï¸ TP 5 - Prog. objets niv.3 âœ”ï¸">
					âœï¸ TP 5 - Prog. objets niv.3 âœ”ï¸
				</a>
			</div>
	

	
			<div class="page_actuelle h h1">
				<!--span class="ballot_box">â˜</span-->
				<a href="#âœï¸ TP 6 - Prog. objets niv.4 âœ”ï¸">
					âœï¸ TP 6 - Prog. objets niv.4 âœ”ï¸
				</a>
			</div>
			<div class="page_actuelle h h2">
				<!--span class="ballot_box">â˜</span-->
				<a href="#Question 1">
					Question 1
				</a>
			</div>
			<div class="page_actuelle h h2">
				<!--span class="ballot_box">â˜</span-->
				<a href="#Question 2">
					Question 2
				</a>
			</div>
			<div class="page_actuelle h h2">
				<!--span class="ballot_box">â˜</span-->
				<a href="#Question 3">
					Question 3
				</a>
			</div>
	

	
			<div class="h h1">
				<!--span class="ballot_box">â˜</span-->
				<a href="tp7.html#âœï¸ TP 7 - Prog. objets niv.5 âœ”ï¸">
					âœï¸ TP 7 - Prog. objets niv.5 âœ”ï¸
				</a>
			</div>
	

	
			<div class="h h1">
				<!--span class="ballot_box">â˜</span-->
				<a href="cm3.html#ğŸ“– Cours 3: fonctionnalitÃ©s de Python">
					ğŸ“– Cours 3: fonctionnalitÃ©s de Python
				</a>
			</div>
	

	
			<div class="h h1">
				<!--span class="ballot_box">â˜</span-->
				<a href="td3.html#âœï¸ TD 3 âœ”ï¸">
					âœï¸ TD 3 âœ”ï¸
				</a>
			</div>
	

	
			<div class="h h1">
				<!--span class="ballot_box">â˜</span-->
				<a href="cm4.html#ğŸ“– Cours 4: rappels et complÃ©ments">
					ğŸ“– Cours 4: rappels et complÃ©ments
				</a>
			</div>
	

	
			<div class="h h1">
				<!--span class="ballot_box">â˜</span-->
				<a href="tp8.html#âœï¸ TP 8 âœ”ï¸">
					âœï¸ TP 8 âœ”ï¸
				</a>
			</div>
	

	
			<div class="h h1">
				<!--span class="ballot_box">â˜</span-->
				<a href="tp9.html#âœï¸ TP 9 - Jeu du pendu niv.1">
					âœï¸ TP 9 - Jeu du pendu niv.1
				</a>
			</div>
	

	
			<div class="h h1">
				<!--span class="ballot_box">â˜</span-->
				<a href="exos_notes.html#ğŸ“ Exercices notÃ©s">
					ğŸ“ Exercices notÃ©s
				</a>
			</div>
	

	
			<div class="h h1">
				<!--span class="ballot_box">â˜</span-->
				<a href="cc1_2021.html#ğŸ“ ContrÃ´le continu 1">
					ğŸ“ ContrÃ´le continu 1
				</a>
			</div>
	

	</div>
	<div id="contenu">
		

		<div class="nav_arrows">
		<div style="display: flex; flex-direction: row; justify-content: space-between; padding: 1em 0em;">
				<span>
					
						<a href="tp5.html">â† Page prÃ©cÃ©dente</a>
					
				</span>
			
				<span style="padding: 0 .5em;">
						<a href="index.html">1Ã¨re page</a>
					</span>
			
			<span>
				
					<a href="tp7.html">Page suivante â†’</a>
				
				</span>
		</div>
		</div>
		<hr>

		
	<h1 data-nb="12" id="âœï¸ TP 6 - Prog. objets niv.4 âœ”ï¸">âœï¸ TP 6 - Prog. objets niv.4 âœ”ï¸</h1>
<p>Ce TP est la suite directe du TP 5.</p>
<div class="exercice">
<h2 data-nb="12.1" id="Question 1">Question 1</h2>
<p>On continue de modifier le programme du dernier exercice du TP prÃ©cÃ©dent.</p>
<p>On veut qu'il soit impossible pour un Personnage de sortir du Terrain, il faut le restreindre dans l'aire de jeu.</p>
<video controls="" preload="none" src="img/tp6/q1.mp4"></video>
<p>Faites selon la faÃ§on qui vous convient, ou utilisez la faÃ§on ci-dessous:</p>
<ol>
<li>chaque Personnage aura besoin de savoir sur quel Terrain il se trouve, donc ajouter un attribut (par exemple <code>terrain</code>) dans le
				constructeur de Personnage. Le Terrain doit Ãªtre spÃ©cifiÃ© au moment de la crÃ©ation du perso, donc ajouter Ã©galement un paramÃ¨tre au
				constructeur, et initialiser la valeur de l'attribut avec la valeur du paramÃ¨tre.
			</li>
<li><p>Jusqu'Ã  prÃ©sent, le dÃ©placement du Personnage se fait en modifiant sa position depuis la classe Jeu, mais cela n'est pas bon car ce n'est pas
				la responsabilitÃ© de Jeu. Jeu devrait plutÃ´t <em>demander</em> au Personnage de se dÃ©placer en appelant une de ses mÃ©thodes (de la classe
				Personnage), et ensuite c'est le perso lui-mÃªme qui ferait son propre dÃ©placement selon sa propre logique. Ainsi il pourrait Ã©viter de sortir du
				Terrain par exemple, mais on pourrait aussi ajouter d'autres contraintes facilement plus tard.</p>
<p>Ajouter dans la classe Personnage une mÃ©thode pour se dÃ©placer. La mÃ©thode prend 2 paramÃ¨tres (en plus de <code>self</code>):</p>
<ol>
<li>un <code>int</code> pour le nombres de cases de dÃ©placement horizontalement sur le terrain du perso</li>
<li>un second <code>int</code> pour verticalement</li>
</ol>
<p>C'est dans cette mÃ©thode qu'on empÃªche le Personnage de sortir de son terrain.</p>
</li>
<li>Dans mÃ©thode <code>dÃ©marrer</code> de la classe Jeu, utiliser la nouvelle mÃ©thode de Personnage pour dÃ©placer le perso joueur.
			</li>
<li>VÃ©rifier que Ã§a fonctionne: le perso ne devrait plus pouvoir sortir du terrain.</li>
</ol>
<div class="correction">
<pre class="line-numbers"><code class="language-python">
				import os

				class Personnage:
					# â†“ On a ajoutÃ© le paramÃ¨tre terrain, et l'attribut du mÃªme nom,
					# ce qui permettra Ã  chaque Personnage de savoir
					# sur quel Terrain il existera.
					def __init__(self, nom_initial, pv_max, char_apparence, x, y, terrain):
						self.nom = nom_initial
						self.points_de_vie = self.points_de_vie_max = pv_max
						self.position = [x, y]
						self.char_apparence = char_apparence
						self.terrain = terrain

					# â†“ On a ajoutÃ© cette mÃ©thode
					def dÃ©placer(self, dÃ©placement_x, dÃ©placement_y):
						if 0 &lt;= self.position[0] + dÃ©placement_x &lt; self.terrain.taille_x:
							self.position[0] += dÃ©placement_x
						if 0 &lt;= self.position[1] + dÃ©placement_y &lt; self.terrain.taille_y:
							self.position[1] += dÃ©placement_y

					def saluer(self):
						if self.points_de_vie &gt; 0:
							print("Bonjour, je suis " + self.nom + ": vie=" + str(self.points_de_vie) \
								  + "/" + str(self.points_de_vie_max) + ". Position=(" \
								  + str(self.position[0]) + "," + str(self.position[1]) + ")")
						else:
							print(self.nom, "est mort")

					def soigner(self, points_de_soin):
						if self.points_de_vie &lt;= 0:
							print("Impossible de soigner un perso mort")
							return
						if points_de_soin &lt;= 0:
							print("Soins nÃ©gatifs, impossible")
							return
						vie_avant_soins = self.points_de_vie
						soins_effectifs = points_de_soin
						self.points_de_vie += points_de_soin
						if self.points_de_vie &gt; self.points_de_vie_max:
							soins_effectifs = self.points_de_vie_max - vie_avant_soins
							self.points_de_vie = self.points_de_vie_max
						print(self.nom, "est soignÃ© de", soins_effectifs, "points")

					def blesser(self, points_de_dÃ©gÃ¢ts):
						if points_de_dÃ©gÃ¢ts &gt; 0:
							vie_avant_dÃ©gÃ¢ts = self.points_de_vie
							self.points_de_vie -= points_de_dÃ©gÃ¢ts
							if self.points_de_vie &lt; 0:
								self.points_de_vie = 0
								print(self.nom, "subit", vie_avant_dÃ©gÃ¢ts, "dÃ©gÃ¢ts")
							else:
								print(self.nom, "subit", points_de_dÃ©gÃ¢ts, "dÃ©gÃ¢ts")
						else:
							print("DÃ©gÃ¢ts nÃ©gatifs ou zÃ©ro interdits pour", self.nom)

					def attaquer(self, perso_cible):
						print(self.nom, "attaque", perso_cible.nom)
						perso_cible.blesser(25)


				class Terrain:
					# â†“ On a retirÃ© le paramÃ¨tre perso,
					# et initialisÃ© l'attribut perso Ã  None.
					# Il faudra lui donner une valeur APRES l'instanciation du Terrain,
					# voir en fin de programme.
					def __init__(self, taille_x, taille_y):
						self.taille_x = taille_x
						self.taille_y = taille_y
						self.perso = None

					def dessiner(self):
						for j in range(self.taille_y):
							ligne = ""
							for i in range(self.taille_x):
								perso_prÃ©sent_sur_case = False
								if self.perso.position == [i, j]:
									ligne += self.perso.char_apparence + " "
									perso_prÃ©sent_sur_case = True
								if not perso_prÃ©sent_sur_case:
									ligne += "Â· "
							print(ligne)


				class Jeu:
					def __init__(self, terrain, perso):
						self.terrain = terrain
						self.perso = perso

					def dÃ©marrer(self):
						action_utilisateur = ""
						while action_utilisateur != "qq":
							os.system("cls")
							self.terrain.dessiner()
							self.perso.saluer()
							action_utilisateur = input("Action: ")
							if action_utilisateur == "q":
								self.perso.dÃ©placer(-1, 0)
							elif action_utilisateur == "d":
								self.perso.dÃ©placer(1, 0)
							elif action_utilisateur == "z":
								self.perso.dÃ©placer(0, -1)
							elif action_utilisateur == "s":
								self.perso.dÃ©placer(0, 1)


				terrain = Terrain(5, 5)
				perso1 = Personnage("Toto", 100, "@", 2, 1, terrain)
				# â†“ On n'oublie pas donner une valeur Ã  l'attribut "perso" du terrain,
				# aprÃ¨s la crÃ©ation du Personnage
				terrain.perso = perso1
				jeu = Jeu(terrain, perso1)
				jeu.dÃ©marrer()
			</code></pre>
<p>Remarque: on est obligÃ© de retirer le paramÃ¨tre "perso" du constructeur de Terrain, car alors on aurait une situation "circulaire" impossible Ã 
				satisfaire: il faudrait un Terrain pour construire un Personnage, mais il faudraitt aussi le Personnage pour construire le Terrain associÃ©. Dans
				ce genre de situation l'une des deux entitÃ©s doit Ãªtre initialisÃ©e en deux temps comme dans ce cas prÃ©sent.</p>
</div>
</div>
<div class="exercice">
<h2 data-nb="12.2" id="Question 2">Question 2</h2>
<p>On veut ajouter des murs sur notre terrain. Pour l'instant ils ne bloquent pas le perso du joueur.</p>
<video controls="" preload="none" src="img/tp6/q2.mp4"></video>
<p>Faites selon la faÃ§on qui vous convient, ou utilisez la faÃ§on ci-dessous:</p>
<ol>
<li><p>Ajouter pour chaque Terrain un attribut qui est un tableau Ã  2 dimensions, dans lequel vous stockerez si oui ou non chaque case contient un
				mur ou pas. Un mur (et l'absence de mur) peut Ãªtre reprÃ©sentÃ© dans chaque case du tableau par un <code>int</code> (0 = un mur, autre valeur =
				pas de mur par exemple) ou un <code>bool</code> (<code>True</code> = un mur, <code>False</code> = pas de mur), au choix.</p>
<p>On peut considÃ©rer qu'un Terrain ne contient aucun mur aprÃ¨s sa crÃ©ation, ils seront ajoutÃ©s un par un en modifiant directement son tableau
					de murs.</p>
</li>
<li><p>Modifier la mÃ©thode <code>dÃ©ssiner</code> de la classe <code>Terrain</code> pour prendre en compte les murs et les dessiner. Vous pouvez
				utiliser deux fois le caractÃ¨re "â–ˆ" pour faire un carrÃ© dans la console, comme ceci: â–ˆâ–ˆ. Les cases vides sont toujours dessinÃ©es avec le
				caractÃ¨re "Â·" Ã  ne pas confondre avec le point "."</p>
<p>Quand un Personnage se trouve sur la mÃªme case qu'un mur, c'est lui qui est dessinÃ©, pas le mur, pour Ã©viter de perdre de vue le perso du
					joueur.</p>
</li>
<li>AprÃ¨s la crÃ©ation du Terrain, en bas du programme, lui ajouter quelques murs avant de lancer le Jeu, et vÃ©rifier que vous les voyez. Mais vous
				pouvez passer Ã  travers pour le moment.
			</li>
</ol>
<div class="correction">
<pre class="line-numbers"><code class="language-python">
				import os

				class Personnage:
					def __init__(self, nom_initial, pv_max, char_apparence, x, y, terrain):
						self.nom = nom_initial
						self.points_de_vie = self.points_de_vie_max = pv_max
						self.position = [x, y]
						self.char_apparence = char_apparence
						self.terrain = terrain

					def dÃ©placer(self, dÃ©placement_x, dÃ©placement_y):
						if 0 &lt;= self.position[0] + dÃ©placement_x &lt; self.terrain.taille_x:
							self.position[0] += dÃ©placement_x
						if 0 &lt;= self.position[1] + dÃ©placement_y &lt; self.terrain.taille_y:
							self.position[1] += dÃ©placement_y

					def saluer(self):
						if self.points_de_vie &gt; 0:
							print("Bonjour, je suis " + self.nom + ": vie=" + str(self.points_de_vie) \
								  + "/" + str(self.points_de_vie_max) + ". Position=(" \
								  + str(self.position[0]) + "," + str(self.position[1]) + ")")
						else:
							print(self.nom, "est mort")

					def soigner(self, points_de_soin):
						if self.points_de_vie &lt;= 0:
							print("Impossible de soigner un perso mort")
							return
						if points_de_soin &lt;= 0:
							print("Soins nÃ©gatifs, impossible")
							return
						vie_avant_soins = self.points_de_vie
						soins_effectifs = points_de_soin
						self.points_de_vie += points_de_soin
						if self.points_de_vie &gt; self.points_de_vie_max:
							soins_effectifs = self.points_de_vie_max - vie_avant_soins
							self.points_de_vie = self.points_de_vie_max
						print(self.nom, "est soignÃ© de", soins_effectifs, "points")

					def blesser(self, points_de_dÃ©gÃ¢ts):
						if points_de_dÃ©gÃ¢ts &gt; 0:
							vie_avant_dÃ©gÃ¢ts = self.points_de_vie
							self.points_de_vie -= points_de_dÃ©gÃ¢ts
							if self.points_de_vie &lt; 0:
								self.points_de_vie = 0
								print(self.nom, "subit", vie_avant_dÃ©gÃ¢ts, "dÃ©gÃ¢ts")
							else:
								print(self.nom, "subit", points_de_dÃ©gÃ¢ts, "dÃ©gÃ¢ts")
						else:
							print("DÃ©gÃ¢ts nÃ©gatifs ou zÃ©ro interdits pour", self.nom)

					def attaquer(self, perso_cible):
						print(self.nom, "attaque", perso_cible.nom)
						perso_cible.blesser(25)


				class Terrain:
					def __init__(self, taille_x, taille_y):
						self.taille_x = taille_x
						self.taille_y = taille_y
						self.perso = None
						# â†“ Ajout du tableau Ã  deux dimensions qui contiendra les murs.
						# Chaque case contiendra la valeur None si pas de mur Ã  sa position,
						# ou le int 0 si un mur est prÃ©sent.
						# On utilise une "comprÃ©hension" de liste pour avoir un tableau 2d facilement,
						# si vous ne savez pas ce que c'est voir le CM4, structures de donnÃ©es.
						self.cases = [[None for j in range(taille_y)] for i in range(taille_x)]

					def dessiner(self):
						for j in range(self.taille_y):
							ligne = ""
							# â†“ Maintenant on dessine aussi les murs quand ils sont prÃ©sents
							for i in range(self.taille_x):
								if self.perso.position == [i, j]:
									ligne += self.perso.char_apparence + " "
								elif self.cases[i][j] == 0:
									ligne += "â–ˆâ–ˆ"
								else:
									ligne += "Â· "
							print(ligne)


				class Jeu:
					def __init__(self, terrain, perso):
						self.terrain = terrain
						self.perso = perso

					def dÃ©marrer(self):
						action_utilisateur = ""
						while action_utilisateur != "qq":
							os.system("cls")
							self.terrain.dessiner()
							self.perso.saluer()
							action_utilisateur = input("Action: ")
							if action_utilisateur == "q":
								self.perso.dÃ©placer(-1, 0)
							elif action_utilisateur == "d":
								self.perso.dÃ©placer(1, 0)
							elif action_utilisateur == "z":
								self.perso.dÃ©placer(0, -1)
							elif action_utilisateur == "s":
								self.perso.dÃ©placer(0, 1)


				terrain = Terrain(5, 5)
				perso1 = Personnage("Toto", 100, "@", 2, 1, terrain)
				terrain.perso = perso1
				# â†“ On rajoute des murs "manuellement" un par un une fois le Terrain crÃ©Ã©
				terrain.cases[0][0] = 0
				terrain.cases[1][0] = 0
				terrain.cases[2][0] = 0
				terrain.cases[2][1] = 0
				terrain.cases[2][2] = 0
				terrain.cases[2][3] = 0
				terrain.cases[3][3] = 0
				jeu = Jeu(terrain, perso1)
				jeu.dÃ©marrer()
			</code></pre>
</div>
</div>
<div class="exercice">
<h2 data-nb="12.3" id="Question 3">Question 3</h2>
<p>Maintenant on veut empÃªcher le perso du joueur de passer Ã  travers les murs.</p>
<video controls="" preload="none" src="img/tp6/q3.mp4"></video>
<p>Faites selon la faÃ§on qui vous convient, ou utilisez la faÃ§on ci-dessous:</p>
<ol>
<li>Ajouter les contraintes nÃ©cessaires, dans la mÃ©thode pour se dÃ©placer de la classe Personnage, que vous avez ajoutÃ©e prÃ©cÃ©demment.
			</li>
<li>Sur votre Terrain, crÃ©ez une piÃ¨ce, des murs et divers obstacles.</li>
<li>VÃ©rifiez que le perso du joueur est bloquÃ© par les murs.</li>
</ol>
<div class="correction">
<pre class="line-numbers"><code class="language-python">
				import os

				class Personnage:
					def __init__(self, nom_initial, pv_max, char_apparence, x, y, terrain):
						self.nom = nom_initial
						self.points_de_vie = self.points_de_vie_max = pv_max
						self.position = [x, y]
						self.char_apparence = char_apparence
						self.terrain = terrain

					def dÃ©placer(self, dÃ©placement_x, dÃ©placement_y):
						nouveau_x = self.position[0] + dÃ©placement_x
						nouveau_y = self.position[1] + dÃ©placement_y
						# â†“ On rajoute cette contrainte: on teste si aucun mur Ã  la future position du Personnage.
						# Si on teste en dehors du Terrain (ce qui cause un IndexError) ou bien
						# si il y a un zÃ©ro dans la future case (ce qui signifie la prÃ©sence d'un mur),
						# alors on termine immÃ©diatement la fonction avec l'instruction "return".
						try:
							aucun_obstacle = self.terrain.cases[nouveau_x][nouveau_y] != 0
						except IndexError:
							return
						if not aucun_obstacle:
							return
						if 0 &lt;= nouveau_x &lt; self.terrain.taille_x:
							self.position[0] = nouveau_x
						if 0 &lt;= nouveau_y &lt; self.terrain.taille_y:
							self.position[1] = nouveau_y

					def saluer(self):
						if self.points_de_vie &gt; 0:
							print("Bonjour, je suis " + self.nom + ": vie=" + str(self.points_de_vie) \
								  + "/" + str(self.points_de_vie_max) + ". Position=(" \
								  + str(self.position[0]) + "," + str(self.position[1]) + ")")
						else:
							print(self.nom, "est mort")

					def soigner(self, points_de_soin):
						if self.points_de_vie &lt;= 0:
							print("Impossible de soigner un perso mort")
							return
						if points_de_soin &lt;= 0:
							print("Soins nÃ©gatifs, impossible")
							return
						vie_avant_soins = self.points_de_vie
						soins_effectifs = points_de_soin
						self.points_de_vie += points_de_soin
						if self.points_de_vie &gt; self.points_de_vie_max:
							soins_effectifs = self.points_de_vie_max - vie_avant_soins
							self.points_de_vie = self.points_de_vie_max
						print(self.nom, "est soignÃ© de", soins_effectifs, "points")

					def blesser(self, points_de_dÃ©gÃ¢ts):
						if points_de_dÃ©gÃ¢ts &gt; 0:
							vie_avant_dÃ©gÃ¢ts = self.points_de_vie
							self.points_de_vie -= points_de_dÃ©gÃ¢ts
							if self.points_de_vie &lt; 0:
								self.points_de_vie = 0
								print(self.nom, "subit", vie_avant_dÃ©gÃ¢ts, "dÃ©gÃ¢ts")
							else:
								print(self.nom, "subit", points_de_dÃ©gÃ¢ts, "dÃ©gÃ¢ts")
						else:
							print("DÃ©gÃ¢ts nÃ©gatifs ou zÃ©ro interdits pour", self.nom)

					def attaquer(self, perso_cible):
						print(self.nom, "attaque", perso_cible.nom)
						perso_cible.blesser(25)


				class Terrain:
					def __init__(self, taille_x, taille_y):
						self.taille_x = taille_x
						self.taille_y = taille_y
						self.perso = None
						self.cases = [[None for j in range(taille_y)] for i in range(taille_x)]

					def dessiner(self):
						for j in range(self.taille_y):
							ligne = ""
							for i in range(self.taille_x):
								if self.perso.position == [i, j]:
									ligne += self.perso.char_apparence + " "
								elif self.cases[i][j] == 0:
									ligne += "â–ˆâ–ˆ"
								else:
									ligne += "Â· "
							print(ligne)


				class Jeu:
					def __init__(self, terrain, perso: Personnage):
						self.terrain = terrain
						self.perso = perso

					def dÃ©marrer(self):
						action_utilisateur = ""
						while action_utilisateur != "qq":
							os.system("cls")
							self.terrain.dessiner()
							self.perso.saluer()
							action_utilisateur = input("Action: ")
							if action_utilisateur == "q":
								self.perso.dÃ©placer(-1, 0)
							elif action_utilisateur == "d":
								self.perso.dÃ©placer(1, 0)
							elif action_utilisateur == "z":
								self.perso.dÃ©placer(0, -1)
							elif action_utilisateur == "s":
								self.perso.dÃ©placer(0, 1)


				terrain = Terrain(10, 10)
				perso1 = Personnage("Toto", 100, "@", 1, 1, terrain)
				terrain.perso = perso1
				# â†“ On place des murs pour former des obstacles un peu intÃ©ressants,
				# comme une piÃ¨ce par exemple.
				# mur haut gauche
				terrain.cases[0][0] = 0
				terrain.cases[1][0] = 0
				terrain.cases[2][0] = 0
				terrain.cases[2][1] = 0
				terrain.cases[2][2] = 0
				terrain.cases[2][3] = 0
				terrain.cases[3][3] = 0
				# piÃ¨ce en bas
				terrain.cases[4][9] = 0
				terrain.cases[5][9] = 0
				terrain.cases[6][9] = 0
				terrain.cases[7][9] = 0
				terrain.cases[8][9] = 0

				terrain.cases[4][8] = 0
				terrain.cases[4][7] = 0
				terrain.cases[4][6] = 0

				terrain.cases[8][8] = 0
				terrain.cases[8][7] = 0
				terrain.cases[8][6] = 0

				terrain.cases[6][6] = 0
				terrain.cases[7][6] = 0

				terrain.cases[3][7] = 0
				terrain.cases[2][7] = 0
				jeu = Jeu(terrain, perso1)
				jeu.dÃ©marrer()
			</code></pre>
</div>
</div>



		<div class="nav_arrows">
			<hr>
			
		<div style="display: flex; flex-direction: row; justify-content: space-between; padding: 1em 0em;">
				<span>
					
						<a href="tp5.html">â† Page prÃ©cÃ©dente</a>
					
				</span>
			
				<span style="padding: 0 .5em;">
						<a href="index.html">1Ã¨re page</a>
					</span>
			
			<span>
				
					<a href="tp7.html">Page suivante â†’</a>
				
				</span>
		</div>
		
		</div>

	</div>

	
		<style>
			@media only screen and (min-width: 70em) {
				#side_nav_bar {
					width: 25vw;
				}

				#contenu {
					width: 75vw;
				}
			}
		</style>
	


</div>
  
<script src="prism.js"></script>

<script>
	// On supprime la premiÃ¨re ligne des <pre><code> qui est considÃ©rÃ©e toujours vide et inutile
	const codes = document.querySelectorAll('pre[class="affichage_console"] code');
	
	codes.forEach(function (el) {
		// Attention: modifier textContent ou innerText d'un Ã©lÃ©ment dÃ©truit tous ses Ã©lÃ©ments enfant :(
		//el.textContent = el.textContent.replace(/^\n/, '');
		// On modifie donc le premie noeud texte uniquement
		el.childNodes[0].textContent = el.childNodes[0].textContent.replace(/^\n/, ''); // suppose que c'est un Ã©lÃ©ment texte
	});

	// On ajoute un <br> avant et aprÃ¨s chaque <pre>
	let pres = document.querySelectorAll('pre, .exercices div.notÃ©');
	pres.forEach(function (el) {
		el.parentNode.insertBefore(document.createElement('div'), el);
		el.parentNode.insertBefore(document.createElement('div'), el.nextSibling);
	});

	// On ajoute 'Affichage' avant chaque affichage console
	pres = document.querySelectorAll('pre[class="affichage_console"]');
	pres.forEach(function (el) {
		const p = document.createElement('p');
		p.innerHTML = `<small>â†“ Affichage dans la console (ou dans le shell, selon oÃ¹ vous lancez l'exÃ©cution)<mall>`;
		p.classList.add("lÃ©gende_placÃ©e_en_haut");
		el.parentNode.insertBefore(p, el);
	});

	// Cacher corrections dans les TD / TP, et permettre de les afficher
	let divs_correction = document.querySelectorAll('div[class="correction"]');
	divs_correction.forEach(function (div) {
		div.classList.add("correction_hidden");
		const p = document.createElement('p');
		p.innerHTML = `<span class="correction_lien_Ã _cliquer">ğŸ“ Afficher / cacher correction âœ“</span>`;
		p.onclick = function (evt) {
			div.classList.toggle("correction_hidden");
		};
		div.parentNode.insertBefore(p, div);
	});
</script>
</body>
</html>