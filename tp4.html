<!DOCTYPE html>
<html lang="fr">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>✏️ TP 4 - Prog. objets niv.2 ✔️ | Algo et prog 2 en Python</title>
	<link href="prism.css" rel="stylesheet"/>
	<link href="style.css" rel="stylesheet"/>
	<!--link rel="icon" href="img/favicon.svg"-->
	<link rel="icon"
			href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='200' height='200' viewBox='0 0 100 100' style='display:block; margin:auto; padding: 0 0 1em 0;'%3E%3Cstyle%3E text %7B text-align: center; fill: white; text-anchor: middle; font-size: 11pt; %3C/style%3E%3Crect fill='hsl(000,50%25, 50%25)' x='0' y='0' width='100' height='100'%3E%3C/rect%3E%3C!--	%3Crect fill='hsl(200,50%25, 50%25)' x='0' y='0' width='100' height='100'%3E%3C/rect%3E--%3E%3Ctext x='50' y='75' style='font-size: 50pt;' id='t'%3E 🐍 %3C/text%3E%3C!--	%3Canimate--%3E%3C!-- xlink:href='%23t'--%3E%3C!-- attributeName='y'--%3E%3C!-- calcMode='spline'--%3E%3C!-- values='60; 90; 60'--%3E%3C!-- keyTimes='0; 0.5; 1'--%3E%3C!-- keySplines='--%3E%3C!-- .42 0 1 1;--%3E%3C!-- 0 0 .59 1;'--%3E%3C!-- dur='2s'--%3E%3C!-- fill='freeze'--%3E%3C!-- repeatCount='indefinite'/%3E--%3E%3C/svg%3E">
</head>
<body>
<div id="conteneur">
	<div id="side_nav_bar">
		<!--svg xmlns="http://www.w3.org/2000/svg" width="200" height="200" viewBox="0 0 100 100" style="display:block; margin:auto; padding: 0 0 1em 0;">
	<style>
		text {
			text-align: center;
			fill: white;
			text-anchor: middle;
			font-size: 11pt;
		}
	</style>
	<rect fill="#4B8BBE" x="0" y="0" width="100" height="100"></rect>
	<text x="50" y="45" style="font-size: 30pt;">
		🐍

	</text>
	<text x="50" y="75" fill="#FFE873">
		Algo et prog 2
	</text>
	<text x="50" y="90" fill="#FFE873">
		en Python
	</text>
</svg-->

<div style="color:#4B8BBE; font-size: 200%; padding: 2%; text-align: center">
	Algo. et prog. 2 en
</div>
<img src="img/python-logo-generic.png" alt="Logo de Python" style="width: 100%; max-width: 19em; display:block; margin:auto;">
<div style="text-align: center; opacity: 0.5; font-size: small">Arnaud COUTURIER - Python 3.10</div>


























		<div class=" h h1">
			<!--span class="ballot_box">☒</span-->
			<a href="index.html">
				Introduction
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">☒</span-->
			<a href="cm_spec_impl_versions.html">
				Spécification, implémentations et versions
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">☒</span-->
			<a href="cm_methodes_exec.html">
				Façons d'exécuter un programme Python
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">☒</span-->
			<a href="cm_memoire_donnees.html">
				Mémoire et modèle de données
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">☒</span-->
			<a href="cm_pass.html">
				L'instruction pass
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">☒</span-->
			<a href="cm_prog_objets.html">
				Programmation objets
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">☒</span-->
			<a href="cm_namespaces_modules.html">
				Namespaces et modules
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">☒</span-->
			<a href="cm_exceptions.html">
				Les exceptions
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">☒</span-->
			<a href="cm_sequences.html">
				Les séquences
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">☒</span-->
			<a href="cm_iterables.html">
				Iterables, iterators
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">☒</span-->
			<a href="cm_iterable_unpacking.html">
				Iterable unpacking
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">☒</span-->
			<a href="cm_boucles_avancees.html">
				Techniques avancées sur les boucles
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">☒</span-->
			<a href="cm_fonc_params.html">
				Fonctions et paramètres
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">☒</span-->
			<a href="cm_dict_set.html">
				Hash et dictionnaires
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">☒</span-->
			<a href="cm_compr_listes.html">
				Compréhension de listes et dictionnaires
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">☒</span-->
			<a href="cm_manip_fich_texte.html">
				Manipulation de fichiers texte
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">☒</span-->
			<a href="td1.html">
				✍️ TD 1 - Calculatrice niv.1 ✔️
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">☒</span-->
			<a href="tp1.html">
				✏️ TP 1 - Calculatrice niv.2 ✔️
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">☒</span-->
			<a href="td2.html">
				✍️ TD 2 - Prog. objets niv.1 ✔️
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">☒</span-->
			<a href="tp2.html">
				✏️ TP 2 - Calculatrice niv.3 ✔️
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">☒</span-->
			<a href="tp3.html">
				✏️ TP 3 - Calculatrice niv.4 ✔️
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">☒</span-->
			<a href="td3.html">
				✍️ TD 3
			</a>
		</div>

		<div class="page_actuelle h h1">
			<!--span class="ballot_box">☐</span-->
			<a href="tp4.html">
				✏️ TP 4 - Prog. objets niv.2 ✔️
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">☐</span-->
			<a href="tp5.html">
				✏️ TP 5 - Prog. objets niv.3 ✔️
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">☐</span-->
			<a href="cc1_2022.html">
				📝 Contrôle continu 1
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">☐</span-->
			<a href="tp6.html">
				✏️ TP 6 - Prog. objets niv.4
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">☐</span-->
			<a href="tp7.html">
				✏️ TP 7 - Prog. objets niv.5
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">☐</span-->
			<a href="tp_boutique_1.html">
				✏️ TP 8 - Boutique niv.1
			</a>
		</div>

	</div>
	<div id="contenu">
		


		
	<h1 data-nb="23" id="✏️ TP 4 - Prog. objets niv.2 ✔️">✏️ TP 4 - Prog. objets niv.2 ✔️</h1>
	

	<p>Ce TP est la suite directe du TD 2, la partie sur les personnages.</p>

	
	<div class="exercice">
<h2 data-nb="23.1" id="Question 1">Question 1</h2>
<p>Ajouter un attribut <code>points_de_vie</code> qui vaut 50 initialement pour tous les personnages.
		</p>
<p>La méthode <code>saluer</code> doit afficher "Bonjour, je suis &lt;nom&gt;. Ma vie est &lt;points_de_vie&gt;". Par exemple "Bonjour, je suis Toto. Ma
			vie est 50"</p>
<p>Exécuter votre programme et vérifier qu'il affiche bien le bon résultat, c'est à dire chacun dit bonjour avec un nom différent, et affiche la même
			vie.</p>
		
			<div class="correction">
<pre class="line-numbers"><code class="language-python">
					class Personnage:
						def __init__(self, nom_initial):
							self.nom = nom_initial
							# ↓ ajout de l'attribut "points_de_vie"
							self.points_de_vie = 50

						def saluer(self):
							# ↓ affichage des points de vie dans la salutation
							print("Bonjour, je suis", self.nom, ". Ma vie est", self.points_de_vie)

					perso1 = Personnage("Toto")
					perso2 = Personnage("Titi")

					perso1.saluer()
					perso2.saluer()
				</code></pre>
<pre class="affichage_console"><code>
Bonjour, je suis Toto . Ma vie est 50
Bonjour, je suis Titi . Ma vie est 50</code></pre>
</div>
		
	</div>

	
	<div class="exercice">
<h2 data-nb="23.2" id="Question 2">Question 2</h2>
<p>Ajouter une méthode <code>blesser</code>, qui prend en paramètre le nombre de points de dégâts, et les soustrait à la vie du personnage. Quand un
			personnage a une vie de zéro il est considéré mort, alors sa salutation devient "&lt;nom&gt; est mort", par exemple "Toto est mort".</p>
<p>Quand elle est exécutée, la méthode affiche dans la console "&lt;nom&gt; subit &lt;x&gt; dégâts", par exemple "Toto subit 10 dégâts".</p>
<p>Veiller à ce que:</p>
<ul>
<li>un personnage ne peut avoir une vie négative</li>
<li>un personnage ne peut se soigner par cette méthode</li>
</ul>
<p>Tenter de blesser un de vos personnages, avec comme dégâts 20, puis -20, puis 100, puis -200.</p>
		
			<div class="correction">
<pre class="line-numbers"><code class="language-python">
					class Personnage:
						def __init__(self, nom_initial):
							self.nom = nom_initial
							self.points_de_vie = 50

						def saluer(self):
							# ↓ Si le perso a des points de vie strictement positifs,
							# donc s'il est vivant:
							if self.points_de_vie &gt; 0:
								print("Bonjour, je suis", self.nom, "ma vie est", self.points_de_vie)
							else:
								# Sinon, il est mort.
								print(self.nom, "est mort")

						def blesser(self, points_de_dégâts):
							# Si les points de dégâts à infliger sont strictement positifs:
							if points_de_dégâts &gt; 0:
								# ↓ On retient la vie avant les dégats, pour l'affichage plus bas
								vie_avant_dégâts = self.points_de_vie
								# ↓ On applique les dégâts
								self.points_de_vie -= points_de_dégâts
								# Si la vie est devenue négative:
								if self.points_de_vie &lt; 0:
									# ↓ On ramène la vie à zéro
									self.points_de_vie = 0
									# ↓ On affiche les dégâts réels, qui sont la vie du perso
									# avant de subir les dégâts demandés
									print(self.nom, "subit", vie_avant_dégâts, "dégâts")
								else:
									# ↓ Cet affichage correspond au cas où la vie du perso est toujours &gt;0
									print(self.nom, "subit", points_de_dégâts, "dégâts")
							else:
								# Sinon, ici dans ce ce bloc "else",
								# ça veut dire que les points de vie sont négatifs ou égaux à zéro.
								print("Dégâts négatifs ou zéro interdits pour", self.nom,
									"(", points_de_dégâts, ")")

					perso = Personnage("Titi")

					perso.saluer()
					# ↓ On blesse Titi de 10 points
					perso.blesser(10)
					# ↓ On vérifie la vie de Titi a baissé de 10 points
					perso.saluer()
					# ↓ On essaye de blesser Titi de -10 points, ce qui doit être impossible
					perso.blesser(-10)
					# ↓ On vérifie que la vie de Titi n'a pas changé
					perso.saluer()
					# ↓ On tue Titi, on vérifie que le bon nombre de dégats sont infligés (40)
					perso.blesser(100)
					# ↓ On vérifie que Titi est mort
					perso.saluer()
				</code></pre>
<pre class="affichage_console"><code>
Bonjour, je suis Titi ma vie est 50
Titi subit 10 dégâts
Bonjour, je suis Titi ma vie est 40
Dégâts négatifs ou zéro interdits pour Titi ( -10 )
Bonjour, je suis Titi ma vie est 40
Titi subit 40 dégâts
Titi est mort</code></pre>
</div>
		
	</div>

	
	<div class="exercice">
<h2 data-nb="23.3" id="Question 3">Question 3</h2>
<p>Ajouter une méthode <code>soigner</code>, qui prend en paramètre le nombre de points de soin, et les ajoute à la vie du personnage.</p>
<p>Quand elle est exécutée, la méthode affiche dans la console "&lt;nom&gt; est soigné de &lt;x&gt; points", par exemple "Toto est soigné de 10
			points".</p>
<p>Veiller à ce que:</p>
<ul>
<li>un personnage mort (vie à zéro) ne peut plus être soigné</li>
<li>un personnage ne peut être blessé par cette méthode</li>
</ul>
<p>Tentez de soigner un de vos personnages, avec comme soins 20, puis -20, puis 100, puis -200.</p>
<p>Blessez un de vos personnages avec 100 points de dégâts, et tentez de le soigner de 100 points de vie.</p>
		
			<div class="correction">
<pre class="line-numbers"><code class="language-python">
					class Personnage:
						def __init__(self, nom_initial):
							self.nom = nom_initial
							self.points_de_vie = 50

						def saluer(self):
							if self.points_de_vie &gt; 0:
								print("Bonjour, je suis", self.nom, "ma vie est", self.points_de_vie)
							else:
								print(self.nom, "est mort")

						def soigner(self, points_de_soin):
							if self.points_de_vie &lt;= 0:
								print("Impossible de soigner un perso mort")
								# ↓ l'instruction return termine l'execution de la fonction immédiatement.
								# Si on ne specifie pas de valeur de retour, None est retourné par défaut.
								return
							if points_de_soin &lt;= 0:
								print("Soins négatifs, impossible")
								return
							self.points_de_vie += points_de_soin
							print(self.nom, "est soigné de", points_de_soin, "points")

						def blesser(self, points_de_dégâts):
							if points_de_dégâts &gt; 0:
								vie_avant_dégâts = self.points_de_vie
								self.points_de_vie -= points_de_dégâts
								if self.points_de_vie &lt; 0:
									self.points_de_vie = 0
									print(self.nom, "subit", vie_avant_dégâts, "dégâts")
								else:
									print(self.nom, "subit", points_de_dégâts, "dégâts")
							else:
								print("Dégâts négatifs ou zéro interdits pour", self.nom)


					perso1 = Personnage("Toto")
					perso1.saluer()
					# ↓ Toto aura 50 + 20 = 70 points de vie après cet appel
					perso1.soigner(20)
					# ↓ Normalement impossible, donc la vie de Toto ne devrait pas bouger
					perso1.soigner(-20)
					# ↓ Toto aura 70 + 100 = 170 points de vie après cet appel
					perso1.soigner(100)
					# ↓ Normalement impossible, donc la vie de Toto ne devrait pas bouger
					perso1.soigner(-200)
					perso1.saluer()

					perso2 = Personnage("Titi")
					perso2.saluer()
					# ↓ On tue Titi
					perso2.blesser(100)
					# ↓ Impossible de soigner et ressuciter Titi, il doit rester mort
					perso2.soigner(100)
					perso2.saluer()
				</code></pre>
<pre class="affichage_console"><code>
Bonjour, je suis Toto ma vie est 50
Toto est soigné de 20 points
Soins négatifs, impossible
Toto est soigné de 100 points
Soins négatifs, impossible
Bonjour, je suis Toto ma vie est 170
Bonjour, je suis Titi ma vie est 50
Titi subit 50 dégâts
Impossible de soigner un perso mort
Titi est mort</code></pre>
</div>
		
	</div>

	
	<div class="exercice">
<h2 data-nb="23.4" id="Question 4">Question 4</h2>
<p>Ajouter un attribut <code>points_de_vie_max</code>, dont la valeur initiale est spécifiée en paramètre dans le constructeur. Ainsi l'attribut <code>points_de_vie</code>
			est la vie actuelle du personnage, tandis que <code>points_de_vie_max</code> est la vie maximale du personnage. Le personnage doit avoir sa vie
			actuelle au maximum lors de sa création.</p>
<p>Afficher la vie max dans la salutation du personnage, sous la forme qui vous convient.</p>
<p>Veiller à ce qu'un personnage ne peut être soigné au-delà de sa vie maximale. Blessez un de vos personnages, sans le tuer, puis soignez-le
			<em>plus</em> qu'il n'a été blessé. Vérifiez qu'il est impossible de le soigner au-delà de sa vie maximale.</p>
		
			<div class="correction">
<pre class="line-numbers"><code class="language-python">
					class Personnage:
						# ↓ On a ajouté un paramètre (pv_max) au constructeur,
						# donc désormais il faudra spécifier la vie d'un perso au moment de sa création.
						def __init__(self, nom_initial, pv_max):
							self.nom = nom_initial
							# ↓ On créé et initialise les deux attributs à la même valeur
							self.points_de_vie = self.points_de_vie_max = pv_max

						def saluer(self):
							if self.points_de_vie &gt; 0:
								# ↓ On a ajouté l'affichage des points de vie max
								print("Bonjour, je suis", self.nom, "ma vie est", self.points_de_vie, "/", self.points_de_vie_max)
							else:
								print(self.nom, "est mort")

						def soigner(self, points_de_soin):
							if self.points_de_vie &lt;= 0:
								print("Impossible de soigner un perso mort")
								return
							if points_de_soin &lt;= 0:
								print("Soins négatifs, impossible")
								return
							# ↓ On vérifie dans le code ci-dessous qu'on ne dépasse jamais la vie max,
							# et que l'affichage indique uniquement les véritables soins effectués,
							# et pas juste les points de soin demandés.
							vie_avant_soins = self.points_de_vie
							soins_effectifs = points_de_soin
							self.points_de_vie += points_de_soin
							if self.points_de_vie &gt; self.points_de_vie_max:
								soins_effectifs = self.points_de_vie_max - vie_avant_soins
								self.points_de_vie = self.points_de_vie_max
							print(self.nom, "est soigné de", soins_effectifs, "points")

						def blesser(self, points_de_dégâts):
							if points_de_dégâts &gt; 0:
								vie_avant_dégâts = self.points_de_vie
								self.points_de_vie -= points_de_dégâts
								if self.points_de_vie &lt; 0:
									self.points_de_vie = 0
									print(self.nom, "subit", vie_avant_dégâts, "dégâts")
								else:
									print(self.nom, "subit", points_de_dégâts, "dégâts")
							else:
								print("Dégâts négatifs ou zéro interdits pour", self.nom)

					# ↓ On spécifie la vie maximum de Toto à 100, et il commence avec sa vie à 100 également
					perso1 = Personnage("Toto", 100)
					perso1.saluer()
					perso1.blesser(20)
					# ↓ Toto n'est soigné que de 20 points de vie au lieu de 40, pour ne pas dépasser sa vie max
					perso1.soigner(40)
					perso1.saluer()
				</code></pre>
<pre class="affichage_console"><code>
Bonjour, je suis Toto ma vie est 100 / 100
Toto subit 20 dégâts
Toto est soigné de 20 points
Bonjour, je suis Toto ma vie est 100 / 100</code></pre>
</div>
		
	</div>

	
	<div class="exercice">
<h2 data-nb="23.5" id="Question 5">Question 5</h2>
<p>Faire en sorte qu'un personnage puisse attaquer un autre. Pour cela ajouter la méthode <code>attaquer</code>, qui prend en paramètre le personnage
			cible. Chaque attaque d'un personnage provoque toujours 25 points de dégâts.</p>
<p>Lors d'une attaque, on veut lire dans la console un message qui dit que le personnage attaquant attaque le personnage cible pour 25 dégâts, par
			exemple "Toto attaque Titi pour 25 dégâts". Puis sur une seconde ligne on doit lire "Titi subit 25 dégâts".</p>
		
			<div class="correction">
<pre class="line-numbers"><code class="language-python">
					class Personnage:
						def __init__(self, nom_initial, pv_max):
							self.nom = nom_initial
							self.points_de_vie = self.points_de_vie_max = pv_max

						def saluer(self):
							if self.points_de_vie &gt; 0:
								print("Bonjour, je suis", self.nom, "ma vie est", self.points_de_vie, "/", self.points_de_vie_max)
							else:
								print(self.nom, "est mort")

						def soigner(self, points_de_soin):
							if self.points_de_vie &lt;= 0:
								print("Impossible de soigner un perso mort")
								return
							if points_de_soin &lt;= 0:
								print("Soins négatifs, impossible")
								return
							vie_avant_soins = self.points_de_vie
							soins_effectifs = points_de_soin
							self.points_de_vie += points_de_soin
							if self.points_de_vie &gt; self.points_de_vie_max:
								soins_effectifs = self.points_de_vie_max - vie_avant_soins
								self.points_de_vie = self.points_de_vie_max
							print(self.nom, "est soigné de", soins_effectifs, "points")

						def blesser(self, points_de_dégâts):
							if points_de_dégâts &gt; 0:
								vie_avant_dégâts = self.points_de_vie
								self.points_de_vie -= points_de_dégâts
								if self.points_de_vie &lt; 0:
									self.points_de_vie = 0
									print(self.nom, "subit", vie_avant_dégâts, "dégâts")
								else:
									print(self.nom, "subit", points_de_dégâts, "dégâts")
							else:
								print("Dégâts négatifs ou zéro interdits pour", self.nom)

						# ↓ Cette méthode a besoin d'un paramètre qu'on nomme par exemple perso_cible,
						# qui est le Personnage cible qui va subir l'attaque venant de l'objet représenté par self.
						def attaquer(self, perso_cible):
							print(self.nom, "attaque", perso_cible.nom)
							# ↓ On appelle la méthode blesser de l'objet cible, qu'on suppose être de type Personnage,
							# et on spécifie 25 points de dégâts comme demandé dans l'énoncé de la question.
							perso_cible.blesser(25)


					perso1 = Personnage("Toto", 100)
					perso2 = Personnage("Titi", 60)

					perso1.saluer()
					perso2.saluer()
					# ↓ Appel de la méthode attaquer: c'est perso1 qui attaque perso2
					perso1.attaquer(perso2)
					perso1.saluer()
					perso2.saluer()
				</code></pre>
<pre class="affichage_console"><code>
Bonjour, je suis Toto ma vie est 100 / 100
Bonjour, je suis Titi ma vie est 60 / 60
Toto attaque Titi
Titi subit 25 dégâts
Bonjour, je suis Toto ma vie est 100 / 100
Bonjour, je suis Titi ma vie est 35 / 60</code></pre>
</div>
		
	</div>


		<div class="nav_arrows" style=" margin-bottom: 1em;">

			<div style="text-align: center; opacity: 0.5; font-size: small">

			</div>
		</div>

	</div>

	
		<style>
			@media only screen and (min-width: 70em) {
				#side_nav_bar {
					width: 25vw;
				}

				#contenu {
					width: 75vw;
				}
			}
		</style>
	


</div>
  
<script src="prism.js"></script>

<script>
	if (document.URL.indexOf("localhost") === -1) {
		//console.log("pas localhost");
		document.querySelector("link[rel = 'icon']").setAttribute("href", "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='200' height='200' viewBox='0 0 100 100' style='display:block; margin:auto; padding: 0 0 1em 0;'%3E%3Cstyle%3E text %7B text-align: center; fill: white; text-anchor: middle; font-size: 11pt; %3C/style%3E%3C!--	%3Crect fill='hsl(000,50%25, 50%25)' x='0' y='0' width='100' height='100'%3E%3C/rect%3E--%3E%3Crect fill='hsl(200,50%25, 50%25)' x='0' y='0' width='100' height='100'%3E%3C/rect%3E%3Ctext x='50' y='75' style='font-size: 50pt;' id='t'%3E 🐍 %3C/text%3E%3C!--	%3Canimate--%3E%3C!-- xlink:href='%23t'--%3E%3C!-- attributeName='y'--%3E%3C!-- calcMode='spline'--%3E%3C!-- values='60; 90; 60'--%3E%3C!-- keyTimes='0; 0.5; 1'--%3E%3C!-- keySplines='--%3E%3C!-- .42 0 1 1;--%3E%3C!-- 0 0 .59 1;'--%3E%3C!-- dur='2s'--%3E%3C!-- fill='freeze'--%3E%3C!-- repeatCount='indefinite'/%3E--%3E%3C/svg%3E");
	} else {
		//console.log("localhost");
	}
	// On supprime la première ligne des <pre><code> qui est considérée toujours vide et inutile
	const codes = document.querySelectorAll('pre[class="affichage_console"] code');
	
	codes.forEach(function (el) {
		// Attention: modifier textContent ou innerText d'un élément détruit tous ses éléments enfant :(
		//el.textContent = el.textContent.replace(/^\n/, '');
		// On modifie donc le premie noeud texte uniquement
		el.childNodes[0].textContent = el.childNodes[0].textContent.replace(/^\n/, ''); // suppose que c'est un élément texte
	});

	// On ajoute un <br> avant et après chaque <pre>
	let pres = document.querySelectorAll('pre, .exercices div.noté');
	pres.forEach(function (el) {
		el.parentNode.insertBefore(document.createElement('div'), el);
		el.parentNode.insertBefore(document.createElement('div'), el.nextSibling);
	});

	// On ajoute 'Affichage' avant chaque affichage console
	pres = document.querySelectorAll('pre[class="affichage_console"]');
	pres.forEach(function (el) {
		const p = document.createElement('p');
		p.innerHTML = `<small>↓ Affichage dans la console (ou dans le shell, selon où vous lancez l'exécution)<mall>`;
		p.classList.add("légende_placée_en_haut");
		el.parentNode.insertBefore(p, el);
	});

	// Cacher corrections dans les TD / TP, et permettre de les afficher
	let divs_correction = document.querySelectorAll('div[class="correction"]');
	divs_correction.forEach(function (div) {
		div.classList.add("correction_hidden");
		const p = document.createElement('p');
		p.innerHTML = `<span class="correction_lien_à_cliquer">📝 Afficher / cacher correction ✓</span>`;
		p.onclick = function (evt) {
			div.classList.toggle("correction_hidden");
		};
		div.parentNode.insertBefore(p, div);
	});
</script>
</body>
</html>