<!DOCTYPE html>
<html lang="fr">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Programmation objets | Algo et prog 2 en Python</title>
	<link href="prism.css" rel="stylesheet"/>
	<link href="style.css" rel="stylesheet"/>
	<!--link rel="icon" href="img/favicon.svg"-->
	<link rel="icon"
			href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='200' height='200' viewBox='0 0 100 100' style='display:block; margin:auto; padding: 0 0 1em 0;'%3E%3Cstyle%3E text %7B text-align: center; fill: white; text-anchor: middle; font-size: 11pt; %3C/style%3E%3Crect fill='hsl(000,50%25, 50%25)' x='0' y='0' width='100' height='100'%3E%3C/rect%3E%3C!--	%3Crect fill='hsl(200,50%25, 50%25)' x='0' y='0' width='100' height='100'%3E%3C/rect%3E--%3E%3Ctext x='50' y='75' style='font-size: 50pt;' id='t'%3E üêç %3C/text%3E%3C!--	%3Canimate--%3E%3C!-- xlink:href='%23t'--%3E%3C!-- attributeName='y'--%3E%3C!-- calcMode='spline'--%3E%3C!-- values='60; 90; 60'--%3E%3C!-- keyTimes='0; 0.5; 1'--%3E%3C!-- keySplines='--%3E%3C!-- .42 0 1 1;--%3E%3C!-- 0 0 .59 1;'--%3E%3C!-- dur='2s'--%3E%3C!-- fill='freeze'--%3E%3C!-- repeatCount='indefinite'/%3E--%3E%3C/svg%3E">
</head>
<body>
<div id="conteneur">
	<div id="side_nav_bar">
		<!--svg xmlns="http://www.w3.org/2000/svg" width="200" height="200" viewBox="0 0 100 100" style="display:block; margin:auto; padding: 0 0 1em 0;">
	<style>
		text {
			text-align: center;
			fill: white;
			text-anchor: middle;
			font-size: 11pt;
		}
	</style>
	<rect fill="#4B8BBE" x="0" y="0" width="100" height="100"></rect>
	<text x="50" y="45" style="font-size: 30pt;">
		üêç

	</text>
	<text x="50" y="75" fill="#FFE873">
		Algo et prog 2
	</text>
	<text x="50" y="90" fill="#FFE873">
		en Python
	</text>
</svg-->

<div style="color:#4B8BBE; font-size: 200%; padding: 2%; text-align: center">
	Algo. et prog. 2 en
</div>
<img src="img/python-logo-generic.png" alt="Logo de Python" style="width: 100%; max-width: 19em; display:block; margin:auto;">
<div style="text-align: center; opacity: 0.5; font-size: small">Arnaud COUTURIER - Python 3.10</div>


























		<div class=" h h1">
			<!--span class="ballot_box">‚òí</span-->
			<a href="index.html">
				Introduction
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">‚òí</span-->
			<a href="cm_pass.html">
				L'instruction pass
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">‚òí</span-->
			<a href="cm_exceptions.html">
				Les exceptions
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">‚òí</span-->
			<a href="cm_spec_impl_versions.html">
				Sp√©cification, impl√©mentations et versions
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">‚òí</span-->
			<a href="cm_methodes_exec.html">
				Fa√ßons d'ex√©cuter un programme Python
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">‚òí</span-->
			<a href="cm_memoire_donnees.html">
				M√©moire et mod√®le de donn√©es
			</a>
		</div>

		<div class="page_actuelle h h1">
			<!--span class="ballot_box">‚òê</span-->
			<a href="cm_prog_objets.html">
				Programmation objets
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">‚òê</span-->
			<a href="cm_namespaces_modules.html">
				Namespaces et modules
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">‚òê</span-->
			<a href="td1.html">
				‚úçÔ∏è TD 1 - Calculatrice niv.1 ‚úîÔ∏è
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">‚òê</span-->
			<a href="tp1.html">
				‚úèÔ∏è TP 1 - Calculatrice niv.2
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">‚òê</span-->
			<a href="tp2.html">
				‚úèÔ∏è TP 2 - Calculatrice niv.3
			</a>
		</div>

	</div>
	<div id="contenu">
		


		
	
	<h1 data-nb="7" id="Programmation objets">Programmation objets</h1>

	
	
	
	
	

	<p>Nous avons vu qu'en Python <a href="cm_memoire_donnees.html">tout est objet</a> et que tout objet a forc√©ment un type qui d√©crit ses valeurs possibles.
		Voyons cela plus en d√©tail.</p>
<p>La "programmation orient√©e objet", qu'on abr√®gera par POO, va nous servir pour cr√©er de nouveaux types de donn√©es personnalis√©s. D'abord on d√©clarera nos
		types, on pourra ensuite cr√©er et utiliser des objets de ces types.</p>
<h2 data-nb="7.1" id="Vue d'ensemble">Vue d'ensemble</h2>
<img alt="" src="img/cm_prog_objets/mod√®les.png"/>
<p>En POO on utilise le terme "classe" pour d√©signer un type. Une classe est comme un mod√®le, un moule, qui contient le plan de chaque objet de ce type doit
		avoir. √Ä partir de ce mod√®le, qui devient alors un type √† part enti√®re, on peut ensuite cr√©er des objets de ce type, qu'on appelle alors "instances". On
		appelle "instanciation" ce processus de cr√©ation d'objets √† partir d'une classe, et c'est le "constructeur" de la classe qui permet l'instanciation.</p>
<p>Une classe est compos√©e de 3 parties (l'ordre n'a pas d'importance) dont il faut bien respecter le vocabulaire, et les nommer par leur nom exact:</p>
<ul>
<li>des "attributs" : les variables internes que chaque objet aura et qui le d√©criront</li>
<li>des "m√©thodes" : les fonctions chaque objet pourra utiliser et qui lui permettront d'agir sur lui-m√™me et / ou d'autres objets</li>
<li>un "constructeur" : une m√©thode (et donc une fonction) particuli√®re, qui sert √† produire des objets √† partir de la classe</li>
</ul>
<!--h3>R√©sum√© sch√©matique</h3>

	<img src="https://docs.google.com/drawings/d/e/2PACX-1vTP7slzFzZ_FZNVZPB32HmZLaX1nhCMsVd34ruOV2x5WctKnDzDtuqruPaIe7Xrx1SMOUHaBpCvx_mW/pub?w=722&h=805"
			alt="">
	<h3>Exemple sch√©matique</h3>
	<img src="https://docs.google.com/drawings/d/e/2PACX-1vQErg8TpLsG9IPCPLayEviBpoIyTamPx2PoZ-Dd8Xa9CsflcIsCjWinUdh3H0VH-m7xpQn13KFFdAFk/pub?w=572&h=635"
			alt=""-->
<p>Sch√©matiquement on a:</p>
<img alt="" src="img/cm_prog_objets/classe_et_objets.png"/>
<p>Prenons l'exemple d'une classe qui d√©crit une personne et √† partir de laquelle on peut cr√©er autant de personnes que n√©cessaire:</p>
<img alt="" src="img/cm_prog_objets/classe_personne.png"/>
<h2 data-nb="7.2" id="Classes">Classes</h2>
<p>Concr√®tement une classe est un nouveau type qu'on d√©clare. En Python cela s'√©crit:</p>
<pre><code class="language-python">
		# ‚Üì D√©clare une nouvelle classe.
		# Remarquez le M majuscule, le nom d'une classe commence par une majuscule
		class MonNouveauType:
			pass
	</code></pre>
<p>Cette classe ne fait rien de sp√©cial, mais elle existe. On d√©marre toujours en POO le nom d'une classe par une majuscule. C'est une convention. A part
		√ßa, son nom respecte les m√™mes r√®gles et limites que le nom des variables (pas d'espace, doit commencer par une lettre, pas de caract√®res autres que
		alpha-num√©riques et _). Maintenant on peut cr√©er des variables de ce type:</p>
<pre><code class="language-python">
		# Cr√©e une instance de la nouvelle classe
		ma_variable = MonNouveauType()
	</code></pre>
<p>On appelle la donn√©e vers laquelle pointe <code>ma_variable</code> un <strong>objet</strong>. Celui-ci est une <strong>instance</strong> de la classe
		<code>MonNouveauType</code>. On appelle aussi <strong>instanciation</strong> la cr√©ation d'un nouvel objet, du verbe <strong>instancier</strong>.
		Attention √† bien mettre les parenth√®ses <code>MonNouveauType()</code>, c'est comme √ßa qu'on appelle le constructeur, la classe s'appelle / s'execute /
		s'invoque comme une fonction, et sa valeur de retour est une nouvelle instance d'elle-m√™me. Une classe est comme un mod√®le √† partir duquel on cr√©√© des
		exemplaires sp√©cifiques d'elle. Une instance est un exemplaire pr√©cis et concret de la classe, qui suit le mod√®le, mais a ses valeurs propres pour
		chaque attribut que la classe d√©finit.</p>
<p>Voici ce que ce code donne dans le mod√®le de donn√©es de Python:</p>
<img alt="" src="img/cm_prog_objets/classe_simple_d√©taill√©e.png"/>
<p>Remarquez que la classe en elle-m√™me est un objet de type "type", qu'elle est r√©f√©renc√©e par une variable qui a le m√™me nom qu'elle, et que l'objet
		instanci√© est r√©f√©renc√© par une variable √©galement.</p>
<h2 data-nb="7.3" id="M√©thodes">M√©thodes</h2>
<p>Les instances de notre classe ne peuvent rien faire, car elle est vide pour l'instant. Donnons-leur quelque chose √† faire:</p>
<pre><code class="language-python">
		class MonNouveauType:
			def dire_bonjour(self):
				print("Bonjour")
	</code></pre>
<p>On vient de cr√©er une fonction <code>dire_bonjour</code> √† l'int√©rieur de la classe, qui prend un param√®tre au nom √©trange <code>self</code>, qui
		signifie "soi-m√™me" en anglais. Cette fonction est une <strong>m√©thode</strong>. Une m√©thode sert √† donner des actions possibles que nos objets pourront
		effectuer, sur eux-m√™mes et / ou sur d'autres donn√©es. Le param√®tre "self" peut √™tre techniquement nomm√© comme on veut mais on le nomme "self" par
		convention, ne le nommez jamais autrement, mais doit obligatoirement √™tre pr√©sent, et en tout premier param√®tre de toute m√©thode. "self" sera
		automatiquement renseign√© par Python au moment de l'ex√©cution de la m√©thode, et r√©f√©rencera l'objet sur lequel la m√©thode s'ex√©cute. Elle s'utilise de
		la fa√ßon suivante:</p>
<pre><code class="language-python">
		ma_variable = MonNouveauType()

		# Appel de la m√©thode "dire_bonjour" de variable "ma_variable"
		ma_variable.dire_bonjour()
	</code></pre>
<p>On a appel√© la m√©thode de l'objet <code>ma_variable</code>. Remarquez que le param√®tre <code>self</code> n'est pas sp√©cifi√©. Celui-ci est en fait la
		variable <code>ma_variable</code>, mais au moment de l'appel, on ne le pr√©cise pas, cela est fait automatiquement pour nous.</p>
<p>On peut passer d'autres param√®tres aux m√©thodes, et on peut √©galement utiliser le param√®tre <code>self</code> dans le corps de la m√©thode</p>
<pre><code class="language-python">
		class MonNouveauType:
			def dire_bonjour(self, message):
				print("self =", self)
				print(type(self))
				print("Bonjour", message)

		ma_variable = MonNouveauType()
		ma_variable.dire_bonjour("√† tous")
	</code></pre>
<pre class="affichage_console"><code>
self = &lt;__main__.MonNouveauType object at 0x000001D1ACFF02C8&gt;
&lt;class '__main__.MonNouveauType'&gt;
Bonjour √† tous</code></pre>
<p>On peut appeler des m√©thodes dans d'autres m√©thodes:</p>
<pre><code class="language-python">
		class MonNouveauType:

			def methodeA(self):
				print("M√©thode A ex√©cut√©e")

			def methodeB(self):
				print("M√©thode B ex√©cut√©e")
				self.methodeA()

		var1 = MonNouveauType()
		var1.methodeB()
	</code></pre>
<pre class="affichage_console"><code>
M√©thode B ex√©cut√©e
M√©thode A ex√©cut√©e</code></pre>
<h2 data-nb="7.4" id="Attributs et constructeur">Attributs et constructeur</h2>
<p>Chacun de nos objets, en plus de leurs m√©thodes, peuvent aussi avoir leurs propres donn√©es, qu'on appelle <strong>attributs</strong> ou <strong>variables
		d'instance</strong>. Celles-ci sont d√©clar√©es dans le <strong>constructeur</strong> de la classe:</p>
<pre><code class="language-python">
		class MonNouveauType:
			def __init__(self):
				self.un_attribut = "Salut"

			def dire_bonjour(self, message):
				print("self =", self)
				print(type(self))
				print("Bonjour", message)

		ma_variable = MonNouveauType()

		# On peut lire les attributs d'un objet
		print(ma_variable.un_attribut) # Affiche "Salut"

		# On peut aussi les modifier
		ma_variable.un_attribut = "Coucou"
	</code></pre>
<p>Le constructeur est unique dans chaque classe, c'est une m√©thode particuli√®re qui a le nom <code>__init__</code> (double <code>_</code> de chaque c√¥t√©),
		qui prend aussi <code>self</code> en param√®tre. Cette m√©thode est appel√©e √† chaque fois qu'on cr√©e une nouvelle instance, elle sert √† l'initialiser. En
		particulier, c'est dans le constructeur qu'on donne √† l'objet ses attributs, qui sont des variables qui lui sont propres, attach√©es.</p>
<p>Le constructeur peut prendre d'autres param√®tres que <code>self</code>, ce qui permet de configurer chaque objet au moment de leur cr√©ation:</p>
<pre><code class="language-python">
		class MonNouveauType:

			# Un constructeur peut avoir des param√®tres autres que self
			def __init__(self, un_pr√©nom):
				self.pr√©nom = un_pr√©nom

			def dire_bonjour(self, message):
				# On peut lire (et modifier) les attributs dans les m√©thodes
				print("Bonjour", message, "! Je m'appelle", self.pr√©nom)

		var1 = MonNouveauType("Toto")
		var2 = MonNouveauType("Adrien")

		var1.dire_bonjour("√† tous")
		var2.dire_bonjour("tout le monde")
	</code></pre>
<pre class="affichage_console"><code>
Bonjour √† tous ! Je m'appelle Toto
Bonjour tout le monde ! Je m'appelle Adrien</code></pre>
<h2 data-nb="7.5" id="Exemple">Exemple</h2>
<pre><code class="language-python">
		# On cr√©√© une classe pour d√©crire des personnages dans un jeu.
		class Personnage:

			# Le constructeur, on devra fournir le nom initial de chaque nouveau perso.
			def __init__(self, nom_initial):
				# Cr√©ation de l'attribut "nom".
				self.nom = nom_initial
				# Cr√©ation de l'attribut "points_vie".
				self.points_vie = 100

			# M√©thode pour qu'un perso puisse s'afficher facilement dans la console
			def afficher(self):
				print("Nom perso=", self.nom, "PV:", self.points_vie)

			# M√©thode pour qu'un perso puisse attaquer un autre
			def attaquer_perso(self, perso_cible):
				perso_cible.points_vie -= 10

		# ‚Üì Instanciation de diff√©rents persos,
		# ‚Üì et appels de certaines de leurs m√©thodes.

		joueur = Personnage("Ulysse")
		joueur.afficher()

		ennemi = Personnage("Cyclope")
		ennemi.afficher()
		joueur.attaquer_perso(ennemi)
		ennemi.afficher()

		marchand = Personnage("Marchand")
		marchand.afficher()
		ennemi.attaquer_perso(marchand)
		marchand.afficher()

		boss = Personnage("Big guy")
		boss.afficher()
	</code></pre>
<!--h3>H√©ritage</h3>
	<p>Une classe peut √™tre construite √† partir d'une autre, on dit qu'elle <strong>h√©rite</strong> de cette autre classe. On dit aussi que c'est une <strong>classe
		enfant</strong> ou <strong>sous-classe</strong> de la <strong>classe m√®re</strong> ou <strong>classe parent</strong>. La classe enfant poss√®de toutes
		les m√©thodes, et tous les attributs de la classe parents, et peut les modifier et en d√©finir de nouveaux pour elle-m√™me.</p>
	<p> Nous ne verrons pas cela plus en d√©tail, mais il faut comprendre un minimum cette notion d'h√©ritage pour pouvoir utiliser les exceptions.</p-->
<!--h2>Les exceptions</h2>
	<p>Vous avez d√©j√† vu les exceptions. Quand on ex√©cute une action qui peut renvoyer une exception, si on veut pouvoir g√©rer le cas o√π cela se produit, on √©crit un bloc
	<code>try ... except ... finally</code></p>
	<pre><code class="language-python">
		class MonNouveauType:

			# Un constructeur peut avoir des param√®tres autres que self
			def __init__(self, un_pr√©nom):
				self.pr√©nom = un_pr√©nom

			def dire_bonjour(self, message):
				# On peut lire (et modifier) les attributs dans les m√©thodes
				print("Bonjour", message, "! Je m'appelle", self.pr√©nom)

		var1 = MonNouveauType("Toto")
		var2 = MonNouveauType("Adrien")

		var1.dire_bonjour("√† tous")
		var2.dire_bonjour("tout le monde")
	</code></pre-->


		<div class="nav_arrows" style=" margin-bottom: 1em;">

			<div style="text-align: center; opacity: 0.5; font-size: small">

			</div>
		</div>

	</div>

	
		<style>
			@media only screen and (min-width: 70em) {
				#side_nav_bar {
					width: 25vw;
				}

				#contenu {
					width: 75vw;
				}
			}
		</style>
	


</div>
  
<script src="prism.js"></script>

<script>
	if (document.URL.indexOf("localhost") === -1) {
		//console.log("pas localhost");
		document.querySelector("link[rel = 'icon']").setAttribute("href", "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='200' height='200' viewBox='0 0 100 100' style='display:block; margin:auto; padding: 0 0 1em 0;'%3E%3Cstyle%3E text %7B text-align: center; fill: white; text-anchor: middle; font-size: 11pt; %3C/style%3E%3C!--	%3Crect fill='hsl(000,50%25, 50%25)' x='0' y='0' width='100' height='100'%3E%3C/rect%3E--%3E%3Crect fill='hsl(200,50%25, 50%25)' x='0' y='0' width='100' height='100'%3E%3C/rect%3E%3Ctext x='50' y='75' style='font-size: 50pt;' id='t'%3E üêç %3C/text%3E%3C!--	%3Canimate--%3E%3C!-- xlink:href='%23t'--%3E%3C!-- attributeName='y'--%3E%3C!-- calcMode='spline'--%3E%3C!-- values='60; 90; 60'--%3E%3C!-- keyTimes='0; 0.5; 1'--%3E%3C!-- keySplines='--%3E%3C!-- .42 0 1 1;--%3E%3C!-- 0 0 .59 1;'--%3E%3C!-- dur='2s'--%3E%3C!-- fill='freeze'--%3E%3C!-- repeatCount='indefinite'/%3E--%3E%3C/svg%3E");
	} else {
		//console.log("localhost");
	}
	// On supprime la premi√®re ligne des <pre><code> qui est consid√©r√©e toujours vide et inutile
	const codes = document.querySelectorAll('pre[class="affichage_console"] code');
	
	codes.forEach(function (el) {
		// Attention: modifier textContent ou innerText d'un √©l√©ment d√©truit tous ses √©l√©ments enfant :(
		//el.textContent = el.textContent.replace(/^\n/, '');
		// On modifie donc le premie noeud texte uniquement
		el.childNodes[0].textContent = el.childNodes[0].textContent.replace(/^\n/, ''); // suppose que c'est un √©l√©ment texte
	});

	// On ajoute un <br> avant et apr√®s chaque <pre>
	let pres = document.querySelectorAll('pre, .exercices div.not√©');
	pres.forEach(function (el) {
		el.parentNode.insertBefore(document.createElement('div'), el);
		el.parentNode.insertBefore(document.createElement('div'), el.nextSibling);
	});

	// On ajoute 'Affichage' avant chaque affichage console
	pres = document.querySelectorAll('pre[class="affichage_console"]');
	pres.forEach(function (el) {
		const p = document.createElement('p');
		p.innerHTML = `<small>‚Üì Affichage dans la console (ou dans le shell, selon o√π vous lancez l'ex√©cution)<mall>`;
		p.classList.add("l√©gende_plac√©e_en_haut");
		el.parentNode.insertBefore(p, el);
	});

	// Cacher corrections dans les TD / TP, et permettre de les afficher
	let divs_correction = document.querySelectorAll('div[class="correction"]');
	divs_correction.forEach(function (div) {
		div.classList.add("correction_hidden");
		const p = document.createElement('p');
		p.innerHTML = `<span class="correction_lien_√†_cliquer">üìù Afficher / cacher correction ‚úì</span>`;
		p.onclick = function (evt) {
			div.classList.toggle("correction_hidden");
		};
		div.parentNode.insertBefore(p, div);
	});
</script>
</body>
</html>