<!DOCTYPE html>
<html lang="fr">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>âœï¸ TP 8 - Boutique niv.1 âœ”ï¸ | Algo et prog 2 en Python</title>
	<link href="prism.css" rel="stylesheet"/>
	<link href="style.css" rel="stylesheet"/>
	<!--link rel="icon" href="img/favicon.svg"-->
	<link rel="icon"
			href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='200' height='200' viewBox='0 0 100 100' style='display:block; margin:auto; padding: 0 0 1em 0;'%3E%3Cstyle%3E text %7B text-align: center; fill: white; text-anchor: middle; font-size: 11pt; %3C/style%3E%3Crect fill='hsl(000,50%25, 50%25)' x='0' y='0' width='100' height='100'%3E%3C/rect%3E%3C!--	%3Crect fill='hsl(200,50%25, 50%25)' x='0' y='0' width='100' height='100'%3E%3C/rect%3E--%3E%3Ctext x='50' y='75' style='font-size: 50pt;' id='t'%3E ğŸ %3C/text%3E%3C!--	%3Canimate--%3E%3C!-- xlink:href='%23t'--%3E%3C!-- attributeName='y'--%3E%3C!-- calcMode='spline'--%3E%3C!-- values='60; 90; 60'--%3E%3C!-- keyTimes='0; 0.5; 1'--%3E%3C!-- keySplines='--%3E%3C!-- .42 0 1 1;--%3E%3C!-- 0 0 .59 1;'--%3E%3C!-- dur='2s'--%3E%3C!-- fill='freeze'--%3E%3C!-- repeatCount='indefinite'/%3E--%3E%3C/svg%3E">
</head>
<body>
<div id="conteneur">
	<div id="side_nav_bar">
		<!--svg xmlns="http://www.w3.org/2000/svg" width="200" height="200" viewBox="0 0 100 100" style="display:block; margin:auto; padding: 0 0 1em 0;">
	<style>
		text {
			text-align: center;
			fill: white;
			text-anchor: middle;
			font-size: 11pt;
		}
	</style>
	<rect fill="#4B8BBE" x="0" y="0" width="100" height="100"></rect>
	<text x="50" y="45" style="font-size: 30pt;">
		ğŸ

	</text>
	<text x="50" y="75" fill="#FFE873">
		Algo et prog 2
	</text>
	<text x="50" y="90" fill="#FFE873">
		en Python
	</text>
</svg-->

<div style="color:#4B8BBE; font-size: 200%; padding: 2%; text-align: center">
	Algo. et prog. 2 en
</div>
<img src="img/python-logo-generic.png" alt="Logo de Python" style="width: 100%; max-width: 19em; display:block; margin:auto;">
<div style="text-align: center; opacity: 0.5; font-size: small">Arnaud COUTURIER - Python 3.10</div>


























		<div class=" h h1">
			<!--span class="ballot_box">â˜’</span-->
			<a href="index.html">
				Introduction
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">â˜’</span-->
			<a href="cm_exceptions.html">
				Les exceptions
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">â˜’</span-->
			<a href="cm_spec_impl_versions.html">
				SpÃ©cification, implÃ©mentations et versions
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">â˜’</span-->
			<a href="cm_methodes_exec.html">
				FaÃ§ons d'exÃ©cuter un programme Python
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">â˜’</span-->
			<a href="cm_memoire_donnees.html">
				MÃ©moire et modÃ¨le de donnÃ©es
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">â˜’</span-->
			<a href="cm_pass.html">
				L'instruction pass
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">â˜’</span-->
			<a href="cm_prog_objets.html">
				Programmation objets
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">â˜’</span-->
			<a href="cm_namespaces_modules.html">
				Namespaces et modules
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">â˜’</span-->
			<a href="cm_sequences.html">
				Les sÃ©quences
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">â˜’</span-->
			<a href="cm_iterables.html">
				Iterables, iterators
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">â˜’</span-->
			<a href="cm_iterable_unpacking.html">
				Iterable unpacking
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">â˜’</span-->
			<a href="cm_boucles_avancees.html">
				Techniques avancÃ©es sur les boucles
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">â˜’</span-->
			<a href="cm_fonc_params.html">
				Fonctions et paramÃ¨tres
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">â˜’</span-->
			<a href="cm_dict_set.html">
				Hash et dictionnaires
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">â˜’</span-->
			<a href="cm_compr_listes.html">
				ComprÃ©hension de listes
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">â˜’</span-->
			<a href="cm_manip_fich_texte.html">
				Manipulation de fichiers texte
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">â˜’</span-->
			<a href="td1.html">
				âœï¸ TD 1 - Calculatrice niv.1 âœ”ï¸
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">â˜’</span-->
			<a href="tp1.html">
				âœï¸ TP 1 - Calculatrice niv.2 âœ”ï¸
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">â˜’</span-->
			<a href="td2.html">
				âœï¸ TD 2 - Prog. objets niv.1 âœ”ï¸
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">â˜’</span-->
			<a href="tp2.html">
				âœï¸ TP 2 - Calculatrice niv.3 âœ”ï¸
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">â˜’</span-->
			<a href="tp3.html">
				âœï¸ TP 3 - Calculatrice niv.4 âœ”ï¸
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">â˜’</span-->
			<a href="td3.html">
				âœï¸ TD 3 âœ”ï¸
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">â˜’</span-->
			<a href="tp4.html">
				âœï¸ TP 4 - Prog. objets niv.2 âœ”ï¸
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">â˜’</span-->
			<a href="tp5.html">
				âœï¸ TP 5 - Prog. objets niv.3 âœ”ï¸
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">â˜’</span-->
			<a href="cc1_2022.html">
				ğŸ“ ContrÃ´le continu 1 âœ”ï¸
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">â˜’</span-->
			<a href="tp6.html">
				âœï¸ TP 6 - Prog. objets niv.4 âœ”ï¸
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">â˜’</span-->
			<a href="tp7.html">
				âœï¸ TP 7 - Prog. objets niv.5 âœ”ï¸
			</a>
		</div>

		<div class="page_actuelle h h1">
			<!--span class="ballot_box">â˜</span-->
			<a href="tp_boutique_1.html">
				âœï¸ TP 8 - Boutique niv.1 âœ”ï¸
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">â˜</span-->
			<a href="tp_boutique_2.html">
				âœï¸ TP 9 - Boutique niv.2 âœ”ï¸
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">â˜</span-->
			<a href="tp_pendu_1.html">
				âœï¸ TP 10 - Jeu du pendu niv.1 âœ”ï¸
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">â˜</span-->
			<a href="tp_pendu_2.html">
				âœï¸ TP 11 - Jeu du pendu niv.2 âœ”ï¸
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">â˜</span-->
			<a href="cc2_2022_taches.html">
				ğŸ“ ContrÃ´le continu 2 âœ”ï¸
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">â˜</span-->
			<a href="tp_pendu_3.html">
				âœï¸ TP 12 - Jeu du pendu niv.3 âœ”ï¸
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">â˜</span-->
			<a href="cc3_2022_etudiants.html">
				ğŸ“ ContrÃ´le continu 3 âœ”ï¸
			</a>
		</div>

	</div>
	<div id="contenu">
		


		
	<h1 data-nb="28" id="âœï¸ TP 8 - Boutique niv.1 âœ”ï¸">âœï¸ TP 8 - Boutique niv.1 âœ”ï¸</h1>
	

	<p>Dans ce TP on va s'entraÃ®ner sur les dictionnaires en Python.</p>
<div class="exercice">
<p>On va crÃ©er une petite application de boutique en ligne pour un marchÃ©. Voici le rÃ©sultat final qu'on souhaite avoir:</p>
<video controls="" preload="none" src="img/boutique/exo2_crf30.mp4"></video>
<p>L'application prend aussi en charge les erreurs suivantes:</p>
<ol>
<li><p>Ajout d'un article dans le panier: code de produit inexistant â†“</p>
<video controls="" preload="none" src="img/boutique/exo2_erreur_ajout_code_crf30.mp4"></video>
</li>
<li><p>Ajout d'un article dans le panier: quantitÃ© de produit insuffisante (&lt;= 0) â†“</p>
<video controls="" preload="none" src="img/boutique/exo2_erreur_ajout_quantite_insufisante_crf30.mp4"></video>
</li>
<li><p>Ajout d'un article dans le panier: quantitÃ© de produit pas un nombre entier (exception de type <code>ValueError</code> lors de la conversion
				en <code>int</code>) â†“ </p>
<video controls="" preload="none" src="img/boutique/exo2_erreur_ajout_quantite_pas_entier_crf30.mp4"></video>
</li>
<li><p>Ajout d'un article dans le panier: argent insuffisant â†“</p>
<video controls="" preload="none" src="img/boutique/exo2_erreur_ajout_argent_insuffisant_crf30.mp4"></video>
</li>
<li><p>Suppression d'un article du panier: code de produit inexistant dans le panier â†“</p>
<video controls="" preload="none" src="img/boutique/exo2_erreur_suppression_code_crf30.mp4"></video>
</li>
</ol>
<p>Remarquez que les erreurs:</p>
<ol>
<li>sont affichÃ©es en jaune</li>
<li>commencent toujours par le symbole âš </li>
<li>font une pause de 2 secondes avant de laisser le programme se poursuivre</li>
</ol>
<p>Remarquez aussi que les messages de confirmation sont:</p>
<ol>
<li>en vert</li>
<li>commencent toujours par le symbole âœ“</li>
<li>ne provoquent pas de pause</li>
</ol>
<p>On peut mettre dans notre code Python et afficher des Ã©moticones (appelÃ©s aussi <em>Ã©mojis</em>). Vous aurez besoin des caractÃ¨res unicodes suivants
			(copiez-collez dans votre code): ğŸ‘©â€ğŸŒ¾ ğŸ ğŸ ğŸŠ ğŸ‘©â€ğŸ³ ğŸ© ğŸª ğŸ° ğŸ§”âš“ ğŸ¦€ ğŸ¦ ğŸŸ ğŸª ğŸ’° ğŸ›’. Vous pouvez aussi utilisez ceux que vous voulez (pour une
			boutique avec des produits et vendeurs de votre choix) en visitant certains sites (<a href="https://getemoji.com/">comme celui-ci</a>) qui listent
			tous les Ã©mojis existants.</p>
<p>Vous pouvez aborder cet exercice diffÃ©remment selon votre niveau ou le challenge que vous souhaitez.</p>
<h3 data-nb="28.0.1" id="DifficultÃ© Ã©levÃ©e">DifficultÃ© Ã©levÃ©e</h3>
<p>Faites tout l'exercice comme vous le souhaitez, sans suivre aucune indication de ma part. Tant qu'il fonctionne exactement comme dans les exemples,
			Ã§a sera considÃ©rÃ© correct. Vous avez en bas de cette page les explications pour avoir de la couleur dans la console.</p>
<h3 data-nb="28.0.2" id="DifficultÃ© normale">DifficultÃ© normale</h3>
<p>Je vous donne des instructions pas Ã  pas. Ma version fait 200 lignes, cela vous donne une idÃ©e de la longueur du programme final.</p>
<ol>
<li>Commencez par dÃ©clarer les vendeurs dans une variable globale de type dictionnaire. Chaque vendeur est identifiÃ© dans le dict par son prÃ©nom, et
				a les informations suivantes associÃ©es: un portrait (str), un mÃ©tier (str), et des produits (dict). Chaque produit d'un vendeur est identifiÃ©
				par un code, et a les informations suivantes associÃ©es: un nom complet (str), un prix Ã  l'unitÃ© (int ou float), et une icÃ´ne (str).
			</li>
<li><p>Ecrivez une fonction, qui ne prend aucun paramÃ¨tre, qui ne retourne aucun rÃ©sulat, qui sait afficher la boutique comme dans la vidÃ©o
				d'exemple, c'est Ã  dire la liste des produits pour chaque vendeur, avec toutes les infos nÃ©cessaires proprement affichÃ©es. Restez gÃ©nÃ©rique,
				votre fonction doit fonctionner peu importe le nombre de vendeurs et de produits par vendeurs.</p>
<p>Testez votre fonction</p>
</li>
<li>DÃ©clarez une variable globale pour le panier du client (dict) vide pour commencer, ainsi que pour son argent (int ou float). Donnez une somme de
				dÃ©part au client (5000 par exemple). Dans le dictionnaire du panier, on aura les codes des produits comme clÃ©s, uniquement pour les produits qui
				sont dans le panier. Et pour les valeurs associÃ©es aux clÃ©s, on aura 2 informations: la quantitÃ© du produit en question identifiÃ© par la clÃ©
				(int), et l'objet produit original, le mÃªme exactement que ceux dÃ©clarÃ©s et stockÃ©s dans la liste des vendeurs et produits. Ainsi, depuis le
				panier, pour chaque code de produit, vous aurez accÃ¨s Ã  la fois Ã  la quantitÃ© du produit, et au produit original, duquel vous pourez obtenir des
				infos utiles pour l'affichage, comme le nom, le prix, et l'icÃ´ne du produit.
			</li>
<li><p>Ecrivez et testez les fonctions suivantes:</p>
<ol>
<li><p>Une fonction qui sait retrouver un produit dans le dict des vendeurs, Ã  partir d'un code donnÃ© en paramÃ¨tre (str). Elle retourne
						l'objet produit en lui-mÃªme, c'est Ã  dire un objet de type dict (Ã©tant donnÃ© que chaque produit dans la liste des vendeurs est un dict
						identifiÃ© par un code de type str).</p>
</li>
<li><p>Une fonction qui sait ajouter une certaine quantitÃ© d'un article dans le panier. Elle prend deux paramÃ¨tres: le code du produit Ã 
						ajouter (str), et la quantitÃ© (int). Elle met aussi Ã  jour l'argent, en enlevant la bonne somme du total d'argent dont dispose le
						client!! Elle fait ce qu'il faut et retourne 0 si tout s'est bien passÃ©. Elle ne fait rien et retourne 1 si le produit spÃ©cifiÃ© n'existe
						pas, 2 s'il n'y a pas assez d'argent, 3 si quantitÃ© est 0 ou nÃ©gatif.</p></li>
<li><p>Une fonction qui sait supprimer un article du panier du client, Ã  partir du code du produit passÃ© en paramÃ¨tre (str). LÃ  encore, elle
						met bien Ã  jour l'argent, en rajoutant la bonne somme au total d'argent dont dispose le client!! Elle fait ce qu'il faut et retourne 0
						si tout s'est bien passÃ©. Elle ne fait rien et retourne 1 si le panier ne contient pas le produit spÃ©cifiÃ©.</p></li>
<li><p>Une fonction qui sait afficher le panier du client et son argent disponible, comme dans la vidÃ©o d'exemple. Aucun paramÃ¨tre, aucune
						valeur de retour.</p>
</li>
<li><p>Une fonction qui sait afficher un message d'erreur comme dans la vidÃ©o d'exemple. Un seul paramÃ¨tre, le message (str). Aucune valeur
						de retour.</p>
</li>
<li><p>Une fonction qui sait afficher un message de confirmation comme dans la vidÃ©o d'exemple. Un seul paramÃ¨tre, le message (str). Aucune
						valeur de retour.</p>
</li>
</ol>
</li>
<li><p>Dans une boucle, vous devez:</p>
<ol>
<li>afficher la boutique, le panier, les actions possibles</li>
<li>demander au client ce qu'il / elle souhaite faire</li>
<li>dÃ©clencher la bonne action selon son choix, et afficher les bons messages de confirmation et d'erreurs</li>
<li>si le client souhaite quitter, vous devez stopper la boucle d'une maniÃ¨re ou d'une autre</li>
</ol>
</li>
</ol>
<p>Quelques indices:</p>
<ul>
<li>Pour faire une pause d'un certain nombre de secondes lors de l'exÃ©cution de votre programme, vous pouvez utiliser une fonction du module <a href="https://docs.python.org/fr/3/library/time.html">time</a>. Trouvez la fonction qu'il vous faut dans ce module.
			</li>
<li>On utilise principalement les <code>dict</code> pour stocker les informations nÃ©cessaires.</li>
<li>Dans le cours est expliquÃ© comment de l'intÃ©rieur des fonctions on peut manipuler les variables globales, vous en aurez besoin.</li>
<li>Vous aurez besoin de savoir utiliser les couleurs dans la console (voir plus bas).</li>
<li>Vous devez bien nommer vos variables et vos fonctions, afin qu'elles soit explicites, sinon vous vous perdrez dans votre propre code. Il vaut
				mieux des identifiants longs maix explicites, que courts mais obscurs.
			</li>
<li>Pareil pour nommer les clÃ©s dans vos dictionnaires, sinon vous vous perdrez dans votre propre code.</li>
<li>Construisez votre programme petite Ã©tape par petite Ã©tape. Ecrivez un peu de code, et testez-le sans trop attendre. N'hÃ©sitez pas non plus Ã 
				mettre le programme dans des Ã©tats intermÃ©diaires lorsque vous le dÃ©veloppez, pour ne pas perdre du temps. Par exemple, ajoutez quelques
				produits dans le panier du client, en appelant vos fonctions. Ainsi vous verrez dÃ¨s le dÃ©part si vos fonctions fonctionnent bien.
			</li>
</ul>

		
			<div class="correction">
<pre class="line-numbers"><code class="language-python">
					# Pour la console originale Windows uniquement, inutile pour le Terminal de Windows
					# import os
					# os.system("color")

					import time

					vendeurs = {
						'Susie': {
							'portrait': "ğŸ‘©â€ğŸŒ¾",
							'mÃ©tier': 'Agricultrice',
							'produits': {
								'pom': {
									"nom": 'Pommes import NZ',
									"francs Ã  l'unitÃ©": 50,
									'icone': "ğŸ",
								},
								'poi': {
									"nom": 'Poires import NZ',
									"francs Ã  l'unitÃ©": 70,
									'icone': "ğŸ",
								},
								'ora': {
									"nom": 'Oranges locales',
									"francs Ã  l'unitÃ©": 110,
									'icone': "ğŸŠ",
								}
							}
						},
						'Julie': {
							'portrait': "ğŸ‘©â€ğŸ³",
							'mÃ©tier': 'PÃ¢tissiÃ¨re',
							'produits': {
								'd': {
									"nom": 'Donuts sauce choco',
									"francs Ã  l'unitÃ©": 150,
									'icone': "ğŸ©",
								},
								'c': {
									"nom": 'Cookies aux pÃ©pites de chocolat',
									"francs Ã  l'unitÃ©": 200,
									'icone': "ğŸª",
								},
								'g': {
									"nom": 'Parts de gateau crÃ¨me fraÃ®che',
									"francs Ã  l'unitÃ©": 170,
									'icone': "ğŸ°",
								}
							}
						},
						'Thomas': {
							'portrait': "ğŸ§”âš“",
							'mÃ©tier': 'PÃªcheur',
							'produits': {
								'cra': {
									"nom": 'Crabes de mangrove',
									"francs Ã  l'unitÃ©": 700,
									'icone': "ğŸ¦€",
								},
								'cre': {
									"nom": 'Crevettes moyennes',
									"francs Ã  l'unitÃ©": 150,
									'icone': "ğŸ¦",
								},
								'bec': {
									"nom": 'Becs de canne',
									"francs Ã  l'unitÃ©": 450,
									'icone': "ğŸŸ",
								}
							}
						},
					}


					def afficher_produits():
						print('Bienvenue au marchÃ© ğŸª, voici nos vendeurs:')
						# print()
						for nom_vendeur, description_vendeur in vendeurs.items():
							print(description_vendeur['portrait'] + '  ' + nom_vendeur + ' (' + description_vendeur['mÃ©tier'] + ') vend:')
							for code_produit, description_produit in description_vendeur['produits'].items():
								desc_produit_str = '\t' + description_produit['icone'] + '  ' + description_produit['nom']
								desc_produit_str += ' (code: ' + code_produit + '), ' + str(description_produit["francs Ã  l'unitÃ©"]) + ' F/unitÃ©'
								print(desc_produit_str)


					panier_client = {}


					def retrouver_produit(code_produit_Ã _retrouver):
						for nom_vendeur, vendeur in vendeurs.items():
							for code_produit, produit in vendeur["produits"].items():
								if code_produit == code_produit_Ã _retrouver:
									return produit


					argent = 5000


					# retourne 0 si tout s'est bien passÃ©, 1 si le produit spÃ©cifiÃ© n'existe pas, 2 s'il n'y a pas assez d'argent, 3 si quantitÃ© est 0 ou nÃ©gatif
					def ajouter_articles_dans_panier(code_produit_Ã _ajouter, quantitÃ©):
						if quantitÃ© &lt;= 0:
							return 3

						produit_Ã _ajouter = retrouver_produit(code_produit_Ã _ajouter)
						if not produit_Ã _ajouter:
							return 1

						global argent
						prix_produit = produit_Ã _ajouter["francs Ã  l'unitÃ©"] * quantitÃ©
						if prix_produit &gt; argent:
							return 2

						argent -= prix_produit

						if code_produit_Ã _ajouter not in panier_client:
							panier_client[code_produit_Ã _ajouter] = {
								'produit': produit_Ã _ajouter,
								'quantitÃ©': quantitÃ©
							}
						else:
							panier_client[code_produit_Ã _ajouter]['quantitÃ©'] += quantitÃ©

						return 0


					# retourne 0 si tout s'est bien passÃ©, 1 si le panier ne contient pas le produit spÃ©cifiÃ©
					def supprimer_produit_du_panier(code_produit_Ã _supprimer):
						if code_produit_Ã _supprimer not in panier_client:
							return 1

						argent_rÃ©cupÃ©rÃ© = panier_client[code_produit_Ã _supprimer]["produit"]["francs Ã  l'unitÃ©"] * panier_client[code_produit_Ã _supprimer]["quantitÃ©"]
						global argent
						argent += argent_rÃ©cupÃ©rÃ©
						del panier_client[code_produit_Ã _supprimer]

						return 0


					def afficher_panier():
						print('\x1b[38;2;255;255;100;48;2;100;100;100m'"ğŸ’° Vous disposez de:", str(argent), 'F', '\x1b[0m')
						if len(panier_client) == 0:
							print("ğŸ›’ Votre panier est vide")
						else:
							print("ğŸ›’ Votre panier contient:")
							for code_produit, produit in panier_client.items():
								print((produit['produit']['icone'] + ' ') * produit['quantitÃ©'], str(produit['quantitÃ©']), produit['produit']['nom'])


					# ajouter_articles_dans_panier('cra', 2)
					# ajouter_articles_dans_panier('pom', 4)


					def afficher_message_erreur(msg):
						print('\x1b[38;2;255;255;0mâš ', msg, '\x1b[0m')
						time.sleep(2)


					def afficher_message_confirmation(msg):
						print('\x1b[38;2;0;255;0mâœ“', msg, '\x1b[0m')


					rÃ©ponse_utilisateur = ''
					while True:
						afficher_produits()
						afficher_panier()
						print("Que voulez-vous faire?")
						print("- a pour ajouter des articles au panier")
						print("- r pour rendre des articles")
						print("- q pour confirmer votre commande et quitter la boutique")
						rÃ©ponse_utilisateur = input()

						if rÃ©ponse_utilisateur == 'a':
							code_produit = input("Code produit: ")
							quantitÃ© = input("QuantitÃ©: ")
							try:
								quantitÃ© = int(quantitÃ©)
							except ValueError:
								afficher_message_erreur("Veuillez entrer un nombre entier pour la quantitÃ©.")
								continue
							rÃ©sultat = ajouter_articles_dans_panier(code_produit, quantitÃ©)

							if rÃ©sultat == 1:
								afficher_message_erreur('Le code produit "' + code_produit + '" n\'existe pas.')
							elif rÃ©sultat == 2:
								afficher_message_erreur("Vous n'avez pas assez d'argent pour en acheter autant.")
							elif rÃ©sultat == 3:
								afficher_message_erreur('QuantitÃ© insuffisante')
							elif rÃ©sultat == 0:
								afficher_message_confirmation("Vos produits ont Ã©tÃ© ajoutÃ©s Ã  votre panier")

						elif rÃ©ponse_utilisateur == 'r':
							code_produit = input("Code produit: ")
							rÃ©sultat = supprimer_produit_du_panier(code_produit)
							if rÃ©sultat == 1:
								afficher_message_erreur('Le code produit "' + code_produit + '" n\'existe pas dans votre panier.')
							elif rÃ©sultat == 0:
								afficher_message_confirmation("Vos produits ont Ã©tÃ© supprimÃ©s de votre panier")

						elif rÃ©ponse_utilisateur == 'q':
							afficher_message_confirmation("Vous recevrez bientÃ´t votre commande. Merci pour votre visite!")
							break
				</code></pre>
</div>
		
	</div>
<h2 data-nb="28.1" id="De la couleur dans le terminal">De la couleur dans le terminal</h2>
<p>La console, qu'on appelle aussi <em>terminal</em>, supporte la couleur dans la majoritÃ© des systÃ¨mes d'exploitation.</p>
	
	<p>Affichage dans la console â†“</p>
<img alt="" src="img/cm3/couleurs_terminal.png"/>
<p>Voici comment on spÃ©cifie la couleur sur la ligne aprÃ¨s "Bonjour":</p>
<pre><code class="">
print("Le terminal \x1b[38;2;255;0;0msupporte\x1b[0m la
	\x1b[38;2;0;255;0mcouleur\x1b[0m de votre choix pour
	chaque \x1b[38;2;255;255;0mc\x1b[0maractÃ¨re.")
	</code></pre>
<p>Cela peut effrayer au premier abord, mais le format est logique une fois qu'on le comprend. Tout se trouve dans un chaÃ®ne de caractÃ¨res, donc entre deux
		<code>"</code> ou <code>'</code>. Puis chaque portion du texte qu'on souhaite colorier/formatter est entourÃ©e entre quelque chose qui commence par
		<code>\x1b</code> et se termine par <code>m</code>.</p>
<p>Par exemple le mot "supporte" est entourÃ© par <code>\x1b[38;2;255;0;0m</code> Ã  gauche, et <code>\x1b[0m</code> Ã  droite. Chaque partie ne sera pas
		affichÃ©e mais interprÃ©tÃ©e par Python, car elles spÃ©cifient le format du texte qui suit, donc le texte Ã  droite du format. Ce format sera actif dans le
		terminal tant qu'aucun autre format ne sera spÃ©cifiÃ©, mÃªme aprÃ¨s que notre programme Python soit terminÃ©! <code>\x1b[38;2;255;0;0m</code> spÃ©cifie que
		la couleur du texte qui suit doit Ãªtre rouge. <code>\x1b[0m</code> spÃ©cifie que le texte qui suit ne doit avoir aucune couleur ou format en particulier,
		comme une rÃ©initialisation.</p>
<p><code>\x1b</code> marque le dÃ©but de l'information de formatage, en Python <code>\x</code> est un caractÃ¨re spÃ©cial, tout comme <code>\n</code>.
		<code>\x</code> permet de spÃ©cifier un caractÃ¨re par son <a href="https://fr.wikipedia.org/wiki/American_Standard_Code_for_Information_Interchange" target="_blank">code ASCII</a> hexadÃ©cimal, c'est Ã  dire en base 16. En base 10 les chiffres vont de 0 Ã  9, tandis qu'en base 16, ils vont de 0
		Ã  f (16 chiffres au total). Le caractÃ¨re est <code>1b</code> soit 27 en dÃ©cimal. C'est le numÃ©ro du caractÃ¨re spÃ©cial qui nous permet de spÃ©cifier le
		format du texte si celui-ci est suivi par le caractÃ¨re <code>[</code>, c'est ainsi, par convention. <code>\x1b</code> est donc interprÃ©tÃ© par Python
		comme un seul caractÃ¨re au final, et ensuite un format spÃ©cial doit suivre.</p>
<p>Ce format commence par <code>[</code> et se termine par <code>m</code>. Entre ces deux caractÃ¨res, plusieurs informations peuvent Ãªtre prÃ©sentes, selon
		nos besoins. Chaque information est sÃ©parÃ©e par un <code>;</code>. Par exemple la couleur du texte peut Ãªtre spÃ©cifiÃ©e en mÃªme temps que la couleur de
		fond du texte, ces deux informations doivent Ãªtre sÃ©parÃ©es par un point-virgule.</p>
<p>La couleur du texte est donnÃ©e par le format <code>38;2;rouge;vert;bleu</code>, avec les valeurs pour rouge, vert, bleu qui doivent Ãªtre entre 0 et 255.
		Par exemple <code>38;2;255;0;0</code> est 100% rouge, <code>38;2;0;255;0</code> est 100% vert, et <code>38;2;0;0;255</code> est 100% bleu. Les
		combinaisons donnent toute la gamme de couleur. Par exemple <code>38;2;255;255;0</code> est jaune, et <code>38;2;0;255;255</code> est cyan. Remarquer
		que les dÃ©but est toujours <code>38;2;</code>, c'est le code qui spÃ©cifie que ce qui va suivre doit Ãªtre les 3 valeurs rouge vert et bleu.</p>
<p>Sur le mÃªme principe, la couleur de fond du texte est donnÃ©e par <code>48;2;rouge;vert;bleu</code>. C'est la mÃªme chose, mais le code du dÃ©part est
		<code>48;2</code>.</p>
<p>Pour souligner le code est <code>4</code> (par exemple <code>\x1b[4m</code>), pour le gras c'est <code>1</code> et pour l'italique c'est <code>3</code>.
		Les combinaisons se font encore en sÃ©parant les informations par des points-virgules. Par exemple <code>\x1b[4;1m</code> spÃ©cifie que le texte qui
		suivra sera en gras ET soulignÃ©.</p>
<p>On peut spÃ©cifier la couleur et le formatage Ã  la fois de la mÃªme maniÃ¨re. Avec <code>\x1b[4;38;2;255;0;0m</code> par exemple, le texte qui suit sera
		rouge et soulignÃ©.</p>
<p>L'ordre des informations de formatage n'a pas d'importance, par exemple
		<br/>
<code>\x1b[4;1m</code> et
		<br/>
<code>\x1b[1;4m</code>
<br/>
		font la mÃªme chose, tout comme
		<br/>
<code>\x1b[4;38;2;255;0;0m</code> et
		<br/>
<code>\x1b[38;2;255;0;0;4m</code></p>
<h3 data-nb="28.1.1" id="Pour rÃ©capituler">Pour rÃ©capituler</h3>
<ul>
<li>Le formatage dÃ©marre toujours par
			<br/>
<code><span style="font-size: 1.5em; font-weight: bolder">\x1b[</span>OPTIONS <span style="font-size: 1.5em; font-weight: bolder">m</span></code>
<br/>
			avec <code>OPTIONS</code> qui sont des codes Ã  spÃ©cifier. Le texte qui suit sera formattÃ© comme demandÃ©.
		</li>
<li>
<p><code>OPTIONS</code> possibles:</p>
<ul>
<li><code>0</code>: rÃ©initialise toutes les options, donc le texte qui suit sera normal</li>
<li><code>4</code>: texte soulignÃ©</li>
<li><code>1</code>: texte en gras</li>
<li><code>3</code>: texte en italique</li>
<li><code>38;2;r;v;b</code>: spÃ©cifie la couleur du texte. <code>r</code>, <code>v</code> et <code>b</code> doivent Ãªtre dans l'intervalle
					[0,255]
				</li>
<li><code>48;2;r;v;b</code>: spÃ©cifie la couleur de fond du texte. <code>r</code>, <code>v</code> et <code>b</code> doivent Ãªtre dans
					l'intervalle [0,255]
				</li>
</ul>
</li>
<li>plusieurs options simultanÃ©es dans <code>OPTIONS</code> sont possibles, il faut alors les sÃ©parer par des points-virgules</li>
</ul>
<h3 data-nb="28.1.2" id="Support dans Windows, Replit, VSCode">Support dans Windows, Replit, VSCode</h3>
<p>Selon oÃ¹ vous exÃ©cutez votre programme, les couleurs et emojis seront plus ou moins supportÃ©s.</p>
<p>Si vous utilisez replit, vous n'aurez rien de spÃ©cial Ã  faire, les couleurs et emojis sont bien supportÃ©s. Seuls les Ã©mojis plus complexes apparaÃ®tront
		dans la console comme deux (ou parfois plus) Ã©mojis collÃ©s.</p>
<p>Si vous utilisez VSCode, normalement les Ã©mojis sont supportÃ©s, ainsi que les couleurs. Seuls les Ã©mojis plus complexes apparaÃ®tront dans la console
		comme deux (ou parfois plus) Ã©mojis collÃ©s. Le "Terminal" Windows (que vous pouvez chercher / trouver depuis le menu dÃ©marrer), semble supporter plus
		d'Ã©mojis que la console de VSCode, c'est-Ã -dire affiche un seul dessin correct pour les Ã©mojis complexes (pas tous encore malheureusement), lÃ  oÃ¹
		certains sont dÃ©composÃ©s en deux Ã©mojis plus "simples" collÃ©s dans la console de VSCode.</p>

	
	
	
	
	
	
	

	<p>La console classique de Windows peut supporter les couleurs, mais pas par dÃ©faut, et ne supporte pas les Ã©mojis (pas Ã  ma connaissance). Il vaut mieux
		utiliser le "Terminal" Windows, que vous pouvez chercher / trouver depuis le menu dÃ©marrer. Seuls les Ã©mojis plus complexes apparaÃ®tront dans le
		"Terminal" comme deux (ou parfois plus) Ã©mojis collÃ©s.</p>


		<div class="nav_arrows" style=" margin-bottom: 1em;">

			<div style="text-align: center; opacity: 0.5; font-size: small">

			</div>
		</div>

	</div>

	
		<style>
			@media only screen and (min-width: 70em) {
				#side_nav_bar {
					width: 25vw;
				}

				#contenu {
					width: 75vw;
				}
			}
		</style>
	


</div>
  
<script src="prism.js"></script>

<script>
	if (document.URL.indexOf("localhost") === -1) {
		//console.log("pas localhost");
		document.querySelector("link[rel = 'icon']").setAttribute("href", "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='200' height='200' viewBox='0 0 100 100' style='display:block; margin:auto; padding: 0 0 1em 0;'%3E%3Cstyle%3E text %7B text-align: center; fill: white; text-anchor: middle; font-size: 11pt; %3C/style%3E%3C!--	%3Crect fill='hsl(000,50%25, 50%25)' x='0' y='0' width='100' height='100'%3E%3C/rect%3E--%3E%3Crect fill='hsl(200,50%25, 50%25)' x='0' y='0' width='100' height='100'%3E%3C/rect%3E%3Ctext x='50' y='75' style='font-size: 50pt;' id='t'%3E ğŸ %3C/text%3E%3C!--	%3Canimate--%3E%3C!-- xlink:href='%23t'--%3E%3C!-- attributeName='y'--%3E%3C!-- calcMode='spline'--%3E%3C!-- values='60; 90; 60'--%3E%3C!-- keyTimes='0; 0.5; 1'--%3E%3C!-- keySplines='--%3E%3C!-- .42 0 1 1;--%3E%3C!-- 0 0 .59 1;'--%3E%3C!-- dur='2s'--%3E%3C!-- fill='freeze'--%3E%3C!-- repeatCount='indefinite'/%3E--%3E%3C/svg%3E");
	} else {
		//console.log("localhost");
	}
	// On supprime la premiÃ¨re ligne des <pre><code> qui est considÃ©rÃ©e toujours vide et inutile
	const codes = document.querySelectorAll('pre[class="affichage_console"] code');
	
	codes.forEach(function (el) {
		// Attention: modifier textContent ou innerText d'un Ã©lÃ©ment dÃ©truit tous ses Ã©lÃ©ments enfant :(
		//el.textContent = el.textContent.replace(/^\n/, '');
		// On modifie donc le premie noeud texte uniquement
		el.childNodes[0].textContent = el.childNodes[0].textContent.replace(/^\n/, ''); // suppose que c'est un Ã©lÃ©ment texte
	});

	// On ajoute un <br> avant et aprÃ¨s chaque <pre>
	let pres = document.querySelectorAll('pre, .exercices div.notÃ©');
	pres.forEach(function (el) {
		el.parentNode.insertBefore(document.createElement('div'), el);
		el.parentNode.insertBefore(document.createElement('div'), el.nextSibling);
	});

	// On ajoute 'Affichage' avant chaque affichage console
	pres = document.querySelectorAll('pre[class="affichage_console"]');
	pres.forEach(function (el) {
		const p = document.createElement('p');
		p.innerHTML = `<small>â†“ Affichage dans la console (ou dans le shell, selon oÃ¹ vous lancez l'exÃ©cution)<mall>`;
		p.classList.add("lÃ©gende_placÃ©e_en_haut");
		el.parentNode.insertBefore(p, el);
	});

	// Cacher corrections dans les TD / TP, et permettre de les afficher
	let divs_correction = document.querySelectorAll('div[class="correction"]');
	divs_correction.forEach(function (div) {
		div.classList.add("correction_hidden");
		const p = document.createElement('p');
		p.innerHTML = `<span class="correction_lien_Ã _cliquer">ğŸ“ Afficher / cacher correction âœ“</span>`;
		p.onclick = function (evt) {
			div.classList.toggle("correction_hidden");
		};
		div.parentNode.insertBefore(p, div);
	});
</script>
</body>
</html>