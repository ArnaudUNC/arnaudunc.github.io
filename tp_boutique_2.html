<!DOCTYPE html>
<html lang="fr">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>✏️ TP 9 - Boutique niv.2 ✔️ | Algo et prog 2 en Python</title>
	<link href="prism.css" rel="stylesheet"/>
	<link href="style.css" rel="stylesheet"/>
	<!--link rel="icon" href="img/favicon.svg"-->
	<link rel="icon"
			href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='200' height='200' viewBox='0 0 100 100' style='display:block; margin:auto; padding: 0 0 1em 0;'%3E%3Cstyle%3E text %7B text-align: center; fill: white; text-anchor: middle; font-size: 11pt; %3C/style%3E%3Crect fill='hsl(000,50%25, 50%25)' x='0' y='0' width='100' height='100'%3E%3C/rect%3E%3C!--	%3Crect fill='hsl(200,50%25, 50%25)' x='0' y='0' width='100' height='100'%3E%3C/rect%3E--%3E%3Ctext x='50' y='75' style='font-size: 50pt;' id='t'%3E 🐍 %3C/text%3E%3C!--	%3Canimate--%3E%3C!-- xlink:href='%23t'--%3E%3C!-- attributeName='y'--%3E%3C!-- calcMode='spline'--%3E%3C!-- values='60; 90; 60'--%3E%3C!-- keyTimes='0; 0.5; 1'--%3E%3C!-- keySplines='--%3E%3C!-- .42 0 1 1;--%3E%3C!-- 0 0 .59 1;'--%3E%3C!-- dur='2s'--%3E%3C!-- fill='freeze'--%3E%3C!-- repeatCount='indefinite'/%3E--%3E%3C/svg%3E">
</head>
<body>
<div id="conteneur">
	<div id="side_nav_bar">
		<!--svg xmlns="http://www.w3.org/2000/svg" width="200" height="200" viewBox="0 0 100 100" style="display:block; margin:auto; padding: 0 0 1em 0;">
	<style>
		text {
			text-align: center;
			fill: white;
			text-anchor: middle;
			font-size: 11pt;
		}
	</style>
	<rect fill="#4B8BBE" x="0" y="0" width="100" height="100"></rect>
	<text x="50" y="45" style="font-size: 30pt;">
		🐍

	</text>
	<text x="50" y="75" fill="#FFE873">
		Algo et prog 2
	</text>
	<text x="50" y="90" fill="#FFE873">
		en Python
	</text>
</svg-->

<div style="color:#4B8BBE; font-size: 200%; padding: 2%; text-align: center">
	Algo. et prog. 2 en
</div>
<img src="img/python-logo-generic.png" alt="Logo de Python" style="width: 100%; max-width: 19em; display:block; margin:auto;">
<div style="text-align: center; opacity: 0.5; font-size: small">Arnaud COUTURIER - Python 3.10</div>


























		<div class=" h h1">
			<!--span class="ballot_box">☒</span-->
			<a href="index.html">
				Introduction
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">☒</span-->
			<a href="cm_spec_impl_versions.html">
				Spécification, implémentations et versions
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">☒</span-->
			<a href="cm_methodes_exec.html">
				Façons d'exécuter un programme Python
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">☒</span-->
			<a href="cm_memoire_donnees.html">
				Mémoire et modèle de données
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">☒</span-->
			<a href="cm_pass.html">
				L'instruction pass
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">☒</span-->
			<a href="cm_prog_objets.html">
				Programmation objets
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">☒</span-->
			<a href="cm_namespaces_modules.html">
				Namespaces et modules
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">☒</span-->
			<a href="cm_exceptions.html">
				Les exceptions
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">☒</span-->
			<a href="cm_sequences.html">
				Les séquences
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">☒</span-->
			<a href="cm_iterables.html">
				Iterables, iterators
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">☒</span-->
			<a href="cm_iterable_unpacking.html">
				Iterable unpacking
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">☒</span-->
			<a href="cm_boucles_avancees.html">
				Techniques avancées sur les boucles
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">☒</span-->
			<a href="cm_fonc_params.html">
				Fonctions et paramètres
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">☒</span-->
			<a href="cm_dict_set.html">
				Hash et dictionnaires
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">☒</span-->
			<a href="cm_compr_listes.html">
				Compréhension de listes et dictionnaires
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">☒</span-->
			<a href="cm_manip_fich_texte.html">
				Manipulation de fichiers texte
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">☒</span-->
			<a href="td1.html">
				✍️ TD 1 - Calculatrice niv.1 ✔️
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">☒</span-->
			<a href="tp1.html">
				✏️ TP 1 - Calculatrice niv.2 ✔️
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">☒</span-->
			<a href="td2.html">
				✍️ TD 2 - Prog. objets niv.1 ✔️
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">☒</span-->
			<a href="tp2.html">
				✏️ TP 2 - Calculatrice niv.3 ✔️
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">☒</span-->
			<a href="tp3.html">
				✏️ TP 3 - Calculatrice niv.4 ✔️
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">☒</span-->
			<a href="td3.html">
				✍️ TD 3 ✔️
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">☒</span-->
			<a href="tp4.html">
				✏️ TP 4 - Prog. objets niv.2 ✔️
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">☒</span-->
			<a href="tp5.html">
				✏️ TP 5 - Prog. objets niv.3 ✔️
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">☒</span-->
			<a href="cc1_2022.html">
				📝 Contrôle continu 1 ✔️
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">☒</span-->
			<a href="tp6.html">
				✏️ TP 6 - Prog. objets niv.4 ✔️
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">☒</span-->
			<a href="tp7.html">
				✏️ TP 7 - Prog. objets niv.5 ✔️
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">☒</span-->
			<a href="tp_boutique_1.html">
				✏️ TP 8 - Boutique niv.1 ✔️
			</a>
		</div>

		<div class="page_actuelle h h1">
			<!--span class="ballot_box">☐</span-->
			<a href="tp_boutique_2.html">
				✏️ TP 9 - Boutique niv.2 ✔️
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">☐</span-->
			<a href="tp_pendu_1.html">
				✏️ TP 10 - Jeu du pendu niv.1 ✔️
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">☐</span-->
			<a href="tp_pendu_2.html">
				✏️ TP 11 - Jeu du pendu niv.2 ✔️
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">☐</span-->
			<a href="cc2_2022_taches.html">
				📝 Contrôle continu 2 ✔️
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">☐</span-->
			<a href="tp_pendu_3.html">
				✏️ TP 12 - Jeu du pendu niv.3 ✔️
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">☐</span-->
			<a href="cc3_2022_etudiants.html">
				📝 Contrôle continu 3 ✔️
			</a>
		</div>

	</div>
	<div id="contenu">
		


		
	<h1 data-nb="29" id="✏️ TP 9 - Boutique niv.2 ✔️">✏️ TP 9 - Boutique niv.2 ✔️</h1>
	


	<div class="exercice">
<h2 data-nb="29.1" id="Question 1: améliorer les couleurs des messages">Question 1: améliorer les couleurs des messages</h2>
<p>On veut trois catégories de messages pour informer l'utilisateur, avec des couleurs différentes:</p>
<ul>
<li>Les messages d'erreur doivent être en rouge</li>
<li>Les messages d'information doivent être en jaune</li>
<li>Les messages de confirmation doivent être en vert</li>
</ul>
<h2 data-nb="29.2" id="Question 2: message d'erreur immédiat en cas d'achat d'un produit inexistant">Question 2: message d'erreur immédiat en cas d'achat d'un produit inexistant</h2>
<p>Un petit détail, mais le genre qui compte beaucoup pour le confort de l'utilisateur: dans la version précédente du programme, quand on achète un
			produit, si le code produit entré par l'utilisateur n'existe pas, le message d'erreur s'affiche APRES avoir entré la quantité à acheter. Il ne
			faudrait même pas demander la quantité à l'utilisateur si le code est inexistant ↓</p>
<video controls="" preload="none" src="img/boutique/exo3_code_achat_inexistant_crf30.mp4"></video>
<h2 data-nb="29.3" id="Question 3: lettres significatives sont soulignées dans les options des menus">Question 3: lettres significatives sont soulignées dans les options des menus</h2>
<p>A chaque fois que l'utilisateur doit faire un choix d'action, la ou les lettres qu'il doit écrire sont soulignées si elles correspondent à des
			raccourcis. Par exemple souligner la lettre "q" dans l'option "Quitter" si l'action à entrer est "q", ce qui donne <code><span style="text-decoration: underline">Q</span>uitter</code>. Ou encore <code><span style="text-decoration: underline">S</span>upprimer <span style="text-decoration: underline">p</span>roduit</code> si l'action à entrer est "sp".</p>
<h2 data-nb="29.4" id="Question 4: ajout sous-menu pour modification des vendeurs et leurs produits">Question 4: ajout sous-menu pour modification des vendeurs et leurs produits</h2>
<p>En plus de faire ses achats, l'utilisateur peut prendre le rôle de gestionnaire du marché et le modifier. Cela est sans "protection" pour le moment,
			mais libre à vous d'ajouter la demande d'un mot de passe si vous le souhaitez. Réorganisez le menu du programme en menu principal et 2 sous-menus
			pour les achats et pour les ventes. Ajouter un sous-menu de vente qui propose les actions suivantes (les actions en elles-mêmes seront détaillées et
			à faire dans les questions suivantes):</p>
<ul>
<li>Modifier les vendeurs existants</li>
<li>Supprimer des vendeurs</li>
<li>Ajouter des nouveaux vendeurs</li>
</ul>
<video controls="" preload="none" src="img/boutique/exo3_achat_vente_crf30.mp4"></video>
<h2 data-nb="29.5" id="Question 5: ajout / suppression de vendeurs">Question 5: ajout / suppression de vendeurs</h2>
<p>Implémenter les options pour créer des nouveaux vendeurs (sans leurs produits, ça se fera par l'option de modification d'un vendeur) et aussi pour
			supprimer des vendeurs, avec gestion des erreurs et messages de confirmation que la modification a bien été faite ↓</p>
<video controls="" preload="none" src="img/boutique/exo3_ajout_suppr_vendeur_crf30.mp4"></video>
<h2 data-nb="29.6" id="Question 6: modification de vendeurs">Question 6: modification de vendeurs</h2>
<p>Implémenter les options pour modifier des vendeurs. Ces options doivent être dans un sous-menu de modification d'un vendeur en particulier, et
			permettent de faire les actions suivantes:</p>
<ul>
<li>
<p>Modifier nom, métier et portrait d'un vendeur, avec gestion des erreurs et messages de confirmation que la modification a bien été faite
					↓</p>
<video controls="" preload="none" src="img/boutique/exo3_modif_vendeur_crf30.mp4"></video>
</li>
<li>
<p>Ajouter et supprimer des produits pour un vendeur, avec gestion des erreurs et messages de confirmation que la modification a bien été faite
					↓</p>
<video controls="" preload="none" src="img/boutique/exo3_modif_produits_crf30.mp4"></video>
</li>
</ul>
<h2 data-nb="29.7" id="Question 7: sauvegarde et chargement de la boutique">Question 7: sauvegarde et chargement de la boutique</h2>
<p>Faire en sorte que la boutique soit chargée automatiquement depuis un fichier au lancement du programme, et sauvegardée automatiquement dans le même
			fichier lorsqu'on quitte le programme.</p>
<video controls="" preload="none" src="img/boutique/exo3_sauvegarde_boutique_crf30.mp4"></video>
		
		
		
		  
		  
		
		
		
		
		
		
		

		
			<div class="correction">
<h2 data-nb="29.8" id="Fichier boutique.py">Fichier boutique.py</h2>
<p>C'est le fichier qui contient les données de la boutique (vendeurs et leurs produits) dans un dict. Il est normalement chargé et
					potentiellement modifié par le programme, mais peut l'être à la main aussi, tant que le format du dict (clés nécessaires présentes) attendu
					par le programme est respecté.</p>
<pre class="line-numbers"><code class="language-python">
vendeurs = {'Julie': {'métier': 'Pâtissière',
           'portrait': '👩\u200d🍳',
           'produits': {'c': {"francs à l'unité": 200,
                              'icone': '🍪',
                              'nom': 'Cookies aux pépites de chocolat'},
                        'd': {"francs à l'unité": 150,
                              'icone': '🍩',
                              'nom': 'Donuts sauce choco'},
                        'g': {"francs à l'unité": 170,
                              'icone': '🍰',
                              'nom': 'Parts de gateau crème fraîche'}}},
 'Susie': {'métier': 'Agricultrice',
           'portrait': '👩\u200d🌾',
           'produits': {'ora': {"francs à l'unité": 110,
                                'icone': '🍊',
                                'nom': 'Oranges locales'},
                        'poi': {"francs à l'unité": 70,
                                'icone': '🍐',
                                'nom': 'Poires import NZ'},
                        'pom': {"francs à l'unité": 50,
                                'icone': '🍎',
                                'nom': 'Pommes import NZ'}}},
 'Thomas': {'métier': 'Pêcheur',
            'portrait': '🧔⚓',
            'produits': {'bec': {"francs à l'unité": 450,
                                 'icone': '🐟',
                                 'nom': 'Becs de canne'},
                         'cra': {"francs à l'unité": 700,
                                 'icone': '🦀',
                                 'nom': 'Crabes de mangrove'},
                         'cre': {"francs à l'unité": 150,
                                 'icone': '🦐',
                                 'nom': 'Crevettes moyennes'}}}}
				</code></pre>
<h2 data-nb="29.9" id="Fichier main.py">Fichier main.py</h2>
<pre class="line-numbers"><code class="language-python">
import time
# le chargement de la boutique se fait par l'importation de ce module "boutique" qui contient le dict des données
import boutique
# pprint servira à enregistrer le dict de la boutique dans boutique.py sous une forme plus lisible et facile à modifier manuellement si besoin
import pprint

# Quelques icônes pour les tests: 👨 🍏
vendeurs = boutique.vendeurs


def sauvegarder_boutique(chemin_fichier):
	f = open(chemin_fichier, "w", encoding="utf-8")
	# f.write("vendeurs = " + str(vendeurs))
	f.write("vendeurs = " + pprint.pformat(vendeurs))
	f.close()


def afficher_boutique():
	print('Bienvenue au marché 🏪, voici nos vendeurs:')
	# print()
	for nom_vendeur, description_vendeur in vendeurs.items():
		print(description_vendeur['portrait'] + '  ' + nom_vendeur + ' (' + description_vendeur['métier'] + ') vend:')
		for code_produit, description_produit in description_vendeur['produits'].items():
			desc_produit_str = '\t' + description_produit['icone'] + '  ' + description_produit['nom']
			desc_produit_str += ' (code: ' + code_produit + '), ' + str(description_produit["francs à l'unité"]) + ' F/unité'
			print(desc_produit_str)


panier_client = {}


def retrouver_produit(code_produit_à_retrouver):
	for nom_vendeur, vendeur in vendeurs.items():
		for code_produit, produit in vendeur["produits"].items():
			if code_produit == code_produit_à_retrouver:
				return produit


argent = 5000


# retourne 0 si tout s'est bien passé, 1 si le produit spécifié n'existe pas, 2 s'il n'y a pas assez d'argent, 3 si quantité est 0 ou négatif
def ajouter_articles_dans_panier(code_produit_à_ajouter, quantité):
	if quantité &lt;= 0:
		return 3

	produit_à_ajouter = retrouver_produit(code_produit_à_ajouter)
	if not produit_à_ajouter:
		return 1

	global argent
	prix_produit = produit_à_ajouter["francs à l'unité"] * quantité
	if prix_produit &gt; argent:
		return 2

	argent -= prix_produit

	if code_produit_à_ajouter not in panier_client:
		panier_client[code_produit_à_ajouter] = {
			'produit': produit_à_ajouter,
			'quantité': quantité
		}
	else:
		panier_client[code_produit_à_ajouter]['quantité'] += quantité

	return 0


# retourne 0 si tout s'est bien passé, 1 si le panier ne contient pas le produit spécifié
def supprimer_produit_du_panier(code_produit_à_supprimer):
	if code_produit_à_supprimer not in panier_client:
		return 1

	argent_récupéré = panier_client[code_produit_à_supprimer]["produit"]["francs à l'unité"] * panier_client[code_produit_à_supprimer]["quantité"]
	global argent
	argent += argent_récupéré
	del panier_client[code_produit_à_supprimer]

	return 0


def afficher_panier():
	print('\x1b[38;2;255;255;100;48;2;100;100;100m'"💰 Vous disposez de:", str(argent), 'F', '\x1b[0m')
	if len(panier_client) == 0:
		print("🛒 Votre panier est vide")
	else:
		print("🛒 Votre panier contient:")
		for code_produit, produit in panier_client.items():
			print((produit['produit']['icone'] + ' ') * produit['quantité'], str(produit['quantité']), produit['produit']['nom'])


# ajouter_articles_dans_panier('cra', 2)
# ajouter_articles_dans_panier('pom', 4)


def afficher_message_erreur(msg):
	print('\x1b[38;2;255;0;0m⚠', msg, '\x1b[0m')
	time.sleep(2)


def afficher_message_confirmation(msg):
	print('\x1b[38;2;0;255;0m✓', msg, '\x1b[0m')


def afficher_message_info(msg):
	print('\x1b[38;2;255;255;0m', msg, '\x1b[0m')


def souligner_lettres_indices(chaine: str, indices):
	resultat = list(chaine)
	for i in indices:
		resultat[i] = '\x1b[4m' + chaine[i] + '\x1b[0m'
	return ''.join(resultat)


réponse_utilisateur = ''
MODE_UTILISATEUR_AUCUN = 0
MODE_UTILISATEUR_ACHAT = 1
MODE_UTILISATEUR_VENTE = 2
mode_utilisateur = MODE_UTILISATEUR_AUCUN
MODE_VENTE_AUCUN = 0
MODE_VENTE_MODIF_VENDEUR = 1
mode_vente = MODE_VENTE_AUCUN
nom_vendeur_en_cours_de_modif = None
afficher_message_confirmation("Boutique chargée")
while True:
	afficher_boutique()

	if MODE_UTILISATEUR_AUCUN == mode_utilisateur:
		print("Que voulez-vous faire?")
		print("- (a) " + souligner_lettres_indices("Acheter", [0]))
		print("- (v) " + souligner_lettres_indices("Vendre", [0]))
		print("- (q) " + souligner_lettres_indices("Quitter", [0]))
		réponse_utilisateur = input()
		if 'a' == réponse_utilisateur:
			mode_utilisateur = MODE_UTILISATEUR_ACHAT
		elif 'v' == réponse_utilisateur:
			mode_utilisateur = MODE_UTILISATEUR_VENTE
		elif 'q' == réponse_utilisateur:
			afficher_message_info("A bientôt.")
			# try:
			sauvegarder_boutique("boutique.py")
			afficher_message_confirmation("(Boutique sauvegardée)")

			# except:
			# 	afficher_message_erreur("(Erreur lors de la sauvegarde de la boutique)")
			break

	elif MODE_UTILISATEUR_ACHAT == mode_utilisateur:
		afficher_panier()
		print("[ACHAT] Que voulez-vous faire?")
		print("- (a) " + souligner_lettres_indices("Ajouter des articles au panier", [0]))
		print("- (s) " + souligner_lettres_indices("Supprimer des articles du panier", [0]))
		print("- (q) " + souligner_lettres_indices("Confirmer commande et revenir en arrière", []))
		réponse_utilisateur = input()

		if réponse_utilisateur == 'a':
			code_produit = input("Code produit: ")
			if not retrouver_produit((code_produit)):
				afficher_message_erreur('Le code produit "' + code_produit + '" n\'existe pas.')
				continue
			quantité = input("Quantité: ")
			try:
				quantité = int(quantité)
			except ValueError:
				afficher_message_erreur("Veuillez entrer un nombre entier positif pour la quantité.")
				continue
			résultat = ajouter_articles_dans_panier(code_produit, quantité)

			# if résultat == 1: &lt;= CE CAS EST DEJA TRAITE plus haut
			# 	afficher_message_erreur('Le code produit "' + code_produit + '" n\'existe pas.')
			if résultat == 2:
				afficher_message_erreur("Vous n'avez pas assez d'argent pour en acheter autant.")
			elif résultat == 3:
				afficher_message_erreur('Quantité insuffisante')
			elif résultat == 0:
				afficher_message_confirmation("Vos produits ont été ajoutés à votre panier")

		elif réponse_utilisateur == 's':
			code_produit = input("Code produit: ")
			résultat = supprimer_produit_du_panier(code_produit)
			if résultat == 1:
				afficher_message_erreur('Le code produit "' + code_produit + '" n\'existe pas dans votre panier.')
			elif résultat == 0:
				afficher_message_confirmation("Vos produits ont été supprimés de votre panier")

		elif réponse_utilisateur == 'q':
			afficher_message_confirmation("Vous recevrez bientôt votre commande. Merci pour votre visite!")
			mode_utilisateur = MODE_UTILISATEUR_AUCUN

	elif MODE_UTILISATEUR_VENTE == mode_utilisateur:
		if MODE_VENTE_AUCUN == mode_vente:
			print("[VENTE] Que voulez-vous faire?")
			print("- (m) " + souligner_lettres_indices("Modifier vendeur existant", [0]))
			print("- (c) " + souligner_lettres_indices("Créer nouveau vendeur", [0]))
			print("- (s) " + souligner_lettres_indices("Supprimer un vendeur", [0]))
			print("- (q) " + souligner_lettres_indices("Revenir en arrière", []))
			réponse_utilisateur = input()
			if 'm' == réponse_utilisateur:
				nom_vendeur = input("Nom du vendeur: ")
				if nom_vendeur not in vendeurs:
					afficher_message_erreur("Ce vendeur n'existe pas.")
					continue
				nom_vendeur_en_cours_de_modif = nom_vendeur
				mode_vente = MODE_VENTE_MODIF_VENDEUR

			elif 'c' == réponse_utilisateur:
				nom_vendeur = input("Nom du vendeur: ")
				métier_vendeur = input("Métier: ")
				portrait_vendeur = input("Portrait: ")  # portrait pour tests: 👨
				vendeurs[nom_vendeur] = {
					'portrait': portrait_vendeur,
					'métier': métier_vendeur,
					'produits': {}
				}
				afficher_message_confirmation("Vendeur créé")

			elif 's' == réponse_utilisateur:
				nom_vendeur = input("Nom du vendeur: ")
				try:
					del vendeurs[nom_vendeur]
				except KeyError:
					afficher_message_erreur("Ce vendeur n'existe pas")
					continue
				afficher_message_confirmation("Vendeur supprimé")

			elif 'q' == réponse_utilisateur:
				mode_utilisateur = MODE_UTILISATEUR_AUCUN

		elif MODE_VENTE_MODIF_VENDEUR == mode_vente:
			print("[MODIF VENDEUR " + nom_vendeur_en_cours_de_modif + "] Que voulez-vous faire?")
			print("- (mn) " + souligner_lettres_indices("Modifier nom", [0, 9]))
			print("- (mp) " + souligner_lettres_indices("Modifier portrait", [0, 9]))
			print("- (mm) " + souligner_lettres_indices("Modifier métier", [0, 9]))
			print("- (ap) " + souligner_lettres_indices("Ajouter un produit", [0, 11]))
			print("- (sp) " + souligner_lettres_indices("Supprimer un produit", [0, 13]))
			# print("- (mp) " + souligner_lettres_indices("Modifier un produit", [0, 12])) A FAIRE
			print("- (q) " + souligner_lettres_indices("Revenir en arrière", []))
			réponse_utilisateur = input()

			if 'mn' == réponse_utilisateur:
				nouveau_nom_vendeur = input("Nouveau nom du vendeur: ")
				infos_vendeur = vendeurs[nom_vendeur_en_cours_de_modif]
				del vendeurs[nom_vendeur_en_cours_de_modif]
				vendeurs[nouveau_nom_vendeur] = infos_vendeur
				nom_vendeur_en_cours_de_modif = nouveau_nom_vendeur
				afficher_message_confirmation("Nom du vendeur modifié")

			elif 'mp' == réponse_utilisateur:
				portrait = input("Nouveau portrait du vendeur: ")
				vendeurs[nom_vendeur_en_cours_de_modif]["portrait"] = portrait
				afficher_message_confirmation("Portrait du vendeur modifié")

			elif 'mm' == réponse_utilisateur:
				métier = input("Nouveau métier du vendeur: ")
				vendeurs[nom_vendeur_en_cours_de_modif]["métier"] = métier
				afficher_message_confirmation("Métier du vendeur modifié")

			elif 'ap' == réponse_utilisateur:
				code_produit = input("Code produit (doit être unique pour TOUS les produits de la boutique): ")
				if retrouver_produit(code_produit):
					afficher_message_erreur("Ce code produit existe déjà")
					continue
				prix_produit = input("Prix produit (nombre): ")
				nom_produit = input("Nom produit: ")
				try:
					prix_produit = float(prix_produit)
					if prix_produit &lt;= 0:
						# On peut provoquer une exception avec l'instruction raise
						# On pourrait aussi s'en sortir de façon plus classique, sans raise
						raise ValueError
				except ValueError:
					afficher_message_erreur("Le prix doit être un nombre entier ou à virgule, strictement positif")
					continue
				icone_produit = input("Icône produit: ")
				# Une nouvelle icône pour tester: 🍏
				vendeurs[nom_vendeur_en_cours_de_modif]["produits"][code_produit] = {
					"nom": nom_produit,
					"francs à l'unité": prix_produit,
					'icone': icone_produit,
				}
				afficher_message_confirmation("Produit ajouté")

			elif 'sp' == réponse_utilisateur:
				code_produit = input("Code produit: ")
				try:
					del vendeurs[nom_vendeur_en_cours_de_modif]["produits"][code_produit]
				except KeyError:
					afficher_message_erreur(nom_vendeur_en_cours_de_modif + " ne vend pas ce produit")
					continue
				afficher_message_confirmation("Produit supprimé")

			# A FAIRE
			# elif 'mp' == réponse_utilisateur:
			# 	pass

			elif 'q' == réponse_utilisateur:
				mode_vente = MODE_VENTE_AUCUN
				</code></pre>
</div>
		
	</div>


		<div class="nav_arrows" style=" margin-bottom: 1em;">

			<div style="text-align: center; opacity: 0.5; font-size: small">

			</div>
		</div>

	</div>

	
		<style>
			@media only screen and (min-width: 70em) {
				#side_nav_bar {
					width: 25vw;
				}

				#contenu {
					width: 75vw;
				}
			}
		</style>
	


</div>
  
<script src="prism.js"></script>

<script>
	if (document.URL.indexOf("localhost") === -1) {
		//console.log("pas localhost");
		document.querySelector("link[rel = 'icon']").setAttribute("href", "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='200' height='200' viewBox='0 0 100 100' style='display:block; margin:auto; padding: 0 0 1em 0;'%3E%3Cstyle%3E text %7B text-align: center; fill: white; text-anchor: middle; font-size: 11pt; %3C/style%3E%3C!--	%3Crect fill='hsl(000,50%25, 50%25)' x='0' y='0' width='100' height='100'%3E%3C/rect%3E--%3E%3Crect fill='hsl(200,50%25, 50%25)' x='0' y='0' width='100' height='100'%3E%3C/rect%3E%3Ctext x='50' y='75' style='font-size: 50pt;' id='t'%3E 🐍 %3C/text%3E%3C!--	%3Canimate--%3E%3C!-- xlink:href='%23t'--%3E%3C!-- attributeName='y'--%3E%3C!-- calcMode='spline'--%3E%3C!-- values='60; 90; 60'--%3E%3C!-- keyTimes='0; 0.5; 1'--%3E%3C!-- keySplines='--%3E%3C!-- .42 0 1 1;--%3E%3C!-- 0 0 .59 1;'--%3E%3C!-- dur='2s'--%3E%3C!-- fill='freeze'--%3E%3C!-- repeatCount='indefinite'/%3E--%3E%3C/svg%3E");
	} else {
		//console.log("localhost");
	}
	// On supprime la première ligne des <pre><code> qui est considérée toujours vide et inutile
	const codes = document.querySelectorAll('pre[class="affichage_console"] code');
	
	codes.forEach(function (el) {
		// Attention: modifier textContent ou innerText d'un élément détruit tous ses éléments enfant :(
		//el.textContent = el.textContent.replace(/^\n/, '');
		// On modifie donc le premie noeud texte uniquement
		el.childNodes[0].textContent = el.childNodes[0].textContent.replace(/^\n/, ''); // suppose que c'est un élément texte
	});

	// On ajoute un <br> avant et après chaque <pre>
	let pres = document.querySelectorAll('pre, .exercices div.noté');
	pres.forEach(function (el) {
		el.parentNode.insertBefore(document.createElement('div'), el);
		el.parentNode.insertBefore(document.createElement('div'), el.nextSibling);
	});

	// On ajoute 'Affichage' avant chaque affichage console
	pres = document.querySelectorAll('pre[class="affichage_console"]');
	pres.forEach(function (el) {
		const p = document.createElement('p');
		p.innerHTML = `<small>↓ Affichage dans la console (ou dans le shell, selon où vous lancez l'exécution)<mall>`;
		p.classList.add("légende_placée_en_haut");
		el.parentNode.insertBefore(p, el);
	});

	// Cacher corrections dans les TD / TP, et permettre de les afficher
	let divs_correction = document.querySelectorAll('div[class="correction"]');
	divs_correction.forEach(function (div) {
		div.classList.add("correction_hidden");
		const p = document.createElement('p');
		p.innerHTML = `<span class="correction_lien_à_cliquer">📝 Afficher / cacher correction ✓</span>`;
		p.onclick = function (evt) {
			div.classList.toggle("correction_hidden");
		};
		div.parentNode.insertBefore(p, div);
	});
</script>
</body>
</html>