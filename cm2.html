<!DOCTYPE html>
<html lang="fr">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>📖 Cours 2: Programmation orientée objets | Algo et prog 2 en Python</title>
	<link href="prism.css" rel="stylesheet"/>
	<link href="style.css" rel="stylesheet"/>
	<!--link rel="icon" href="img/favicon.svg"-->
	<link rel="icon"
			href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='200' height='200' viewBox='0 0 100 100' style='display:block; margin:auto; padding: 0 0 1em 0;'%3E%3Cstyle%3E text %7B text-align: center; fill: white; text-anchor: middle; font-size: 11pt; %3C/style%3E%3Crect fill='hsl(000,50%25, 50%25)' x='0' y='0' width='100' height='100'%3E%3C/rect%3E%3C!--	%3Crect fill='hsl(200,50%25, 50%25)' x='0' y='0' width='100' height='100'%3E%3C/rect%3E--%3E%3Ctext x='50' y='75' style='font-size: 50pt;' id='t'%3E 🐍 %3C/text%3E%3C!--	%3Canimate--%3E%3C!-- xlink:href='%23t'--%3E%3C!-- attributeName='y'--%3E%3C!-- calcMode='spline'--%3E%3C!-- values='60; 90; 60'--%3E%3C!-- keyTimes='0; 0.5; 1'--%3E%3C!-- keySplines='--%3E%3C!-- .42 0 1 1;--%3E%3C!-- 0 0 .59 1;'--%3E%3C!-- dur='2s'--%3E%3C!-- fill='freeze'--%3E%3C!-- repeatCount='indefinite'/%3E--%3E%3C/svg%3E">
</head>
<body>
<div id="conteneur">
	<div id="side_nav_bar">
		<svg xmlns="http://www.w3.org/2000/svg" width="200" height="200" viewBox="0 0 100 100" style="display:block; margin:auto; padding: 0 0 1em 0;">
	<style>
		text {
			text-align: center;
			fill: white;
			text-anchor: middle;
			font-size: 11pt;
		}
	</style>
	<rect fill="hsl(200,50%, 50%)" x="0" y="0" width="100" height="100"></rect>
	<text x="50" y="45" style="font-size: 30pt;">
		🐍

	</text>
	<text x="50" y="75">
		Algo et prog 2
	</text>
	<text x="50" y="90">
		en Python
	</text>
</svg>

	
			<div class="h h1">
				<!--span class="ballot_box">☒</span-->
				<a href="index.html#Introduction">
					Introduction
				</a>
			</div>
	

	
			<div class="h h1">
				<!--span class="ballot_box">☒</span-->
				<a href="groupes.html#Groupes de TD / TP">
					Groupes de TD / TP
				</a>
			</div>
	

	
			<div class="h h1">
				<!--span class="ballot_box">☒</span-->
				<a href="cm1.html#📖 Cours 1: rappels">
					📖 Cours 1: rappels
				</a>
			</div>
	

	
			<div class="h h1">
				<!--span class="ballot_box">☒</span-->
				<a href="td1.html#✏️ TD 1 - Calculatrice niv.1 ✔️">
					✏️ TD 1 - Calculatrice niv.1 ✔️
				</a>
			</div>
	

	
			<div class="h h1">
				<!--span class="ballot_box">☒</span-->
				<a href="tp1.html#✏️ TP 1 - Calculatrice niv.2 ✔️">
					✏️ TP 1 - Calculatrice niv.2 ✔️
				</a>
			</div>
	

	
			<div class="h h1">
				<!--span class="ballot_box">☒</span-->
				<a href="tp2.html#✏️ TP 2 - Calculatrice niv.3 ✔️">
					✏️ TP 2 - Calculatrice niv.3 ✔️
				</a>
			</div>
	

	
			<div class="h h1">
				<!--span class="ballot_box">☒</span-->
				<a href="tp3.html#✏️ TP 3 - Calculatrice niv.4 ✔️">
					✏️ TP 3 - Calculatrice niv.4 ✔️
				</a>
			</div>
	

	
			<div class="page_actuelle h h1">
				<!--span class="ballot_box">☐</span-->
				<a href="#📖 Cours 2: Programmation orientée objets">
					📖 Cours 2: Programmation orientée objets
				</a>
			</div>
			<div class="page_actuelle h h2">
				<!--span class="ballot_box">☐</span-->
				<a href="#Vue d'ensemble">
					Vue d'ensemble
				</a>
			</div>
			<div class="page_actuelle h h3">
				<!--span class="ballot_box">☐</span-->
				<a href="#Résumé schématique">
					Résumé schématique
				</a>
			</div>
			<div class="page_actuelle h h3">
				<!--span class="ballot_box">☐</span-->
				<a href="#Exemple schématique">
					Exemple schématique
				</a>
			</div>
			<div class="page_actuelle h h2">
				<!--span class="ballot_box">☐</span-->
				<a href="#Classes">
					Classes
				</a>
			</div>
			<div class="page_actuelle h h2">
				<!--span class="ballot_box">☐</span-->
				<a href="#Méthodes">
					Méthodes
				</a>
			</div>
			<div class="page_actuelle h h2">
				<!--span class="ballot_box">☐</span-->
				<a href="#Attributs et constructeur">
					Attributs et constructeur
				</a>
			</div>
			<div class="page_actuelle h h2">
				<!--span class="ballot_box">☐</span-->
				<a href="#Exemple">
					Exemple
				</a>
			</div>
	

	
			<div class="h h1">
				<!--span class="ballot_box">☐</span-->
				<a href="td2.html#✏️ TD 2 - Prog. objets niv.1 ✔️">
					✏️ TD 2 - Prog. objets niv.1 ✔️
				</a>
			</div>
	

	
			<div class="h h1">
				<!--span class="ballot_box">☐</span-->
				<a href="tp4.html#✏️ TP 4 - Prog. objets niv.2 ✔️">
					✏️ TP 4 - Prog. objets niv.2 ✔️
				</a>
			</div>
	

	
			<div class="h h1">
				<!--span class="ballot_box">☐</span-->
				<a href="tp5.html#✏️ TP 5 - Prog. objets niv.3 ✔️">
					✏️ TP 5 - Prog. objets niv.3 ✔️
				</a>
			</div>
	

	
			<div class="h h1">
				<!--span class="ballot_box">☐</span-->
				<a href="tp6.html#✏️ TP 6 - Prog. objets niv.4 ✔️">
					✏️ TP 6 - Prog. objets niv.4 ✔️
				</a>
			</div>
	

	
			<div class="h h1">
				<!--span class="ballot_box">☐</span-->
				<a href="tp7.html#✏️ TP 7 - Prog. objets niv.5 ✔️">
					✏️ TP 7 - Prog. objets niv.5 ✔️
				</a>
			</div>
	

	
			<div class="h h1">
				<!--span class="ballot_box">☐</span-->
				<a href="cm3.html#📖 Cours 3: fonctionnalités de Python">
					📖 Cours 3: fonctionnalités de Python
				</a>
			</div>
	

	
			<div class="h h1">
				<!--span class="ballot_box">☐</span-->
				<a href="td3.html#✏️ TD 3 ✔️">
					✏️ TD 3 ✔️
				</a>
			</div>
	

	
			<div class="h h1">
				<!--span class="ballot_box">☐</span-->
				<a href="cm4.html#📖 Cours 4: rappels et compléments">
					📖 Cours 4: rappels et compléments
				</a>
			</div>
	

	
			<div class="h h1">
				<!--span class="ballot_box">☐</span-->
				<a href="tp8.html#✏️ TP 8 ✔️">
					✏️ TP 8 ✔️
				</a>
			</div>
	

	
			<div class="h h1">
				<!--span class="ballot_box">☐</span-->
				<a href="tp9.html#✏️ TP 9 - Jeu du pendu niv.1">
					✏️ TP 9 - Jeu du pendu niv.1
				</a>
			</div>
	

	
			<div class="h h1">
				<!--span class="ballot_box">☐</span-->
				<a href="tp10.html#✏️ TP 10 - Jeu du pendu niv.2">
					✏️ TP 10 - Jeu du pendu niv.2
				</a>
			</div>
	

	
			<div class="h h1">
				<!--span class="ballot_box">☐</span-->
				<a href="tp11.html#✏️ TP 11 - Jeu du pendu niv.3">
					✏️ TP 11 - Jeu du pendu niv.3
				</a>
			</div>
	

	
			<div class="h h1">
				<!--span class="ballot_box">☐</span-->
				<a href="exos_notes.html#📝 Exercices notés">
					📝 Exercices notés
				</a>
			</div>
	

	
			<div class="h h1">
				<!--span class="ballot_box">☐</span-->
				<a href="cc1_2021.html#📝 Contrôle continu 1">
					📝 Contrôle continu 1
				</a>
			</div>
	

	</div>
	<div id="contenu">
		

		<div class="nav_arrows">
		<div style="display: flex; flex-direction: row; justify-content: space-between; padding: 1em 0em;">
				<span>
					
						<a href="tp3.html">← Page précédente</a>
					
				</span>
			
				<span style="padding: 0 .5em;">
						<a href="index.html">1ère page</a>
					</span>
			
			<span>
				
					<a href="td2.html">Page suivante →</a>
				
				</span>
		</div>
		</div>
		<hr>

		
	<h1 data-nb="8" id="📖 Cours 2: Programmation orientée objets">📖 Cours 2: Programmation orientée objets</h1>
	
	
	
	

	<p>Comme en Python tout est objet, il est nécessaire d'introduire les concepts objets le plus tôt possible. On va abréger "programmation orientée objet" par
		POO.</p>
<p>La POO va nous servir pour créer de nouveaux types de données personnalisés. D'abord on déclarera nos types, on pourra ensuite créer et utiliser des
		variables de ces types.</p>
<h2 data-nb="8.1" id="Vue d'ensemble">Vue d'ensemble</h2>
<h3 data-nb="8.1.1" id="Résumé schématique">Résumé schématique</h3>
<img alt="" src="https://docs.google.com/drawings/d/e/2PACX-1vTP7slzFzZ_FZNVZPB32HmZLaX1nhCMsVd34ruOV2x5WctKnDzDtuqruPaIe7Xrx1SMOUHaBpCvx_mW/pub?w=722&amp;h=805"/>
<h3 data-nb="8.1.2" id="Exemple schématique">Exemple schématique</h3>
<img alt="" src="https://docs.google.com/drawings/d/e/2PACX-1vQErg8TpLsG9IPCPLayEviBpoIyTamPx2PoZ-Dd8Xa9CsflcIsCjWinUdh3H0VH-m7xpQn13KFFdAFk/pub?w=572&amp;h=635"/>
<h2 data-nb="8.2" id="Classes">Classes</h2>
<p>Concrètement une classe est un nouveau type qu'on déclare. En Python cela s'écrit:</p>
<pre><code class="language-python">
		# ↓ Déclare une nouvelle classe.
		# Remarquez le M majuscule, le nom d'une classe commence par une majuscule
		class MonNouveauType:
			pass
	</code></pre>
<p><code>pass</code> est une instruction qui ne fait rien. Elle sert à créer un bloc d'instruction vide, car autrement ça serait incorrect syntaxiquement.
	</p>
<pre><code class="language-python">
		# ↓ "if" vide incorrect ❌: un bloc doit avoir au moins une ligne
		if True:

		# ↓ "if" vide correct ✔️: "pass" ne fait rien, parfait pour un bloc vide
		if True:
			pass
	</code></pre>
<p>Cette classe ne fait rien de spécial, mais elle existe. On démarre toujours en POO le nom d'une classe par une majuscule. C'est une convention. A part
		ça, son nom respecte les mêmes règles et limites que le nom des variables (pas d'espace, doit commencer par une lettre, pas de caractères autres que
		alpha-numériques et _). Maintenant on peut créer des variables de ce type:</p>
<pre><code class="language-python">
		# Crée une instance de la nouvelle classe
		ma_variable = MonNouveauType()
	</code></pre>
<p>On appelle la donnée vers laquelle pointe <code>ma_variable</code> un <strong>objet</strong>. Celui-ci est une <strong>instance</strong> de la classe
		<code>MonNouveauType</code>. On appelle aussi <strong>instanciation</strong> la création d'un nouvel objet, du verbe <strong>instancier</strong>.
		Attention à bien mettre les parenthèses <code>MonNouveauType()</code>, la classe s'appelle/s'execute/s'invoque comme une fonction, et sa valeur de
		retour est une nouvelle instance d'elle-même. Une classe est comme un modèle à partir duquel on créé des exemplaires spécifiques d'elle.</p>
<h2 data-nb="8.3" id="Méthodes">Méthodes</h2>
<p>Les instances de notre classe ne peuvent rien faire car elle est vide pour l'instant. Donnons-leur quelque chose à faire:</p>
<pre><code class="language-python">
		class MonNouveauType:
			def dire_bonjour(self):
				print("Bonjour")
	</code></pre>
<p>On vient de créer une fonction <code>dire_bonjour</code> à l'intérieur de la classe, qui prend un paramètre au nom étrange <code>self</code>, qui
		signifie "soi-même" en anglais. Cette fonction est une <strong>méthode</strong>. Une méthode sert à donner des actions possibles que nos objets pourront
		effectuer, sur eux-même, et/ou sur d'autres données. Elle s'utilise de la façon suivante:</p>
<pre><code class="language-python">
		ma_variable = MonNouveauType()

		# Appel de la méthode "dire_bonjour" de variable "ma_variable"
		ma_variable.dire_bonjour()
	</code></pre>
<p>On a appelé la méthode de l'objet <code>ma_variable</code>. Remarquez que le paramètre <code>self</code> n'est pas spécifié. Celui-ci est en fait la
		variable <code>ma_variable</code>, mais au moment de l'appel, on ne le précise pas, cela est fait automatiquement pour nous.</p>
<p>On peut passer d'autres paramètres aux méthodes, et on peut également utiliser le paramètre <code>self</code> dans le corps de la méthode</p>
<pre><code class="language-python">
		class MonNouveauType:
			def dire_bonjour(self, message):
				print("self =", self)
				print(type(self))
				print("Bonjour", message)

		ma_variable = MonNouveauType()
		ma_variable.dire_bonjour("à tous")
	</code></pre>
<pre class="affichage_console"><code>
self = &lt;__main__.MonNouveauType object at 0x000001D1ACFF02C8&gt;
&lt;class '__main__.MonNouveauType'&gt;
Bonjour à tous
&gt;</code></pre>
<p>On peut appeler des méthodes dans d'autres méthodes:</p>
<pre><code class="language-python">
		class MonNouveauType:

			def methodeA(self):
				print("Méthode A exécutée")

			def methodeB(self):
				print("Méthode B exécutée")
				self.methodeA()

		var1 = MonNouveauType()
		var1.methodeB()
	</code></pre>
<pre class="affichage_console"><code>
Méthode B exécutée
Méthode A exécutée
&gt;</code></pre>
<h2 data-nb="8.4" id="Attributs et constructeur">Attributs et constructeur</h2>
<p>Chacun de nos objets, en plus de leurs méthodes, peuvent aussi avoir leur propres données, qu'on appelle <strong>attributs</strong> ou <strong>variables
		d'instance</strong>. Celles-ci sont déclarées dans le <strong>constructeur</strong> de la classe:</p>
<pre><code class="language-python">
		class MonNouveauType:
			def __init__(self):
				self.un_attribut = "Salut"

			def dire_bonjour(self, message):
				print("self =", self)
				print(type(self))
				print("Bonjour", message)

		ma_variable = MonNouveauType()

		# On peut lire les attributs d'un objet
		print(ma_variable.un_attribut) # Affiche "Salut"

		# On peut aussi les modifier
		ma_variable.un_attribut = "Coucou"
	</code></pre>
<p>Le constructeur est unique dans chaque classe, c'est une méthode particulière qui a le nom <code>__init__</code> (double <code>_</code> de chaque côté),
		qui prend aussi <code>self</code> en paramètre. Cette méthode est appelée à chaque fois qu'on crée une nouvelle instance, elle sert à l'initialiser. En
		particulier, c'est dans le constructeur qu'on donne à l'objet ses attributs, qui sont des variables qui lui sont propres, attachées.</p>
<p>Le constructeur peut prendre d'autres paramètres que <code>self</code>, ce qui permet de configurer chaque objet au moment de leur création:</p>
<pre><code class="language-python">
		class MonNouveauType:

			# Un constructeur peut avoir des paramètres autres que self
			def __init__(self, un_prénom):
				self.prénom = un_prénom

			def dire_bonjour(self, message):
				# On peut lire (et modifier) les attributs dans les méthodes
				print("Bonjour", message, "! Je m'appelle", self.prénom)

		var1 = MonNouveauType("Toto")
		var2 = MonNouveauType("Adrien")

		var1.dire_bonjour("à tous")
		var2.dire_bonjour("tout le monde")
	</code></pre>
<pre class="affichage_console"><code>
Bonjour à tous ! Je m'appelle Toto
Bonjour tout le monde ! Je m'appelle Adrien
&gt;</code></pre>
<h2 data-nb="8.5" id="Exemple">Exemple</h2>
<pre><code class="language-python">
		# On créé une classe pour décrire des personnages dans un jeu.
		class Personnage:

			# Le constructeur, on devra fournir le nom initial de chaque nouveau perso.
			def __init__(self, nom_initial):
				# Création de l'attribut "nom".
				self.nom = nom_initial
				# Création de l'attribut "points_vie".
				self.points_vie = 100

			# Méthode pour qu'un perso puisse s'afficher facilement dans la console
			def afficher(self):
				print("Nom perso=", self.nom, "PV:", self.points_vie)

			# Méthode pour qu'un perso puisse attaquer un autre
			def attaquer_perso(self, perso_cible):
				perso_cible.points_vie -= 10

		# ↓ Instanciation de différents persos,
		# ↓ et appels de certaines de leurs méthodes.

		joueur = Personnage("Ulysse")
		joueur.afficher()

		ennemi = Personnage("Cyclope")
		ennemi.afficher()
		joueur.attaquer_perso(ennemi)
		ennemi.afficher()

		marchand = Personnage("Marchand")
		marchand.afficher()
		ennemi.attaquer_perso(marchand)
		marchand.afficher()

		boss = Personnage("Big guy")
		boss.afficher()
	</code></pre>
<!--h3>Héritage</h3>
	<p>Une classe peut être construite à partir d'une autre, on dit qu'elle <strong>hérite</strong> de cette autre classe. On dit aussi que c'est une <strong>classe
		enfant</strong> ou <strong>sous-classe</strong> de la <strong>classe mère</strong> ou <strong>classe parent</strong>. La classe enfant possède toutes
		les méthodes, et tous les attributs de la classe parents, et peut les modifier et en définir de nouveaux pour elle-même.</p>
	<p> Nous ne verrons pas cela plus en détail, mais il faut comprendre un minimum cette notion d'héritage pour pouvoir utiliser les exceptions.</p-->
<!--h2>Les exceptions</h2>
	<p>Vous avez déjà vu les exceptions. Quand on exécute une action qui peut renvoyer une exception, si on veut pouvoir gérer le cas où cela se produit, on écrit un bloc
	<code>try ... except ... finally</code></p>
	<pre><code class="language-python">
		class MonNouveauType:

			# Un constructeur peut avoir des paramètres autres que self
			def __init__(self, un_prénom):
				self.prénom = un_prénom

			def dire_bonjour(self, message):
				# On peut lire (et modifier) les attributs dans les méthodes
				print("Bonjour", message, "! Je m'appelle", self.prénom)

		var1 = MonNouveauType("Toto")
		var2 = MonNouveauType("Adrien")

		var1.dire_bonjour("à tous")
		var2.dire_bonjour("tout le monde")
	</code></pre-->





		<div class="nav_arrows">
			<hr>
			
		<div style="display: flex; flex-direction: row; justify-content: space-between; padding: 1em 0em;">
				<span>
					
						<a href="tp3.html">← Page précédente</a>
					
				</span>
			
				<span style="padding: 0 .5em;">
						<a href="index.html">1ère page</a>
					</span>
			
			<span>
				
					<a href="td2.html">Page suivante →</a>
				
				</span>
		</div>
		
		</div>

	</div>

	
		<style>
			@media only screen and (min-width: 70em) {
				#side_nav_bar {
					width: 25vw;
				}

				#contenu {
					width: 75vw;
				}
			}
		</style>
	


</div>
  
<script src="prism.js"></script>

<script>
	if (document.URL.indexOf("localhost") === -1) {
		//console.log("pas localhost");
		document.querySelector("link[rel = 'icon']").setAttribute("href", "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='200' height='200' viewBox='0 0 100 100' style='display:block; margin:auto; padding: 0 0 1em 0;'%3E%3Cstyle%3E text %7B text-align: center; fill: white; text-anchor: middle; font-size: 11pt; %3C/style%3E%3C!--	%3Crect fill='hsl(000,50%25, 50%25)' x='0' y='0' width='100' height='100'%3E%3C/rect%3E--%3E%3Crect fill='hsl(200,50%25, 50%25)' x='0' y='0' width='100' height='100'%3E%3C/rect%3E%3Ctext x='50' y='75' style='font-size: 50pt;' id='t'%3E 🐍 %3C/text%3E%3C!--	%3Canimate--%3E%3C!-- xlink:href='%23t'--%3E%3C!-- attributeName='y'--%3E%3C!-- calcMode='spline'--%3E%3C!-- values='60; 90; 60'--%3E%3C!-- keyTimes='0; 0.5; 1'--%3E%3C!-- keySplines='--%3E%3C!-- .42 0 1 1;--%3E%3C!-- 0 0 .59 1;'--%3E%3C!-- dur='2s'--%3E%3C!-- fill='freeze'--%3E%3C!-- repeatCount='indefinite'/%3E--%3E%3C/svg%3E");
	} else {
		//console.log("localhost");
	}
	// On supprime la première ligne des <pre><code> qui est considérée toujours vide et inutile
	const codes = document.querySelectorAll('pre[class="affichage_console"] code');
	
	codes.forEach(function (el) {
		// Attention: modifier textContent ou innerText d'un élément détruit tous ses éléments enfant :(
		//el.textContent = el.textContent.replace(/^\n/, '');
		// On modifie donc le premie noeud texte uniquement
		el.childNodes[0].textContent = el.childNodes[0].textContent.replace(/^\n/, ''); // suppose que c'est un élément texte
	});

	// On ajoute un <br> avant et après chaque <pre>
	let pres = document.querySelectorAll('pre, .exercices div.noté');
	pres.forEach(function (el) {
		el.parentNode.insertBefore(document.createElement('div'), el);
		el.parentNode.insertBefore(document.createElement('div'), el.nextSibling);
	});

	// On ajoute 'Affichage' avant chaque affichage console
	pres = document.querySelectorAll('pre[class="affichage_console"]');
	pres.forEach(function (el) {
		const p = document.createElement('p');
		p.innerHTML = `<small>↓ Affichage dans la console (ou dans le shell, selon où vous lancez l'exécution)<mall>`;
		p.classList.add("légende_placée_en_haut");
		el.parentNode.insertBefore(p, el);
	});

	// Cacher corrections dans les TD / TP, et permettre de les afficher
	let divs_correction = document.querySelectorAll('div[class="correction"]');
	divs_correction.forEach(function (div) {
		div.classList.add("correction_hidden");
		const p = document.createElement('p');
		p.innerHTML = `<span class="correction_lien_à_cliquer">📝 Afficher / cacher correction ✓</span>`;
		p.onclick = function (evt) {
			div.classList.toggle("correction_hidden");
		};
		div.parentNode.insertBefore(p, div);
	});
</script>
</body>
</html>