<!DOCTYPE html>
<html lang="fr">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>‚úèÔ∏è TP 9 - Boutique niv.2 ‚úîÔ∏è | Algo et prog 2 en Python</title>
	<link href="prism.css" rel="stylesheet"/>
	<link href="style.css" rel="stylesheet"/>
	<!--link rel="icon" href="img/favicon.svg"-->
	<link rel="icon"
			href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='200' height='200' viewBox='0 0 100 100' style='display:block; margin:auto; padding: 0 0 1em 0;'%3E%3Cstyle%3E text %7B text-align: center; fill: white; text-anchor: middle; font-size: 11pt; %3C/style%3E%3Crect fill='hsl(000,50%25, 50%25)' x='0' y='0' width='100' height='100'%3E%3C/rect%3E%3C!--	%3Crect fill='hsl(200,50%25, 50%25)' x='0' y='0' width='100' height='100'%3E%3C/rect%3E--%3E%3Ctext x='50' y='75' style='font-size: 50pt;' id='t'%3E üêç %3C/text%3E%3C!--	%3Canimate--%3E%3C!-- xlink:href='%23t'--%3E%3C!-- attributeName='y'--%3E%3C!-- calcMode='spline'--%3E%3C!-- values='60; 90; 60'--%3E%3C!-- keyTimes='0; 0.5; 1'--%3E%3C!-- keySplines='--%3E%3C!-- .42 0 1 1;--%3E%3C!-- 0 0 .59 1;'--%3E%3C!-- dur='2s'--%3E%3C!-- fill='freeze'--%3E%3C!-- repeatCount='indefinite'/%3E--%3E%3C/svg%3E">
</head>
<body>
<div id="conteneur">
	<div id="side_nav_bar">
		<!--svg xmlns="http://www.w3.org/2000/svg" width="200" height="200" viewBox="0 0 100 100" style="display:block; margin:auto; padding: 0 0 1em 0;">
	<style>
		text {
			text-align: center;
			fill: white;
			text-anchor: middle;
			font-size: 11pt;
		}
	</style>
	<rect fill="#4B8BBE" x="0" y="0" width="100" height="100"></rect>
	<text x="50" y="45" style="font-size: 30pt;">
		üêç

	</text>
	<text x="50" y="75" fill="#FFE873">
		Algo et prog 2
	</text>
	<text x="50" y="90" fill="#FFE873">
		en Python
	</text>
</svg-->

<div style="color:#4B8BBE; font-size: 200%; padding: 2%; text-align: center">
	Algo. et prog. 2 en
</div>
<img src="img/python-logo-generic.png" alt="Logo de Python" style="width: 100%; max-width: 19em; display:block; margin:auto;">
<div style="text-align: center; opacity: 0.5; font-size: small">Arnaud COUTURIER - Python 3.10</div>


























		<div class=" h h1">
			<!--span class="ballot_box">‚òí</span-->
			<a href="index.html">
				Introduction
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">‚òí</span-->
			<a href="cm_pass.html">
				L'instruction pass
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">‚òí</span-->
			<a href="cm_exceptions.html">
				Les exceptions
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">‚òí</span-->
			<a href="cm_spec_impl_versions.html">
				Sp√©cification, impl√©mentations et versions
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">‚òí</span-->
			<a href="cm_methodes_exec.html">
				Fa√ßons d'ex√©cuter un programme Python
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">‚òí</span-->
			<a href="cm_memoire_donnees.html">
				M√©moire et mod√®le de donn√©es
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">‚òí</span-->
			<a href="cm_prog_objets.html">
				Programmation objets
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">‚òí</span-->
			<a href="cm_namespaces_modules.html">
				Namespaces et modules
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">‚òí</span-->
			<a href="cm_sequences.html">
				Les s√©quences
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">‚òí</span-->
			<a href="cm_iterables.html">
				Iterables, iterators
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">‚òí</span-->
			<a href="cm_iterable_unpacking.html">
				Iterable unpacking
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">‚òí</span-->
			<a href="cm_boucles_avancees.html">
				Techniques avanc√©es sur les boucles
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">‚òí</span-->
			<a href="cm_fonc_params.html">
				Fonctions et param√®tres
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">‚òí</span-->
			<a href="cm_dict_set.html">
				Hash et dictionnaires
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">‚òí</span-->
			<a href="cm_compr_listes.html">
				Compr√©hension de listes
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">‚òí</span-->
			<a href="cm_manip_fich_texte.html">
				Manipulation de fichiers texte
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">‚òí</span-->
			<a href="td1.html">
				‚úçÔ∏è TD 1 - Calculatrice niv.1 ‚úîÔ∏è
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">‚òí</span-->
			<a href="tp1.html">
				‚úèÔ∏è TP 1 - Calculatrice niv.2 (‚úîÔ∏è)
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">‚òí</span-->
			<a href="td2.html">
				‚úçÔ∏è TD 2 - Prog. objets niv.1 (‚úîÔ∏è)
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">‚òí</span-->
			<a href="tp2.html">
				‚úèÔ∏è TP 2 - Calculatrice niv.3
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">‚òí</span-->
			<a href="cc1_2023.html">
				üìù Contr√¥le continu 1 ‚úîÔ∏è
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">‚òí</span-->
			<a href="td3.html">
				‚úçÔ∏è TD 3 (‚úîÔ∏è)
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">‚òí</span-->
			<a href="tp3.html">
				‚úèÔ∏è TP 3 - Calculatrice niv.4
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">‚òí</span-->
			<a href="tp4.html">
				‚úèÔ∏è TP 4 - Prog. objets niv.2
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">‚òí</span-->
			<a href="tp5.html">
				‚úèÔ∏è TP 5 - Prog. objets niv.3
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">‚òí</span-->
			<a href="tp6.html">
				‚úèÔ∏è TP 6 - Prog. objets niv.4
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">‚òí</span-->
			<a href="tp7_cach√©.html">
				‚úèÔ∏è TP 7 - Prog. objets niv.5 ‚úîÔ∏è
			</a>
		</div>

		<div class=" h h1">
			<!--span class="ballot_box">‚òí</span-->
			<a href="tp_boutique_1_cach√©.html">
				‚úèÔ∏è TP 8 - Boutique niv.1 ‚úîÔ∏è
			</a>
		</div>

		<div class="page_actuelle h h1">
			<!--span class="ballot_box">‚òê</span-->
			<a href="tp_boutique_2_cach√©.html">
				‚úèÔ∏è TP 9 - Boutique niv.2 ‚úîÔ∏è
			</a>
		</div>

	</div>
	<div id="contenu">
		


		
	<h1 data-nb="29" id="‚úèÔ∏è TP 9 - Boutique niv.2 ‚úîÔ∏è">‚úèÔ∏è TP 9 - Boutique niv.2 ‚úîÔ∏è</h1>
	


	<div class="exercice">
<h2 data-nb="29.1" id="Question 1: am√©liorer les couleurs des messages">Question 1: am√©liorer les couleurs des messages</h2>
<p>On veut trois cat√©gories de messages pour informer l'utilisateur, avec des couleurs diff√©rentes:</p>
<ul>
<li>Les messages d'erreur doivent √™tre en rouge</li>
<li>Les messages d'information doivent √™tre en jaune</li>
<li>Les messages de confirmation doivent √™tre en vert</li>
</ul>
<h2 data-nb="29.2" id="Question 2: message d'erreur imm√©diat en cas d'achat d'un produit inexistant">Question 2: message d'erreur imm√©diat en cas d'achat d'un produit inexistant</h2>
<p>Un petit d√©tail, mais le genre qui compte beaucoup pour le confort de l'utilisateur: dans la version pr√©c√©dente du programme, quand on ach√®te un
			produit, si le code produit entr√© par l'utilisateur n'existe pas, le message d'erreur s'affiche APRES avoir entr√© la quantit√© √† acheter. Il ne
			faudrait m√™me pas demander la quantit√© √† l'utilisateur si le code est inexistant ‚Üì</p>
<video controls="" preload="none" src="img/boutique/exo3_code_achat_inexistant_crf30.mp4"></video>
<h2 data-nb="29.3" id="Question 3: lettres significatives sont soulign√©es dans les options des menus">Question 3: lettres significatives sont soulign√©es dans les options des menus</h2>
<p>A chaque fois que l'utilisateur doit faire un choix d'action, la ou les lettres qu'il doit √©crire sont soulign√©es si elles correspondent √† des
			raccourcis. Par exemple souligner la lettre "q" dans l'option "Quitter" si l'action √† entrer est "q", ce qui donne <code><span style="text-decoration: underline">Q</span>uitter</code>. Ou encore <code><span style="text-decoration: underline">S</span>upprimer <span style="text-decoration: underline">p</span>roduit</code> si l'action √† entrer est "sp".</p>
<h2 data-nb="29.4" id="Question 4: ajout sous-menu pour modification des vendeurs et leurs produits">Question 4: ajout sous-menu pour modification des vendeurs et leurs produits</h2>
<p>En plus de faire ses achats, l'utilisateur peut prendre le r√¥le de gestionnaire du march√© et le modifier. Cela est sans "protection" pour le moment,
			mais libre √† vous d'ajouter la demande d'un mot de passe si vous le souhaitez. R√©organisez le menu du programme en menu principal et 2 sous-menus
			pour les achats et pour les ventes. Ajouter un sous-menu de vente qui propose les actions suivantes (les actions en elles-m√™mes seront d√©taill√©es et
			√† faire dans les questions suivantes):</p>
<ul>
<li>Modifier les vendeurs existants</li>
<li>Supprimer des vendeurs</li>
<li>Ajouter des nouveaux vendeurs</li>
</ul>
<video controls="" preload="none" src="img/boutique/exo3_achat_vente_crf30.mp4"></video>
<h2 data-nb="29.5" id="Question 5: ajout / suppression de vendeurs">Question 5: ajout / suppression de vendeurs</h2>
<p>Impl√©menter les options pour cr√©er des nouveaux vendeurs (sans leurs produits, √ßa se fera par l'option de modification d'un vendeur) et aussi pour
			supprimer des vendeurs, avec gestion des erreurs et messages de confirmation que la modification a bien √©t√© faite ‚Üì</p>
<video controls="" preload="none" src="img/boutique/exo3_ajout_suppr_vendeur_crf30.mp4"></video>
<h2 data-nb="29.6" id="Question 6: modification de vendeurs">Question 6: modification de vendeurs</h2>
<p>Impl√©menter les options pour modifier des vendeurs. Ces options doivent √™tre dans un sous-menu de modification d'un vendeur en particulier, et
			permettent de faire les actions suivantes:</p>
<ul>
<li>
<p>Modifier nom, m√©tier et portrait d'un vendeur, avec gestion des erreurs et messages de confirmation que la modification a bien √©t√© faite
					‚Üì</p>
<video controls="" preload="none" src="img/boutique/exo3_modif_vendeur_crf30.mp4"></video>
</li>
<li>
<p>Ajouter et supprimer des produits pour un vendeur, avec gestion des erreurs et messages de confirmation que la modification a bien √©t√© faite
					‚Üì</p>
<video controls="" preload="none" src="img/boutique/exo3_modif_produits_crf30.mp4"></video>
</li>
</ul>
<h2 data-nb="29.7" id="Question 7: sauvegarde et chargement de la boutique">Question 7: sauvegarde et chargement de la boutique</h2>
<p>Faire en sorte que la boutique soit charg√©e automatiquement depuis un fichier au lancement du programme, et sauvegard√©e automatiquement dans le m√™me
			fichier lorsqu'on quitte le programme.</p>
<video controls="" preload="none" src="img/boutique/exo3_sauvegarde_boutique_crf30.mp4"></video>
		
		
		
		  
		  
		
		
		
		
		
		
		

		
			<div class="correction">
<h2 data-nb="29.8" id="Fichier boutique.py">Fichier boutique.py</h2>
<p>C'est le fichier qui contient les donn√©es de la boutique (vendeurs et leurs produits) dans un dict. Il est normalement charg√© et
					potentiellement modifi√© par le programme, mais peut l'√™tre √† la main aussi, tant que le format du dict (cl√©s n√©cessaires pr√©sentes) attendu
					par le programme est respect√©.</p>
<pre class="line-numbers"><code class="language-python">
vendeurs = {'Julie': {'m√©tier': 'P√¢tissi√®re',
           'portrait': 'üë©\u200düç≥',
           'produits': {'c': {"francs √† l'unit√©": 200,
                              'icone': 'üç™',
                              'nom': 'Cookies aux p√©pites de chocolat'},
                        'd': {"francs √† l'unit√©": 150,
                              'icone': 'üç©',
                              'nom': 'Donuts sauce choco'},
                        'g': {"francs √† l'unit√©": 170,
                              'icone': 'üç∞',
                              'nom': 'Parts de gateau cr√®me fra√Æche'}}},
 'Susie': {'m√©tier': 'Agricultrice',
           'portrait': 'üë©\u200düåæ',
           'produits': {'ora': {"francs √† l'unit√©": 110,
                                'icone': 'üçä',
                                'nom': 'Oranges locales'},
                        'poi': {"francs √† l'unit√©": 70,
                                'icone': 'üçê',
                                'nom': 'Poires import NZ'},
                        'pom': {"francs √† l'unit√©": 50,
                                'icone': 'üçé',
                                'nom': 'Pommes import NZ'}}},
 'Thomas': {'m√©tier': 'P√™cheur',
            'portrait': 'üßî‚öì',
            'produits': {'bec': {"francs √† l'unit√©": 450,
                                 'icone': 'üêü',
                                 'nom': 'Becs de canne'},
                         'cra': {"francs √† l'unit√©": 700,
                                 'icone': 'ü¶Ä',
                                 'nom': 'Crabes de mangrove'},
                         'cre': {"francs √† l'unit√©": 150,
                                 'icone': 'ü¶ê',
                                 'nom': 'Crevettes moyennes'}}}}
				</code></pre>
<h2 data-nb="29.9" id="Fichier main.py">Fichier main.py</h2>
<pre class="line-numbers"><code class="language-python">
import time
# le chargement de la boutique se fait par l'importation de ce module "boutique" qui contient le dict des donn√©es
import boutique
# pprint servira √† enregistrer le dict de la boutique dans boutique.py sous une forme plus lisible et facile √† modifier manuellement si besoin
import pprint

# Quelques ic√¥nes pour les tests: üë® üçè
vendeurs = boutique.vendeurs


def sauvegarder_boutique(chemin_fichier):
	f = open(chemin_fichier, "w", encoding="utf-8")
	# f.write("vendeurs = " + str(vendeurs))
	f.write("vendeurs = " + pprint.pformat(vendeurs))
	f.close()


def afficher_boutique():
	print('Bienvenue au march√© üè™, voici nos vendeurs:')
	# print()
	for nom_vendeur, description_vendeur in vendeurs.items():
		print(description_vendeur['portrait'] + '  ' + nom_vendeur + ' (' + description_vendeur['m√©tier'] + ') vend:')
		for code_produit, description_produit in description_vendeur['produits'].items():
			desc_produit_str = '\t' + description_produit['icone'] + '  ' + description_produit['nom']
			desc_produit_str += ' (code: ' + code_produit + '), ' + str(description_produit["francs √† l'unit√©"]) + ' F/unit√©'
			print(desc_produit_str)


panier_client = {}


def retrouver_produit(code_produit_√†_retrouver):
	for nom_vendeur, vendeur in vendeurs.items():
		for code_produit, produit in vendeur["produits"].items():
			if code_produit == code_produit_√†_retrouver:
				return produit


argent = 5000


# retourne 0 si tout s'est bien pass√©, 1 si le produit sp√©cifi√© n'existe pas, 2 s'il n'y a pas assez d'argent, 3 si quantit√© est 0 ou n√©gatif
def ajouter_articles_dans_panier(code_produit_√†_ajouter, quantit√©):
	if quantit√© &lt;= 0:
		return 3

	produit_√†_ajouter = retrouver_produit(code_produit_√†_ajouter)
	if not produit_√†_ajouter:
		return 1

	global argent
	prix_produit = produit_√†_ajouter["francs √† l'unit√©"] * quantit√©
	if prix_produit &gt; argent:
		return 2

	argent -= prix_produit

	if code_produit_√†_ajouter not in panier_client:
		panier_client[code_produit_√†_ajouter] = {
			'produit': produit_√†_ajouter,
			'quantit√©': quantit√©
		}
	else:
		panier_client[code_produit_√†_ajouter]['quantit√©'] += quantit√©

	return 0


# retourne 0 si tout s'est bien pass√©, 1 si le panier ne contient pas le produit sp√©cifi√©
def supprimer_produit_du_panier(code_produit_√†_supprimer):
	if code_produit_√†_supprimer not in panier_client:
		return 1

	argent_r√©cup√©r√© = panier_client[code_produit_√†_supprimer]["produit"]["francs √† l'unit√©"] * panier_client[code_produit_√†_supprimer]["quantit√©"]
	global argent
	argent += argent_r√©cup√©r√©
	del panier_client[code_produit_√†_supprimer]

	return 0


def afficher_panier():
	print('\x1b[38;2;255;255;100;48;2;100;100;100m'"üí∞ Vous disposez de:", str(argent), 'F', '\x1b[0m')
	if len(panier_client) == 0:
		print("üõí Votre panier est vide")
	else:
		print("üõí Votre panier contient:")
		for code_produit, produit in panier_client.items():
			print((produit['produit']['icone'] + ' ') * produit['quantit√©'], str(produit['quantit√©']), produit['produit']['nom'])


# ajouter_articles_dans_panier('cra', 2)
# ajouter_articles_dans_panier('pom', 4)


def afficher_message_erreur(msg):
	print('\x1b[38;2;255;0;0m‚ö†', msg, '\x1b[0m')
	time.sleep(2)


def afficher_message_confirmation(msg):
	print('\x1b[38;2;0;255;0m‚úì', msg, '\x1b[0m')


def afficher_message_info(msg):
	print('\x1b[38;2;255;255;0m', msg, '\x1b[0m')


def souligner_lettres_indices(chaine: str, indices):
	resultat = list(chaine)
	for i in indices:
		resultat[i] = '\x1b[4m' + chaine[i] + '\x1b[0m'
	return ''.join(resultat)


r√©ponse_utilisateur = ''
MODE_UTILISATEUR_AUCUN = 0
MODE_UTILISATEUR_ACHAT = 1
MODE_UTILISATEUR_VENTE = 2
mode_utilisateur = MODE_UTILISATEUR_AUCUN
MODE_VENTE_AUCUN = 0
MODE_VENTE_MODIF_VENDEUR = 1
mode_vente = MODE_VENTE_AUCUN
nom_vendeur_en_cours_de_modif = None
afficher_message_confirmation("Boutique charg√©e")
while True:
	afficher_boutique()

	if MODE_UTILISATEUR_AUCUN == mode_utilisateur:
		print("Que voulez-vous faire?")
		print("- (a) " + souligner_lettres_indices("Acheter", [0]))
		print("- (v) " + souligner_lettres_indices("Vendre", [0]))
		print("- (q) " + souligner_lettres_indices("Quitter", [0]))
		r√©ponse_utilisateur = input()
		if 'a' == r√©ponse_utilisateur:
			mode_utilisateur = MODE_UTILISATEUR_ACHAT
		elif 'v' == r√©ponse_utilisateur:
			mode_utilisateur = MODE_UTILISATEUR_VENTE
		elif 'q' == r√©ponse_utilisateur:
			afficher_message_info("A bient√¥t.")
			# try:
			sauvegarder_boutique("boutique.py")
			afficher_message_confirmation("(Boutique sauvegard√©e)")

			# except:
			# 	afficher_message_erreur("(Erreur lors de la sauvegarde de la boutique)")
			break

	elif MODE_UTILISATEUR_ACHAT == mode_utilisateur:
		afficher_panier()
		print("[ACHAT] Que voulez-vous faire?")
		print("- (a) " + souligner_lettres_indices("Ajouter des articles au panier", [0]))
		print("- (s) " + souligner_lettres_indices("Supprimer des articles du panier", [0]))
		print("- (q) " + souligner_lettres_indices("Confirmer commande et revenir en arri√®re", []))
		r√©ponse_utilisateur = input()

		if r√©ponse_utilisateur == 'a':
			code_produit = input("Code produit: ")
			if not retrouver_produit((code_produit)):
				afficher_message_erreur('Le code produit "' + code_produit + '" n\'existe pas.')
				continue
			quantit√© = input("Quantit√©: ")
			try:
				quantit√© = int(quantit√©)
			except ValueError:
				afficher_message_erreur("Veuillez entrer un nombre entier positif pour la quantit√©.")
				continue
			r√©sultat = ajouter_articles_dans_panier(code_produit, quantit√©)

			# if r√©sultat == 1: &lt;= CE CAS EST DEJA TRAITE plus haut
			# 	afficher_message_erreur('Le code produit "' + code_produit + '" n\'existe pas.')
			if r√©sultat == 2:
				afficher_message_erreur("Vous n'avez pas assez d'argent pour en acheter autant.")
			elif r√©sultat == 3:
				afficher_message_erreur('Quantit√© insuffisante')
			elif r√©sultat == 0:
				afficher_message_confirmation("Vos produits ont √©t√© ajout√©s √† votre panier")

		elif r√©ponse_utilisateur == 's':
			code_produit = input("Code produit: ")
			r√©sultat = supprimer_produit_du_panier(code_produit)
			if r√©sultat == 1:
				afficher_message_erreur('Le code produit "' + code_produit + '" n\'existe pas dans votre panier.')
			elif r√©sultat == 0:
				afficher_message_confirmation("Vos produits ont √©t√© supprim√©s de votre panier")

		elif r√©ponse_utilisateur == 'q':
			afficher_message_confirmation("Vous recevrez bient√¥t votre commande. Merci pour votre visite!")
			mode_utilisateur = MODE_UTILISATEUR_AUCUN

	elif MODE_UTILISATEUR_VENTE == mode_utilisateur:
		if MODE_VENTE_AUCUN == mode_vente:
			print("[VENTE] Que voulez-vous faire?")
			print("- (m) " + souligner_lettres_indices("Modifier vendeur existant", [0]))
			print("- (c) " + souligner_lettres_indices("Cr√©er nouveau vendeur", [0]))
			print("- (s) " + souligner_lettres_indices("Supprimer un vendeur", [0]))
			print("- (q) " + souligner_lettres_indices("Revenir en arri√®re", []))
			r√©ponse_utilisateur = input()
			if 'm' == r√©ponse_utilisateur:
				nom_vendeur = input("Nom du vendeur: ")
				if nom_vendeur not in vendeurs:
					afficher_message_erreur("Ce vendeur n'existe pas.")
					continue
				nom_vendeur_en_cours_de_modif = nom_vendeur
				mode_vente = MODE_VENTE_MODIF_VENDEUR

			elif 'c' == r√©ponse_utilisateur:
				nom_vendeur = input("Nom du vendeur: ")
				m√©tier_vendeur = input("M√©tier: ")
				portrait_vendeur = input("Portrait: ")  # portrait pour tests: üë®
				vendeurs[nom_vendeur] = {
					'portrait': portrait_vendeur,
					'm√©tier': m√©tier_vendeur,
					'produits': {}
				}
				afficher_message_confirmation("Vendeur cr√©√©")

			elif 's' == r√©ponse_utilisateur:
				nom_vendeur = input("Nom du vendeur: ")
				try:
					del vendeurs[nom_vendeur]
				except KeyError:
					afficher_message_erreur("Ce vendeur n'existe pas")
					continue
				afficher_message_confirmation("Vendeur supprim√©")

			elif 'q' == r√©ponse_utilisateur:
				mode_utilisateur = MODE_UTILISATEUR_AUCUN

		elif MODE_VENTE_MODIF_VENDEUR == mode_vente:
			print("[MODIF VENDEUR " + nom_vendeur_en_cours_de_modif + "] Que voulez-vous faire?")
			print("- (mn) " + souligner_lettres_indices("Modifier nom", [0, 9]))
			print("- (mp) " + souligner_lettres_indices("Modifier portrait", [0, 9]))
			print("- (mm) " + souligner_lettres_indices("Modifier m√©tier", [0, 9]))
			print("- (ap) " + souligner_lettres_indices("Ajouter un produit", [0, 11]))
			print("- (sp) " + souligner_lettres_indices("Supprimer un produit", [0, 13]))
			# print("- (mp) " + souligner_lettres_indices("Modifier un produit", [0, 12])) A FAIRE
			print("- (q) " + souligner_lettres_indices("Revenir en arri√®re", []))
			r√©ponse_utilisateur = input()

			if 'mn' == r√©ponse_utilisateur:
				nouveau_nom_vendeur = input("Nouveau nom du vendeur: ")
				infos_vendeur = vendeurs[nom_vendeur_en_cours_de_modif]
				del vendeurs[nom_vendeur_en_cours_de_modif]
				vendeurs[nouveau_nom_vendeur] = infos_vendeur
				nom_vendeur_en_cours_de_modif = nouveau_nom_vendeur
				afficher_message_confirmation("Nom du vendeur modifi√©")

			elif 'mp' == r√©ponse_utilisateur:
				portrait = input("Nouveau portrait du vendeur: ")
				vendeurs[nom_vendeur_en_cours_de_modif]["portrait"] = portrait
				afficher_message_confirmation("Portrait du vendeur modifi√©")

			elif 'mm' == r√©ponse_utilisateur:
				m√©tier = input("Nouveau m√©tier du vendeur: ")
				vendeurs[nom_vendeur_en_cours_de_modif]["m√©tier"] = m√©tier
				afficher_message_confirmation("M√©tier du vendeur modifi√©")

			elif 'ap' == r√©ponse_utilisateur:
				code_produit = input("Code produit (doit √™tre unique pour TOUS les produits de la boutique): ")
				if retrouver_produit(code_produit):
					afficher_message_erreur("Ce code produit existe d√©j√†")
					continue
				prix_produit = input("Prix produit (nombre): ")
				nom_produit = input("Nom produit: ")
				try:
					prix_produit = float(prix_produit)
					if prix_produit &lt;= 0:
						# On peut provoquer une exception avec l'instruction raise
						# On pourrait aussi s'en sortir de fa√ßon plus classique, sans raise
						raise ValueError
				except ValueError:
					afficher_message_erreur("Le prix doit √™tre un nombre entier ou √† virgule, strictement positif")
					continue
				icone_produit = input("Ic√¥ne produit: ")
				# Une nouvelle ic√¥ne pour tester: üçè
				vendeurs[nom_vendeur_en_cours_de_modif]["produits"][code_produit] = {
					"nom": nom_produit,
					"francs √† l'unit√©": prix_produit,
					'icone': icone_produit,
				}
				afficher_message_confirmation("Produit ajout√©")

			elif 'sp' == r√©ponse_utilisateur:
				code_produit = input("Code produit: ")
				try:
					del vendeurs[nom_vendeur_en_cours_de_modif]["produits"][code_produit]
				except KeyError:
					afficher_message_erreur(nom_vendeur_en_cours_de_modif + " ne vend pas ce produit")
					continue
				afficher_message_confirmation("Produit supprim√©")

			# A FAIRE
			# elif 'mp' == r√©ponse_utilisateur:
			# 	pass

			elif 'q' == r√©ponse_utilisateur:
				mode_vente = MODE_VENTE_AUCUN
				</code></pre>
</div>
		
	</div>


		<div class="nav_arrows" style=" margin-bottom: 1em;">

			<div style="text-align: center; opacity: 0.5; font-size: small">

			</div>
		</div>

	</div>

	
		<style>
			@media only screen and (min-width: 70em) {
				#side_nav_bar {
					width: 25vw;
				}

				#contenu {
					width: 75vw;
				}
			}
		</style>
	


</div>
  
<script src="prism.js"></script>

<script>
	if (document.URL.indexOf("localhost") === -1) {
		//console.log("pas localhost");
		document.querySelector("link[rel = 'icon']").setAttribute("href", "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='200' height='200' viewBox='0 0 100 100' style='display:block; margin:auto; padding: 0 0 1em 0;'%3E%3Cstyle%3E text %7B text-align: center; fill: white; text-anchor: middle; font-size: 11pt; %3C/style%3E%3C!--	%3Crect fill='hsl(000,50%25, 50%25)' x='0' y='0' width='100' height='100'%3E%3C/rect%3E--%3E%3Crect fill='hsl(200,50%25, 50%25)' x='0' y='0' width='100' height='100'%3E%3C/rect%3E%3Ctext x='50' y='75' style='font-size: 50pt;' id='t'%3E üêç %3C/text%3E%3C!--	%3Canimate--%3E%3C!-- xlink:href='%23t'--%3E%3C!-- attributeName='y'--%3E%3C!-- calcMode='spline'--%3E%3C!-- values='60; 90; 60'--%3E%3C!-- keyTimes='0; 0.5; 1'--%3E%3C!-- keySplines='--%3E%3C!-- .42 0 1 1;--%3E%3C!-- 0 0 .59 1;'--%3E%3C!-- dur='2s'--%3E%3C!-- fill='freeze'--%3E%3C!-- repeatCount='indefinite'/%3E--%3E%3C/svg%3E");
	} else {
		//console.log("localhost");
	}
	// On supprime la premi√®re ligne des <pre><code> qui est consid√©r√©e toujours vide et inutile
	const codes = document.querySelectorAll('pre[class="affichage_console"] code');
	
	codes.forEach(function (el) {
		// Attention: modifier textContent ou innerText d'un √©l√©ment d√©truit tous ses √©l√©ments enfant :(
		//el.textContent = el.textContent.replace(/^\n/, '');
		// On modifie donc le premie noeud texte uniquement
		el.childNodes[0].textContent = el.childNodes[0].textContent.replace(/^\n/, ''); // suppose que c'est un √©l√©ment texte
	});

	// On ajoute un <br> avant et apr√®s chaque <pre>
	let pres = document.querySelectorAll('pre, .exercices div.not√©');
	pres.forEach(function (el) {
		el.parentNode.insertBefore(document.createElement('div'), el);
		el.parentNode.insertBefore(document.createElement('div'), el.nextSibling);
	});

	// On ajoute 'Affichage' avant chaque affichage console
	pres = document.querySelectorAll('pre[class="affichage_console"]');
	pres.forEach(function (el) {
		const p = document.createElement('p');
		p.innerHTML = `<small>‚Üì Affichage dans la console (ou dans le shell, selon o√π vous lancez l'ex√©cution)<mall>`;
		p.classList.add("l√©gende_plac√©e_en_haut");
		el.parentNode.insertBefore(p, el);
	});

	// Cacher corrections dans les TD / TP, et permettre de les afficher
	let divs_correction = document.querySelectorAll('div[class="correction"]');
	divs_correction.forEach(function (div) {
		div.classList.add("correction_hidden");
		const p = document.createElement('p');
		p.innerHTML = `<span class="correction_lien_√†_cliquer">üìù Afficher / cacher correction ‚úì</span>`;
		p.onclick = function (evt) {
			div.classList.toggle("correction_hidden");
		};
		div.parentNode.insertBefore(p, div);
	});
</script>
</body>
</html>