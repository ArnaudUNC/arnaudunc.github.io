<!DOCTYPE html>
<html lang="fr">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>✏️ TP 2 - Calculatrice niv.3 ✔️ | Algo et prog 2 en Python</title>
	<link href="prism.css" rel="stylesheet"/>
	<link href="style.css" rel="stylesheet"/>
	<!--link rel="icon" href="img/favicon.svg"-->
	<link rel="icon"
			href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='200' height='200' viewBox='0 0 100 100' style='display:block; margin:auto; padding: 0 0 1em 0;'%3E%3Cstyle%3E text %7B text-align: center; fill: white; text-anchor: middle; font-size: 11pt; %3C/style%3E%3Crect fill='hsl(000,50%25, 50%25)' x='0' y='0' width='100' height='100'%3E%3C/rect%3E%3C!--	%3Crect fill='hsl(200,50%25, 50%25)' x='0' y='0' width='100' height='100'%3E%3C/rect%3E--%3E%3Ctext x='50' y='75' style='font-size: 50pt;' id='t'%3E 🐍 %3C/text%3E%3C!--	%3Canimate--%3E%3C!-- xlink:href='%23t'--%3E%3C!-- attributeName='y'--%3E%3C!-- calcMode='spline'--%3E%3C!-- values='60; 90; 60'--%3E%3C!-- keyTimes='0; 0.5; 1'--%3E%3C!-- keySplines='--%3E%3C!-- .42 0 1 1;--%3E%3C!-- 0 0 .59 1;'--%3E%3C!-- dur='2s'--%3E%3C!-- fill='freeze'--%3E%3C!-- repeatCount='indefinite'/%3E--%3E%3C/svg%3E">
</head>
<body>
<div id="conteneur">
	<div id="side_nav_bar">
		<svg xmlns="http://www.w3.org/2000/svg" width="200" height="200" viewBox="0 0 100 100" style="display:block; margin:auto; padding: 0 0 1em 0;">
	<style>
		text {
			text-align: center;
			fill: white;
			text-anchor: middle;
			font-size: 11pt;
		}
	</style>
	<rect fill="hsl(200,50%, 50%)" x="0" y="0" width="100" height="100"></rect>
	<text x="50" y="45" style="font-size: 30pt;">
		🐍

	</text>
	<text x="50" y="75">
		Algo et prog 2
	</text>
	<text x="50" y="90">
		en Python
	</text>
</svg>

	
			<div class="h h1">
				<!--span class="ballot_box">☒</span-->
				<a href="index.html#Introduction">
					Introduction
				</a>
			</div>
	

	
			<div class="h h1">
				<!--span class="ballot_box">☒</span-->
				<a href="groupes.html#Groupes de TD / TP">
					Groupes de TD / TP
				</a>
			</div>
	

	
			<div class="h h1">
				<!--span class="ballot_box">☒</span-->
				<a href="cm1.html#📖 Cours 1: rappels">
					📖 Cours 1: rappels
				</a>
			</div>
	

	
			<div class="h h1">
				<!--span class="ballot_box">☒</span-->
				<a href="td1.html#✏️ TD 1 - Calculatrice niv.1 ✔️">
					✏️ TD 1 - Calculatrice niv.1 ✔️
				</a>
			</div>
	

	
			<div class="h h1">
				<!--span class="ballot_box">☒</span-->
				<a href="tp1.html#✏️ TP 1 - Calculatrice niv.2 ✔️">
					✏️ TP 1 - Calculatrice niv.2 ✔️
				</a>
			</div>
	

	
			<div class="page_actuelle h h1">
				<!--span class="ballot_box">☐</span-->
				<a href="#✏️ TP 2 - Calculatrice niv.3 ✔️">
					✏️ TP 2 - Calculatrice niv.3 ✔️
				</a>
			</div>
			<div class="page_actuelle h h2">
				<!--span class="ballot_box">☐</span-->
				<a href="#Question 1">
					Question 1
				</a>
			</div>
			<div class="page_actuelle h h2">
				<!--span class="ballot_box">☐</span-->
				<a href="#Question 2">
					Question 2
				</a>
			</div>
			<div class="page_actuelle h h2">
				<!--span class="ballot_box">☐</span-->
				<a href="#Question 3">
					Question 3
				</a>
			</div>
	

	
			<div class="h h1">
				<!--span class="ballot_box">☐</span-->
				<a href="tp3.html#✏️ TP 3 - Calculatrice niv.4 ✔️">
					✏️ TP 3 - Calculatrice niv.4 ✔️
				</a>
			</div>
	

	
			<div class="h h1">
				<!--span class="ballot_box">☐</span-->
				<a href="cm2.html#📖 Cours 2: Programmation orientée objets">
					📖 Cours 2: Programmation orientée objets
				</a>
			</div>
	

	
			<div class="h h1">
				<!--span class="ballot_box">☐</span-->
				<a href="td2.html#✏️ TD 2 - Prog. objets niv.1 ✔️">
					✏️ TD 2 - Prog. objets niv.1 ✔️
				</a>
			</div>
	

	
			<div class="h h1">
				<!--span class="ballot_box">☐</span-->
				<a href="tp4.html#✏️ TP 4 - Prog. objets niv.2 ✔️">
					✏️ TP 4 - Prog. objets niv.2 ✔️
				</a>
			</div>
	

	
			<div class="h h1">
				<!--span class="ballot_box">☐</span-->
				<a href="tp5.html#✏️ TP 5 - Prog. objets niv.3 ✔️">
					✏️ TP 5 - Prog. objets niv.3 ✔️
				</a>
			</div>
	

	
			<div class="h h1">
				<!--span class="ballot_box">☐</span-->
				<a href="tp6.html#✏️ TP 6 - Prog. objets niv.4 ✔️">
					✏️ TP 6 - Prog. objets niv.4 ✔️
				</a>
			</div>
	

	
			<div class="h h1">
				<!--span class="ballot_box">☐</span-->
				<a href="tp7.html#✏️ TP 7 - Prog. objets niv.5 ✔️">
					✏️ TP 7 - Prog. objets niv.5 ✔️
				</a>
			</div>
	

	
			<div class="h h1">
				<!--span class="ballot_box">☐</span-->
				<a href="cm3.html#📖 Cours 3: fonctionnalités de Python">
					📖 Cours 3: fonctionnalités de Python
				</a>
			</div>
	

	
			<div class="h h1">
				<!--span class="ballot_box">☐</span-->
				<a href="td3.html#✏️ TD 3 ✔️">
					✏️ TD 3 ✔️
				</a>
			</div>
	

	
			<div class="h h1">
				<!--span class="ballot_box">☐</span-->
				<a href="cm4.html#📖 Cours 4: rappels et compléments">
					📖 Cours 4: rappels et compléments
				</a>
			</div>
	

	
			<div class="h h1">
				<!--span class="ballot_box">☐</span-->
				<a href="tp8.html#✏️ TP 8 ✔️">
					✏️ TP 8 ✔️
				</a>
			</div>
	

	
			<div class="h h1">
				<!--span class="ballot_box">☐</span-->
				<a href="tp9.html#✏️ TP 9 - Jeu du pendu niv.1">
					✏️ TP 9 - Jeu du pendu niv.1
				</a>
			</div>
	

	
			<div class="h h1">
				<!--span class="ballot_box">☐</span-->
				<a href="tp10.html#✏️ TP 10 - Jeu du pendu niv.2">
					✏️ TP 10 - Jeu du pendu niv.2
				</a>
			</div>
	

	
			<div class="h h1">
				<!--span class="ballot_box">☐</span-->
				<a href="tp11.html#✏️ TP 11 - Jeu du pendu niv.3">
					✏️ TP 11 - Jeu du pendu niv.3
				</a>
			</div>
	

	
			<div class="h h1">
				<!--span class="ballot_box">☐</span-->
				<a href="exos_notes.html#📝 Exercices notés">
					📝 Exercices notés
				</a>
			</div>
	

	
			<div class="h h1">
				<!--span class="ballot_box">☐</span-->
				<a href="cc1_2021.html#📝 Contrôle continu 1">
					📝 Contrôle continu 1
				</a>
			</div>
	

	</div>
	<div id="contenu">
		

		<div class="nav_arrows">
		<div style="display: flex; flex-direction: row; justify-content: space-between; padding: 1em 0em;">
				<span>
					
						<a href="tp1.html">← Page précédente</a>
					
				</span>
			
				<span style="padding: 0 .5em;">
						<a href="index.html">1ère page</a>
					</span>
			
			<span>
				
					<a href="tp3.html">Page suivante →</a>
				
				</span>
		</div>
		</div>
		<hr>

		
	<h1 data-nb="6" id="✏️ TP 2 - Calculatrice niv.3 ✔️">✏️ TP 2 - Calculatrice niv.3 ✔️</h1>
<div class="exercice">
<h2 data-nb="6.1" id="Question 1">Question 1</h2>
<p>Partant de la solution du dernier exercice du TP précédent, forcer l'utilisateur à ne pouvoir entrer que l'une des 4 opérations autorisées: addition,
			soustraction, division, multiplication.</p>
<p>S'il / elle entre n'importe quoi d'autre, le programme affiche un message d'erreur adapté, et redemande encore et encore l'opération, jusqu'à ce que
			celle-ci soit l'une de celles permises.</p>
<div class="correction">
<pre class="line-numbers"><code class="language-python">
				def avoir_nombre_utilisateur(message):
					nb_est_correct = False
					while not nb_est_correct:
						txt_utilisateur = input(message)
						try:
							nombre = float(txt_utilisateur)
							nb_est_correct = True
						except:
							print(txt_utilisateur, "n'est pas un nombre")
					return nombre


				# Obtenir nombres
				nb1 = avoir_nombre_utilisateur("Nombre 1: ")
				nb2 = avoir_nombre_utilisateur("Nombre 2: ")

				# Obtenir op
				opération_est_correcte = False
				while not opération_est_correcte:
					op = input("Opération (+,-,*,/): ")
					# ↓ L'opérateur booléen "in" renvoit True ou False.
					# True si ce qui est à sa gauche EST DANS la séquence à sa droite,
					# donc ici si op est égal à n'importe lequel des éléments de la liste.
					opération_est_correcte = op in ["+", "-", "/", "*", ]
					if not opération_est_correcte:
						print(op, "n'est pas une opération supportée")

				# Calculer et afficher résultat
				if op == "+":
					print(nb1, "+", nb2, "=", nb1 + nb2)
				elif op == "-":
					print(nb1, "-", nb2, "=", nb1 - nb2)
				elif op == "/":
					print(nb1, "/", nb2, "=", nb1 / nb2)
				else:
					print(nb1, "*", nb2, "=", nb1 * nb2)
			</code></pre>
<p>Remarques:</p>
<ul>
<li><p>Ne pas confondre le <code>try-except</code> avec le <code>if-else</code>.</p>
<p><code>if-else</code> sert à faire telle ou telle action selon une condition, par exemple si l'utilisateur n'a pas entré une opération
						supportée (+,-,/,*). </p>
<p><code>try-except</code> sert à garder le contrôle sur l'exécution du programme en cas d'erreur (erreur au sens exécution impossible par
						Python, pas une erreur du point de vue de l'utilisateur), par exemple si on tente de transformer en <code>int</code> ou
						<code>float</code> le texte de l'utilisateur.</p>
</li>
<li><p>Comment savoir s'il faut utiliser <code>try-except</code> ou <code>if-else</code>?</p>
<p>Si un morceau de code que vous voulez exécuter peut provoquer des erreurs qui sont affichées en rouge dans la console, et qui stoppent le
						programme, il faut un <code>try-except</code> pour intercepter l'erreur si elle survient, et vous permettre de continuer l'exécution du
						programme.</p>
<p>Si le code ne provoque pas d'erreur potentiellement, mais que vous voulez faire des actions différentes selon une condition, alors
						utiliser un <code>if-else</code>. </p></li>
<li><p>Une version alternative de <code>op in ["+", "-", "/", "*", ]</code> pourrait être:</p>
<pre><code class="language-python">
						opération_est_correcte = op == "+" or op == "-" or op == "/" or op == "*"
					</code></pre>
</li>
</ul>
</div>
</div>
<div class="exercice">
<h2 data-nb="6.2" id="Question 2">Question 2</h2>
<p>Partant de la solution de l'exercice précédent, répéter l'ensemble du programme indéfiniment, pour permettre à l'utilisateur de faire autant de
			calculs qu'il / elle souhaite.</p>
<p>A chaque fois qu'un calcul a été réalisé, demander à l'utilisateur s'il / elle souhaite continuer ou arrêter. Si l'utilisateur décide d'arrêter, le
			programme se termine. Sinon il recommence en demandant à nouveaux deux nombre, l'opération et affiche le résultat.</p>
<div class="correction">
<pre class="line-numbers"><code class="language-python">
				def avoir_nombre_utilisateur(message):
					nb_est_correct = False
					while not nb_est_correct:
						txt_utilisateur = input(message)
						try:
							nombre = float(txt_utilisateur)
							nb_est_correct = True
						except:
							print(txt_utilisateur, "n'est pas un nombre")
					return nombre

				# Boucle pour répéter les calculs
				utilisateur_veut_continuer = True
				while utilisateur_veut_continuer:
					nb1 = avoir_nombre_utilisateur("Nombre 1: ")
					nb2 = avoir_nombre_utilisateur("Nombre 2: ")

					opération_est_correcte = False
					while not opération_est_correcte:
						op = input("Opération (+,-,*,/): ")
						opération_est_correcte = op in ["+", "-", "/", "*", ]
						if not opération_est_correcte:
							print(op, "n'est pas une opération supportée")

					if op == "+":
						print(nb1, "+", nb2, "=", nb1 + nb2)
					elif op == "-":
						print(nb1, "-", nb2, "=", nb1 - nb2)
					elif op == "/":
						print(nb1, "/", nb2, "=", nb1 / nb2)
					else:
						print(nb1, "*", nb2, "=", nb1 * nb2)

					# Demander utilisateur si veut continuer
					réponse_utilisateur = input("Faire nouveau calcul? (o pour oui): ")
					utilisateur_veut_continuer = réponse_utilisateur == "o"
			</code></pre>
<p>Remarques:</p>
<ul>
<li><p>Sur la dernière ligne, ne pas confondre <code>=</code> avec <code>==</code>.</p>
<p><code>==</code> est un opérateur booléen, qui vaut <code>True</code> quand les deux éléments à gauche et à droite sont égaux. Sur cette
						ligne de code en particulier, <code>==</code> est exécuté en premier, et vaut <code>True</code> si <code>réponse_utilisateur</code> est
						égal à <code>"o"</code>, <code>False</code> sinon.</p>
<p><code>=</code> est l'instruction d'affectation de valeur à une variable, et sera exécuté APRÈS le <code>==</code>, c'est à dire la
						variable <code>utilisateur_veut_continuer</code> prendra la valeur du résultat du test <code>==</code> (c'est à dire <code>True</code>
						ou <code>False</code>).</p>
</li>
</ul>
</div>
</div>
<div class="exercice">
<h2 data-nb="6.3" id="Question 3">Question 3</h2>
<p>Partant de la solution de l'exercice précédent, on veut rendre le code plus lisible et simple à comprendre. On n'ajoute aucune nouvelle
			fonctionnalité du point de vue de l'utilisateur, on adapte le code pour l'améliorer.</p>
<p>Mettre dans une fonction tout le code qui sert à un seul calcul, et donc PAS le code qui sert à répéter les calculs si l'utilisateur souhaite en
			faire d'autres. Utiliser / exécuter ensuite cette fonction avec le code qui répète les caluls.</p>
<div class="correction">
<pre class="line-numbers"><code class="language-python">
				def avoir_nombre_utilisateur(message):
					nb_est_correct = False
					while not nb_est_correct:
						txt_utilisateur = input(message)
						try:
							nombre = float(txt_utilisateur)
							nb_est_correct = True
						except:
							print(txt_utilisateur, "n'est pas un nombre")
					return nombre


				# Définition de notre seconde fonction
				def faire_calcul_utilisateur():
					nb1 = avoir_nombre_utilisateur("Nombre 1: ")
					nb2 = avoir_nombre_utilisateur("Nombre 2: ")

					opération_est_correcte = False
					while not opération_est_correcte:
						op = input("Opération (+,-,*,/): ")
						opération_est_correcte = op in ["+", "-", "/", "*", ]
						if not opération_est_correcte:
							print(op, "n'est pas une opération supportée")

					if op == "+":
						print(nb1, "+", nb2, "=", nb1 + nb2)
					elif op == "-":
						print(nb1, "-", nb2, "=", nb1 - nb2)
					elif op == "/":
						print(nb1, "/", nb2, "=", nb1 / nb2)
					else:
						print(nb1, "*", nb2, "=", nb1 * nb2)


				utilisateur_veut_continuer = True
				while utilisateur_veut_continuer:

					# Appel de la fonction
					faire_calcul_utilisateur()

					réponse_utilisateur = input("Faire nouveau calcul? (o pour oui): ")
					utilisateur_veut_continuer = réponse_utilisateur == "o"
			</code></pre>
<p>Remarques:</p>
<ul>
<li>On exécute notre fonction <code>avoir_nombre_utilisateur</code> dans notre seconde fonction <code>faire_calcul_utilisateur</code>. Il est
					fréquent en programmation d'utiliser nos fonctions dans d'autres de nos fonctions.
				</li>
<li><p>La fonction <code>avoir_nombre_utilisateur</code> retourne un résultat avec l'instruction <code>return</code>. En revanche la fonction
					<code>faire_calcul_utilisateur</code> ne retourne aucun résultat, car c'est ce qu'on souhaite: qu'elle fasse tout le travail de demander les
					nombres et l'opérateur à l'utilisateur et lui affiche le résultat. On a décidé que la fonction ne sert pas à renvoyer un quelconque
					résultat, seul nous importe qu'elle fasse ce qu'elle doit faire.</p>
<p>Dans notre boucle <code>while</code> tout en bas, on veut juste appeler la fonction, et qu'elle fasse <em>elle-même</em> tout le calcul
						et l'affichage. Dans ce cas, un <code>return</code> dans la fonction est inutile.</p>
<p>Rappelez-vous cependant que même si on n'écrit aucun <code>return</code>, une fonction retourne quand même <code>None</code> par défaut.
					</p></li>
</ul>
</div>
</div>



		<div class="nav_arrows">
			<hr>
			
		<div style="display: flex; flex-direction: row; justify-content: space-between; padding: 1em 0em;">
				<span>
					
						<a href="tp1.html">← Page précédente</a>
					
				</span>
			
				<span style="padding: 0 .5em;">
						<a href="index.html">1ère page</a>
					</span>
			
			<span>
				
					<a href="tp3.html">Page suivante →</a>
				
				</span>
		</div>
		
		</div>

	</div>

	
		<style>
			@media only screen and (min-width: 70em) {
				#side_nav_bar {
					width: 25vw;
				}

				#contenu {
					width: 75vw;
				}
			}
		</style>
	


</div>
  
<script src="prism.js"></script>

<script>
	if (document.URL.indexOf("localhost") === -1) {
		//console.log("pas localhost");
		document.querySelector("link[rel = 'icon']").setAttribute("href", "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='200' height='200' viewBox='0 0 100 100' style='display:block; margin:auto; padding: 0 0 1em 0;'%3E%3Cstyle%3E text %7B text-align: center; fill: white; text-anchor: middle; font-size: 11pt; %3C/style%3E%3C!--	%3Crect fill='hsl(000,50%25, 50%25)' x='0' y='0' width='100' height='100'%3E%3C/rect%3E--%3E%3Crect fill='hsl(200,50%25, 50%25)' x='0' y='0' width='100' height='100'%3E%3C/rect%3E%3Ctext x='50' y='75' style='font-size: 50pt;' id='t'%3E 🐍 %3C/text%3E%3C!--	%3Canimate--%3E%3C!-- xlink:href='%23t'--%3E%3C!-- attributeName='y'--%3E%3C!-- calcMode='spline'--%3E%3C!-- values='60; 90; 60'--%3E%3C!-- keyTimes='0; 0.5; 1'--%3E%3C!-- keySplines='--%3E%3C!-- .42 0 1 1;--%3E%3C!-- 0 0 .59 1;'--%3E%3C!-- dur='2s'--%3E%3C!-- fill='freeze'--%3E%3C!-- repeatCount='indefinite'/%3E--%3E%3C/svg%3E");
	} else {
		//console.log("localhost");
	}
	// On supprime la première ligne des <pre><code> qui est considérée toujours vide et inutile
	const codes = document.querySelectorAll('pre[class="affichage_console"] code');
	
	codes.forEach(function (el) {
		// Attention: modifier textContent ou innerText d'un élément détruit tous ses éléments enfant :(
		//el.textContent = el.textContent.replace(/^\n/, '');
		// On modifie donc le premie noeud texte uniquement
		el.childNodes[0].textContent = el.childNodes[0].textContent.replace(/^\n/, ''); // suppose que c'est un élément texte
	});

	// On ajoute un <br> avant et après chaque <pre>
	let pres = document.querySelectorAll('pre, .exercices div.noté');
	pres.forEach(function (el) {
		el.parentNode.insertBefore(document.createElement('div'), el);
		el.parentNode.insertBefore(document.createElement('div'), el.nextSibling);
	});

	// On ajoute 'Affichage' avant chaque affichage console
	pres = document.querySelectorAll('pre[class="affichage_console"]');
	pres.forEach(function (el) {
		const p = document.createElement('p');
		p.innerHTML = `<small>↓ Affichage dans la console (ou dans le shell, selon où vous lancez l'exécution)<mall>`;
		p.classList.add("légende_placée_en_haut");
		el.parentNode.insertBefore(p, el);
	});

	// Cacher corrections dans les TD / TP, et permettre de les afficher
	let divs_correction = document.querySelectorAll('div[class="correction"]');
	divs_correction.forEach(function (div) {
		div.classList.add("correction_hidden");
		const p = document.createElement('p');
		p.innerHTML = `<span class="correction_lien_à_cliquer">📝 Afficher / cacher correction ✓</span>`;
		p.onclick = function (evt) {
			div.classList.toggle("correction_hidden");
		};
		div.parentNode.insertBefore(p, div);
	});
</script>
</body>
</html>